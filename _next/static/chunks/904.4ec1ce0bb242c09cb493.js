(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[904],{86632:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ml}});var i=n(2784),r=n(47933),a=n(4517),o=n(15060),s=n(2788),c=n(52322),u=i.createContext(null),l=function(e){var t=e.children,n=void 0===t?null:t,r=(0,i.useRef)(),a=(0,i.useRef)(),o=(0,i.useMemo)((function(){return function(){var e;a.current&&r.current&&(r.current.style.visibility="visible",null===(e=a.current({particleCount:400,spread:160,origin:{y:.3}}))||void 0===e||e.finally((function(){r.current&&(r.current.style.visibility="hidden")})))}}),[]);(0,i.useEffect)((function(){r.current&&!a.current&&(r.current.style.visibility="hidden",a.current=s.Z.create(r.current,{resize:!0,useWorker:!0}))}),[]);return(0,c.jsxs)(u.Provider,{value:{dropConfetti:o},children:[(0,c.jsx)("canvas",{ref:r,style:{width:"100vw",height:"100vh",position:"absolute",zIndex:1,top:0,left:0}}),n]})},d=function(){var e=p().dropConfetti;return(0,i.useEffect)((function(){e()}),[e]),(0,c.jsx)(c.Fragment,{})},p=function(){return(0,i.useContext)(u)},f=n(37488),m=n(24832),h=n(36165),x=n(24144),b=n(79696),y=n(77460),v=n(64993),g=n(9207),j=n(92847),k=n.n(j),w=n(43939),N=n(81954),P=n(64529),S=n(42150),M=n(27755),T=n(32431),A=n(65689),C=n(44750),Z=n(65885);function O(e,t,n){return E.apply(this,arguments)}function E(){return(E=(0,g.Z)(k().mark((function e(t,n,i){var r,a,s;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:return r=o.utils.programIds(),a=[],s=[Z.Token.createCloseAccountInstruction(r.token,(0,o.toPublicKey)(i),n.publicKey,n.publicKey,[])],e.next=7,(0,o.sendTransactionWithRetry)(t,n,s,a,"single");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=n(2626),K=n(18191),I=n(13550),_=n.n(I),R=n(399),F=n(54214),D=n(83371),W=n(8235);function L(e,t,n,i,r,a,o,s){return V.apply(this,arguments)}function V(){return(V=(0,g.Z)(k().mark((function e(t,n,i,r,a,s,c,u){var l,d,p,f,m,h;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:return e.next=4,t.getMinimumBalanceForRentExemption(Z.AccountLayout.span);case 4:return l=e.sent,d=[],p=[],e.next=9,(0,D.activateVault)(new(_())(0),i,r,a,n.publicKey.toBase58(),p);case 9:return f=(0,F.createTokenAccount)(p,n.publicKey,l,(0,o.toPublicKey)(r),n.publicKey,d),m=(0,F.createTokenAccount)(p,n.publicKey,l,(0,o.toPublicKey)(c),n.publicKey,d),h=R.Keypair.generate(),(0,W.approve)(p,[],m,n.publicKey,0,!1,void 0,h),(0,W.approve)(p,[],f,n.publicKey,0,!1,void 0,h),d.push(h),e.next=17,(0,D.combineVault)(i,f.toBase58(),m.toBase58(),r,a,s,n.publicKey.toBase58(),n.publicKey.toBase58(),h.publicKey.toBase58(),u,p);case 17:return e.abrupt("return",{instructions:p,signers:d});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t,n,i){return z.apply(this,arguments)}function z(){return(z=(0,g.Z)(k().mark((function e(t,n,i,r){var a,s,c,u,l,d,p,f,m,h,x,b,y,v,g,j,w,N,P,S;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:if(a=0,s=(0,o.programIds)(),c=[],u=[],l=[],d=[],i.info.state!==o.VaultState.Inactive){e.next=22;break}return console.log("Vault is inactive, combining"),e.next=12,t.getAccountInfo((0,o.toPublicKey)(i.info.pricingLookupAddress));case 12:if(!(p=e.sent)){e.next=22;break}return f=(0,o.decodeExternalPriceAccount)(p.data),e.next=17,L(t,n,i.pubkey,i.info.fractionMint,i.info.fractionTreasury,i.info.redeemTreasury,f.priceMint,i.info.pricingLookupAddress);case 17:m=e.sent,h=m.instructions,x=m.signers,c.push(x),u.push(h);case 22:if(b=i.pubkey,y=[],v=r[b+"-0"])for(y.push(v),g=1;v;)(v=r[b+"-"+g.toString()])&&y.push(v),g++;console.log("Found boxes",y),j=0;case 28:if(!(j<y.length)){e.next=48;break}return w=y[j],e.next=32,(0,o.findProgramAddress)([n.publicKey.toBuffer(),s.token.toBuffer(),(0,o.toPublicKey)(w.info.tokenMint).toBuffer()],s.associatedToken);case 32:return N=e.sent[0],e.next=35,t.getAccountInfo((0,o.toPublicKey)(N));case 35:return P=e.sent,console.log("Existing ata?",P),P||(0,o.createAssociatedTokenAccountInstruction)(d,(0,o.toPublicKey)(N),n.publicKey,n.publicKey,(0,o.toPublicKey)(w.info.tokenMint)),e.next=40,t.getTokenAccountBalance((0,o.toPublicKey)(w.info.store));case 40:return S=e.sent,e.next=43,(0,o.withdrawTokenFromSafetyDepositBox)(new(_())(S.value.uiAmount||1),N,w.pubkey,w.info.store,i.pubkey,i.info.fractionMint,n.publicKey.toBase58(),d);case 43:1===a&&(c.push(l),u.push(d),a=0,l=[],d=[]),a++;case 45:j++,e.next=28;break;case 48:return u[u.length-1]!==d&&(c.push(l),u.push(d)),e.next=51,(0,o.sendTransactionsWithManualRetry)(t,n,u,c);case 51:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t,n,i){return H.apply(this,arguments)}function H(){return(H=(0,g.Z)(k().mark((function e(t,n,i,r){var a,s,c,u;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:if(a=[],s=[],i.auctionManager.status!==B.AuctionManagerStatus.Initialized){e.next=17;break}if(c=[],u=[],i.auction.info.authority!==n.publicKey.toBase58()){e.next=10;break}return e.next=10,(0,o.setAuctionAuthority)(i.auction.pubkey,n.publicKey.toBase58(),i.auctionManager.pubkey,u);case 10:if(i.vault.info.authority!==n.publicKey.toBase58()){e.next=13;break}return e.next=13,(0,o.setVaultAuthority)(i.vault.pubkey,n.publicKey.toBase58(),i.auctionManager.pubkey,u);case 13:return e.next=15,(0,K.A)(i.auctionManager.pubkey,i.auction.pubkey,n.publicKey.toBase58(),i.vault.pubkey,u);case 15:a.push(c),s.push(u);case 17:return e.next=19,(0,o.sendTransactionsWithManualRetry)(t,n,s,a);case 19:return e.next=21,U(t,n,i.vault,r);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e,t,n){return Y.apply(this,arguments)}function Y(){return(Y=(0,g.Z)(k().mark((function e(t,n,i){var r,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:return r=[],a=[],e.next=6,(0,o.signMetadata)(i,n.publicKey.toBase58(),a);case 6:return e.next=8,(0,o.sendTransactionWithRetry)(t,n,a,r,"single");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X=n(12267),Q=n(10342),J=n(47411);function $(e,t,n,i,r){return ee.apply(this,arguments)}function ee(){return(ee=(0,g.Z)(k().mark((function e(t,n,i,r,a){var s,c,u;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:return s=(0,o.createMint)(r,t.publicKey,i,0,t.publicKey,t.publicKey,a),c=(0,o.programIds)(),e.next=6,(0,o.findProgramAddress)([(0,o.toPublicKey)(n).toBuffer(),c.token.toBuffer(),s.toBuffer()],c.associatedToken);case 6:return u=e.sent[0],(0,o.createAssociatedTokenAccountInstruction)(r,(0,o.toPublicKey)(u),t.publicKey,(0,o.toPublicKey)(n),s),r.push(Z.Token.createMintToInstruction(c.token,s,(0,o.toPublicKey)(u),t.publicKey,[],1)),e.abrupt("return",{mint:s.toBase58(),account:u});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te="Metaplex",ne=o.WRAPPED_SOL_MINT;function ie(e,t,n,i){var r,a,o,s=null===(r=t.auctionManager.participationConfig)||void 0===r?void 0:r.safetyDepositBoxIndex;return void 0!=s&&null!=s&&(!(!n||null!==i&&void 0!==i&&i.info.getBidRedeemed(s))&&(null===e&&(null===(a=t.auctionManager.participationConfig)||void 0===a?void 0:a.nonWinningConstraint)!==B.NonWinningConstraint.NoParticipationPrize||null!==e&&(null===(o=t.auctionManager.participationConfig)||void 0===o?void 0:o.winnerConstraint)!==B.WinningConstraint.NoParticipationPrize))}function re(e,t,n,i,r,a,o,s){return ae.apply(this,arguments)}function ae(){return(ae=(0,g.Z)(k().mark((function e(t,n,i,r,a,s,c,u){var l,d,p,f,m,h,x,b,y,v,g,j,w,N,P,S,M;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:if(p=[],f=[],!r.auction.info.ended()||r.auction.info.state===o.AuctionState.Ended){e.next=7;break}return e.next=7,Re(t,n,i,r,a,0,f,p);case 7:return e.next=9,t.getMinimumBalanceForRentExemption(Z.AccountLayout.span);case 9:return m=e.sent,e.next=12,t.getMinimumBalanceForRentExemption(Z.MintLayout.span);case 12:if(h=e.sent,x=null,null!==(l=r.myBidderPot)&&void 0!==l&&l.pubkey&&(x=r.auction.info.bidState.getWinnerIndex(null===(d=r.myBidderPot)||void 0===d?void 0:d.info.bidderAct)),null===x){e.next=53;break}b=r.items[x],y=0;case 18:if(!(y<b.length)){e.next=43;break}v=b[y],g=v.safetyDeposit,e.t0=v.winningConfigType,e.next=e.t0===B.WinningConfigType.PrintingV1?24:e.t0===B.WinningConfigType.PrintingV2?28:e.t0===B.WinningConfigType.FullRightsTransfer?32:e.t0===B.WinningConfigType.TokenOnlyTransfer?36:40;break;case 24:return console.log("Redeeming printing v1"),e.next=27,pe(r,a,m,h,n,g,v,x,p,f);case 27:return e.abrupt("break",40);case 28:return console.log("Redeeming printing v2"),e.next=31,le(t,r,h,n,n.publicKey.toBase58(),g,v,p,f,x,s);case 31:return e.abrupt("break",40);case 32:return console.log("Redeeming Full Rights"),e.next=35,ce(r,a,m,n,g,v,x,p,f);case 35:return e.abrupt("break",40);case 36:return console.log("Redeeming Token only"),e.next=39,oe(r,a,m,n,g,x,p,f);case 39:return e.abrupt("break",40);case 40:y++,e.next=18;break;case 43:if(!r.myBidderMetadata||!r.myBidderPot){e.next=51;break}return w=[],N=[],f.push(N),p.push(w),console.log("Claimed"),e.next=51,(0,X.G)(r.auctionManager.acceptPayment,r.myBidderMetadata.info.bidderPubkey,null===(j=r.myBidderPot)||void 0===j?void 0:j.info.bidderPot,r.vault.pubkey,r.auction.info.tokenMint,N);case 51:e.next=55;break;case 53:return e.next=55,Be(r,a,m,n,p,f,t);case 55:if(!r.participationItem||!ie(x,r,r.myBidderMetadata,r.myBidRedemption)){e.next=66;break}if(console.log("eligible for participation"),S=r.participationItem,M=S.safetyDeposit,(null===(P=S.masterEdition)||void 0===P?void 0:P.info.key)!=o.MetadataKey.MasterEditionV1){e.next=64;break}return e.next=62,ye(t,r,a,m,h,n,M,S,p,f);case 62:e.next=66;break;case 64:return e.next=66,xe(t,r,a,m,h,n,n.publicKey.toBase58(),M,r.myBidRedemption,r.myBidderMetadata,S,p,f);case 66:if(n.publicKey.toBase58()!==r.auctionManager.authority){e.next=69;break}return e.next=69,ke(t,n,r,a,u,c,s,p,f);case 69:return e.next=71,(0,o.sendTransactionsWithManualRetry)(t,n,f,p);case 71:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e,t,n,i,r,a,o,s){return se.apply(this,arguments)}function se(){return(se=(0,g.Z)(k().mark((function e(t,n,i,r,a,s,c,u){var l,d,p,f,m;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:if(l=[],d=[],c.push(l),u.push(d),t.auctionManager.isItemClaimed(s,a.info.order)||!t.myBidderMetadata){e.next=17;break}return(f=null===(p=n.get(a.info.tokenMint))||void 0===p?void 0:p.pubkey)||(f=(0,F.createTokenAccount)(d,r.publicKey,i,(0,o.toPublicKey)(a.info.tokenMint),r.publicKey,l).toBase58()),e.next=12,(0,B.redeemBid)(t.auctionManager.vault,a.info.store,f,a.pubkey,t.vault.info.fractionMint,t.myBidderMetadata.info.bidderPubkey,r.publicKey.toBase58(),void 0,void 0,!1,d);case 12:return e.next=14,(0,o.getMetadata)(a.info.tokenMint);case 14:return m=e.sent,e.next=17,(0,o.updatePrimarySaleHappenedViaToken)(m,r.publicKey.toBase58(),f,d);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(e,t,n,i,r,a,o,s,c){return ue.apply(this,arguments)}function ue(){return(ue=(0,g.Z)(k().mark((function e(t,n,i,r,a,s,c,u,l){var d,p,f,m,h;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:if(d=[],p=[],u.push(d),l.push(p),t.auctionManager.isItemClaimed(c,a.info.order)||!t.myBidderMetadata){e.next=17;break}return(m=null===(f=n.get(a.info.tokenMint))||void 0===f?void 0:f.pubkey)||(m=(0,F.createTokenAccount)(p,r.publicKey,i,(0,o.toPublicKey)(a.info.tokenMint),r.publicKey,d).toBase58()),e.next=12,(0,B.redeemFullRightsTransferBid)(t.auctionManager.vault,a.info.store,m,a.pubkey,t.vault.info.fractionMint,t.myBidderMetadata.info.bidderPubkey,r.publicKey.toBase58(),p,s.metadata.pubkey,r.publicKey.toBase58());case 12:return e.next=14,(0,o.getMetadata)(a.info.tokenMint);case 14:return h=e.sent,e.next=17,(0,o.updatePrimarySaleHappenedViaToken)(h,r.publicKey.toBase58(),m,p);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e,t,n,i,r,a,o,s,c,u,l){return de.apply(this,arguments)}function de(){return(de=(0,g.Z)(k().mark((function e(t,n,i,r,a,s,c,u,l,d,p){var f,m,h,x,b,y,v,g,j,w,N,P,S,M,T,A;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:if(c.masterEdition&&c.metadata){e.next=4;break}return e.abrupt("return");case 4:return f=c.masterEdition,e.next=7,(0,B.getPrizeTrackingTicket)(n.auctionManager.pubkey,c.metadata.info.mint);case 7:m=e.sent,h=p[m],x=h?h.info.supplySnapshot:f.info.supply,b=new I.BN(1),n.items.forEach((function(e,t){return t<d&&e.forEach((function(e){e.safetyDeposit.info.order===c.safetyDeposit.info.order&&e.winningConfigType===c.winningConfigType&&(b=b.add(e.amount))}))})),y=0;case 13:if(!(y<c.amount.toNumber())){e.next=53;break}return v=[],g=[],e.next=18,$(r,a,i,v,g);case 18:return j=e.sent,w=j.mint,N=j.account,P=n.auction.info.bidState.getWinnerIndex(a)||0,S=x.add(b.add(new I.BN(y))),e.next=25,(0,o.getEditionMarkPda)(c.metadata.info.mint,S);case 25:return M=e.sent,e.prev=26,e.next=29,t.getAccountInfo((0,o.toPublicKey)(M));case 29:if(!(T=e.sent)){e.next=35;break}if(!(0,o.decodeEditionMarker)(T.data).editionTaken(S.toNumber())){e.next=35;break}return console.log("Edition",S,"taken, continuing"),e.abrupt("continue",50);case 35:e.next=40;break;case 37:e.prev=37,e.t0=e.catch(26),console.error(e.t0);case 40:return e.next=42,(0,B.redeemPrintingV2Bid)(n.vault.pubkey,s.info.store,N,s.pubkey,a,r.publicKey.toBase58(),c.metadata.pubkey,f.pubkey,c.metadata.info.mint,w,S,new I.BN(b.add(new I.BN(y))),new I.BN(P),v);case 42:return e.next=44,(0,o.getMetadata)(w);case 44:if(A=e.sent,r.publicKey.toBase58()!==a){e.next=48;break}return e.next=48,(0,o.updatePrimarySaleHappenedViaToken)(A,r.publicKey.toBase58(),N,v);case 48:l.push(v),u.push(g);case 50:y++,e.next=13;break;case 53:case"end":return e.stop()}}),e,null,[[26,37]])})))).apply(this,arguments)}function pe(e,t,n,i,r,a,o,s,c,u){return fe.apply(this,arguments)}function fe(){return(fe=(0,g.Z)(k().mark((function e(t,n,i,r,a,s,c,u,l,d){var p,f,m,h,x,b,y,v,g,j;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:if(c.masterEdition&&c.metadata){e.next=4;break}return e.abrupt("return");case 4:return p=c.metadata.info.updateAuthority,e.next=7,(0,o.deprecatedGetReservationList)(c.masterEdition.pubkey,t.auctionManager.pubkey);case 7:if(f=e.sent,m=c.masterEdition,h=n.get(m.info.printingMint),x=null===h||void 0===h?void 0:h.pubkey,b=h?h.info.amount.toNumber():0,y=t.auctionManager.isItemClaimed(u,s.info.order),!p||!t.myBidderMetadata){e.next=33;break}if(console.log("This state item is",y),y){e.next=24;break}return v=[],g=[],l.push(v),d.push(g),x||(x=(0,F.createTokenAccount)(g,a.publicKey,i,(0,o.toPublicKey)(m.info.printingMint),a.publicKey,v).toBase58()),e.next=23,(0,B.redeemBid)(t.auctionManager.vault,s.info.store,x,s.pubkey,t.vault.info.fractionMint,t.myBidderMetadata.info.bidderPubkey,a.publicKey.toBase58(),c.masterEdition.pubkey,f,!0,g);case 23:b=t.auctionManager.getAmountForWinner(u,s.info.order).toNumber();case 24:if(!(x&&b>0)){e.next=33;break}j=0;case 26:if(!(j<b)){e.next=33;break}return console.log("Redeeming v1 token",j),e.next=30,me(a,p,c,x,r,i,l,d,f);case 30:j++,e.next=26;break;case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e,t,n,i,r,a,o,s,c){return he.apply(this,arguments)}function he(){return(he=(0,g.Z)(k().mark((function e(t,n,i,r,a,s,c,u,l){var d,p,f,m,h,x,b;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:if(i.masterEdition){e.next=4;break}return e.abrupt("return");case 4:return d=[],p=[],c.push(d),u.push(p),f=(0,o.createMint)(p,t.publicKey,a,0,t.publicKey,t.publicKey,d).toBase58(),m=(0,F.createTokenAccount)(p,t.publicKey,s,(0,o.toPublicKey)(f),t.publicKey,d),p.push(Z.Token.createMintToInstruction((0,o.programIds)().token,(0,o.toPublicKey)(f),m,t.publicKey,[],1)),h=(0,W.approve)(p,[],(0,o.toPublicKey)(r),t.publicKey,1),d.push(h),x=i.masterEdition,e.next=16,(0,o.deprecatedMintNewEditionFromMasterEditionViaPrintingToken)(f,i.metadata.info.mint,t.publicKey.toBase58(),x.info.printingMint,r,h.publicKey.toBase58(),n,l,p,t.publicKey.toBase58());case 16:return e.next=18,(0,o.getMetadata)(f);case 18:return b=e.sent,e.next=21,(0,o.updatePrimarySaleHappenedViaToken)(b,t.publicKey.toBase58(),m.toBase58(),p);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(e,t,n,i,r,a,o,s,c,u,l,d,p){return be.apply(this,arguments)}function be(){return(be=(0,g.Z)(k().mark((function e(t,n,i,r,a,s,c,u,l,d,p,f,m){var h,x,b,y,g,j,w,N,P,S,M,T,A,Z,O,E,K,_,R,F,D;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:if(p.masterEdition&&p.metadata){e.next=4;break}return e.abrupt("return");case 4:if(null!==l&&void 0!==l&&null!==(h=l.info)&&void 0!==h&&h.getBidRedeemed(u.info.order)){e.next=55;break}return b=p.masterEdition,y=[],g=[],j=[],e.next=11,$(s,c,a,y,g);case 11:if(w=e.sent,N=w.mint,P=w.account,S=null===(x=n.auctionManager.participationConfig)||void 0===x?void 0:x.fixedPrice,M=void 0!==S&&null!==S?S.toNumber():(null===d||void 0===d?void 0:d.info.lastBid.toNumber())||0,T=i.get(n.auction.info.tokenMint),console.log("Have token account",T),T){e.next=24;break}return e.next=21,t.getTokenAccountsByOwner(s.publicKey,{mint:ne});case 21:(A=e.sent).value.length>0&&(T=(0,o.TokenAccountParser)(A.value[0].pubkey.toBase58(),A.value[0].account)),console.log("Found token account",T);case 24:if(Z="",n.auction.info.tokenMint!=o.WRAPPED_SOL_MINT.toBase58()){e.next=29;break}Z=(0,o.ensureWrappedAccount)(y,j,T,s.publicKey,M+r,g),e.next=32;break;case 29:return e.next=31,De(n,s,t);case 31:Z=e.sent;case 32:return m.push(y),f.push(g),O=[],E=[],K=(0,W.approve)(O,j,(0,o.toPublicKey)(Z),s.publicKey,M),E.push(K),_=n.auction.info.bidState.getWinnerIndex(s.publicKey.toBase58()),e.next=41,(0,B.redeemParticipationBidV3)(n.vault.pubkey,u.info.store,P,u.pubkey,c,s.publicKey.toBase58(),p.metadata.pubkey,b.pubkey,p.metadata.info.mint,K.publicKey.toBase58(),n.auctionManager.acceptPayment,(0,o.pubkeyToString)(Z),N,b.info.supply.add(new I.BN(1)),null!=_&&void 0!=_?new I.BN(_):null,O);case 41:return m.push([].concat(O,(0,v.Z)(j.reverse()))),f.push(E),e.next=45,(0,o.getMetadata)(N);case 45:if(R=e.sent,c!==s.publicKey.toBase58()){e.next=53;break}return F=[],D=[],e.next=51,(0,o.updatePrimarySaleHappenedViaToken)(R,s.publicKey.toBase58(),P,F);case 51:m.push(F),f.push(D);case 53:e.next=56;break;case 55:console.log("Item is already claimed!",p.metadata.info.mint);case 56:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(e,t,n,i,r,a,o,s,c,u){return ve.apply(this,arguments)}function ve(){return(ve=(0,g.Z)(k().mark((function e(t,n,i,r,a,s,c,u,l,d){var p,f,m,h,x,b,y,g,j,w,N,P,S,M,T,A,Z,O,E,K,I,_,R,D,L,V,U;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:if(x=u.masterEdition,(b=null===(p=n.auctionManager.instance.info.state)||void 0===p?void 0:p.participationState)&&null!==b&&void 0!==b&&b.printingAuthorizationTokenAccount&&null!==x&&void 0!==x&&x.info.oneTimePrintingAuthorizationMint&&u.metadata){e.next=6;break}return e.abrupt("return");case 6:return y=u.metadata.info.updateAuthority,g=i.get(n.auction.info.tokenMint),j=o.cache.get(n.auction.info.tokenMint),e.next=11,t.getTokenAccountBalance((0,o.toPublicKey)(b.printingAuthorizationTokenAccount));case 11:return w=e.sent,e.next=14,t.getTokenAccountBalance((0,o.toPublicKey)(c.info.store));case 14:if(N=e.sent,0!==w.value.uiAmount||1!==N.value.uiAmount){e.next=23;break}return P=[],S=[],M=(0,F.createTokenAccount)(S,s.publicKey,r,(0,o.toPublicKey)(null===x||void 0===x?void 0:x.info.oneTimePrintingAuthorizationMint),(0,o.toPublicKey)(n.auctionManager.pubkey),P).toBase58(),e.next=21,(0,J.z)(n.vault.pubkey,n.auctionManager.pubkey,n.auction.pubkey,c.info.store,M,b.printingAuthorizationTokenAccount,c.pubkey,n.vault.info.fractionMint,x.info.printingMint,x.info.oneTimePrintingAuthorizationMint,x.pubkey,u.metadata.pubkey,s.publicKey.toBase58(),S);case 21:l.push(P),d.push(S);case 23:if(T=null===(f=i.get(x.info.printingMint))||void 0===f?void 0:f.pubkey,A=(null===(m=i.get(x.info.printingMint))||void 0===m?void 0:m.info.amount)||0,!(x&&y&&n.myBidderMetadata&&j)||null!==(h=n.myBidRedemption)&&void 0!==h&&h.info.getBidRedeemed(c.info.order)){e.next=48;break}if(null!==(Z=n.myBidRedemption)&&void 0!==Z&&Z.info.getBidRedeemed(c.info.order)){e.next=48;break}if(E=[],K=[],I=[],T||(_=[],R=[],l.push(_),d.push(R),T=(0,F.createTokenAccount)(R,s.publicKey,r,(0,o.toPublicKey)(x.info.printingMint),s.publicKey,_).toBase58()),l.push(E),D=null===(O=n.auctionManager.participationConfig)||void 0===O?void 0:O.fixedPrice,L=void 0!==D&&null!==D?D.toNumber():n.myBidderMetadata.info.lastBid.toNumber()||0,V="",n.auction.info.tokenMint!=o.WRAPPED_SOL_MINT.toBase58()){e.next=39;break}V=(0,o.ensureWrappedAccount)(K,I,g,s.publicKey,L+r,E),e.next=42;break;case 39:return e.next=41,De(n,s,t);case 41:V=e.sent;case 42:return U=(0,W.approve)(K,I,(0,o.toPublicKey)(V),s.publicKey,L),E.push(U),e.next=46,(0,B.deprecatedRedeemParticipationBid)(n.auctionManager.vault,c.info.store,T,c.pubkey,n.myBidderMetadata.info.bidderPubkey,s.publicKey.toBase58(),K,b.printingAuthorizationTokenAccount,U.publicKey.toBase58(),n.auctionManager.acceptPayment,V);case 46:A=1,d.push([].concat(K,(0,v.Z)(I.reverse())));case 48:if(!T||1!==A){e.next=51;break}return e.next=51,me(s,y,u,T,a,r,l,d,void 0);case 51:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e,t,n){return je.apply(this,arguments)}function je(){return(je=(0,g.Z)(k().mark((function e(t,n,i){var r,a,o,s,c,u;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a=0;case 2:if(!(a<n.length)){e.next=16;break}if((o=n[a]).info.cancelled){e.next=13;break}return s=t.auction.info.bidState.getWinnerIndex(o.info.bidderPubkey),e.next=8,(0,B.getBidRedemption)(t.auction.pubkey,o.pubkey);case 8:e.t0=e.sent,c=i[e.t0],u=ie(s,t,o,c),console.log(o.pubkey,"eligible?",u),u&&r.push({bid:o,bidRedemption:c});case 13:a++,e.next=2;break;case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e,t,n,i,r,a,o,s,c){return we.apply(this,arguments)}function we(){return(we=(0,g.Z)(k().mark((function e(t,n,i,r,a,s,c,u,l){var d,p,f,m,h,x,b,y,v,g,j,w,N;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMinimumBalanceForRentExemption(Z.AccountLayout.span);case 2:return p=e.sent,e.next=5,t.getMinimumBalanceForRentExemption(Z.MintLayout.span);case 5:if(f=e.sent,!i.participationItem||!i.participationItem.safetyDeposit||(null===(d=i.participationItem.masterEdition)||void 0===d?void 0:d.info.key)!=o.MetadataKey.MasterEditionV2){e.next=18;break}return e.next=9,t.getTokenAccountBalance((0,o.toPublicKey)(i.participationItem.safetyDeposit.info.store));case 9:if(!e.sent.value.uiAmount){e.next=18;break}return e.next=13,ge(i,a,s);case 13:return m=e.sent,e.next=16,Promise.all(m.map((function(e){return i.participationItem&&xe(t,i,r,p,f,n,e.bid.info.bidderPubkey,i.participationItem.safetyDeposit,e.bidRedemption,e.bid,i.participationItem,u,l)})));case 16:return e.next=18,Te(t,i,n,i.participationItem.safetyDeposit,i.participationItem,u,l);case 18:h={},x=0;case 20:if(!(x<i.auctionManager.numWinners.toNumber())){e.next=59;break}b=i.items[x],y=0;case 23:if(!(y<b.length)){e.next=56;break}return v=b[y],g=v.safetyDeposit,e.next=28,t.getTokenAccountBalance((0,o.toPublicKey)(g.info.store));case 28:if(0!==e.sent.value.uiAmount){e.next=32;break}return console.log("Skipping",y," due to empty balance"),e.abrupt("continue",53);case 32:if(!(x<i.auction.info.bidState.bids.length&&v.winningConfigType!=B.WinningConfigType.PrintingV2)){e.next=34;break}return e.abrupt("continue",53);case 34:e.t0=v.winningConfigType,e.next=e.t0===B.WinningConfigType.PrintingV1?37:e.t0===B.WinningConfigType.PrintingV2?41:e.t0===B.WinningConfigType.FullRightsTransfer?45:e.t0===B.WinningConfigType.TokenOnlyTransfer?49:53;break;case 37:return console.log("Redeeming printing v1 same way we redeem a normal bid because we arent printing it"),e.next=40,Ce(i,r,p,n,g,v,u,l,x);case 40:return e.abrupt("break",53);case 41:return e.delegateYield(k().mark((function e(){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=i.auction.info.bidState.getWinnerAt(x))){e.next=7;break}if(!a.find((function(e){return e.info.bidderPubkey===r}))){e.next=7;break}return console.log("Redeeming v2 for bid by wallet",r),e.next=7,le(t,i,f,n,r,v.safetyDeposit,v,u,l,x,c);case 7:return h[v.metadata.info.mint]=v,e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)}))(),"t1",42);case 42:if("break"!==e.t1){e.next=45;break}return e.abrupt("break",53);case 45:return console.log("Redeeming Full Rights"),e.next=48,Se(i,r,p,n,g,v,u,l,x);case 48:return e.abrupt("break",53);case 49:return console.log("Redeeming Token only"),e.next=52,Ne(i,r,p,n,g,u,l,x);case 52:return e.abrupt("break",53);case 53:y++,e.next=23;break;case 56:x++,e.next=20;break;case 59:j=Object.values(h),w=0;case 61:if(!(w<j.length)){e.next=68;break}return N=j[w],e.next=65,Te(t,i,n,N.safetyDeposit,N,u,l);case 65:w++,e.next=61;break;case 68:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(e,t,n,i,r,a,o,s){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,g.Z)(k().mark((function e(t,n,i,r,a,s,c,u){var l,d,p,f;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:if(l=[],d=[],s.push(l),c.push(d),t.auctionManager.isItemClaimed(u,a.info.order)){e.next=12;break}return(f=null===(p=n.get(a.info.tokenMint))||void 0===p?void 0:p.pubkey)||(f=(0,F.createTokenAccount)(d,r.publicKey,i,(0,o.toPublicKey)(a.info.tokenMint),r.publicKey,l).toBase58()),e.next=12,(0,B.redeemBid)(t.auctionManager.vault,a.info.store,f,a.pubkey,t.vault.info.fractionMint,r.publicKey.toBase58(),r.publicKey.toBase58(),void 0,void 0,!1,d,u);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(e,t,n,i,r,a,o,s,c){return Me.apply(this,arguments)}function Me(){return(Me=(0,g.Z)(k().mark((function e(t,n,i,r,a,s,c,u,l){var d,p,f,m,h;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:if(d=[],p=[],f=t.auctionManager.isItemClaimed(l,a.info.order),c.push(d),u.push(p),f){e.next=12;break}return(h=null===(m=n.get(a.info.tokenMint))||void 0===m?void 0:m.pubkey)||(h=(0,F.createTokenAccount)(p,r.publicKey,i,(0,o.toPublicKey)(a.info.tokenMint),r.publicKey,d).toBase58()),e.next=12,(0,B.redeemFullRightsTransferBid)(t.auctionManager.vault,a.info.store,h,a.pubkey,t.vault.info.fractionMint,r.publicKey.toBase58(),r.publicKey.toBase58(),p,s.metadata.pubkey,r.publicKey.toBase58(),l);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e,t,n,i,r,a,o){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,g.Z)(k().mark((function e(t,n,i,r,a,s,c){var u,l,d,p;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:if(a.masterEdition&&a.metadata){e.next=4;break}return e.abrupt("return");case 4:return u=[],l=[],e.next=8,(0,o.findProgramAddress)([i.publicKey.toBuffer(),(0,o.programIds)().token.toBuffer(),(0,o.toPublicKey)(a.metadata.info.mint).toBuffer()],(0,o.programIds)().associatedToken);case 8:return d=e.sent[0],e.next=11,t.getAccountInfo((0,o.toPublicKey)(d));case 11:return p=e.sent,console.log("Existing ata?",p),p||(0,o.createAssociatedTokenAccountInstruction)(u,(0,o.toPublicKey)(d),i.publicKey,i.publicKey,(0,o.toPublicKey)(a.metadata.info.mint)),e.next=16,(0,B.withdrawMasterEdition)(n.vault.pubkey,r.info.store,d,r.pubkey,n.vault.info.fractionMint,a.metadata.info.mint,u);case 16:c.push(u),s.push(l);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e,t,n,i,r,a,o,s,c){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,g.Z)(k().mark((function e(t,n,i,r,a,s,c,u,l){var d,p,f,m,h,x,b,y;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:if(s.masterEdition&&s.metadata){e.next=4;break}return e.abrupt("return");case 4:return d=s.metadata.info.updateAuthority,p=s.masterEdition,e.next=8,(0,o.deprecatedGetReservationList)(s.masterEdition.pubkey,t.auctionManager.pubkey);case 8:if(f=e.sent,m=n.get(p.info.printingMint),h=null===m||void 0===m?void 0:m.pubkey,!d){e.next=22;break}if(x=t.auctionManager.isItemClaimed(l,a.info.order),console.log("This state item is",x),x){e.next=22;break}return b=[],y=[],c.push(b),u.push(y),h||(h=(0,F.createTokenAccount)(y,r.publicKey,i,(0,o.toPublicKey)(p.info.printingMint),r.publicKey,b).toBase58()),e.next=22,(0,B.redeemBid)(t.auctionManager.vault,a.info.store,h,a.pubkey,t.vault.info.fractionMint,r.publicKey.toBase58(),r.publicKey.toBase58(),s.masterEdition.pubkey,f,!0,y,l);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e,t,n,i,r,a,o,s){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,g.Z)(k().mark((function e(t,n,i,r,a,s,c,u){var l,d,p;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:if(l=[],d=[],!r.auction.info.ended()||r.auction.info.state===o.AuctionState.Ended){e.next=7;break}return e.next=7,Re(t,n,i,r,a,0,d,l);case 7:return e.next=9,t.getMinimumBalanceForRentExemption(Z.AccountLayout.span);case 9:return p=e.sent,e.next=12,Be(r,a,p,n,l,d,t);case 12:if(!n.publicKey.equals((0,o.toPublicKey)(r.auctionManager.authority))||!r.auction.info.ended()){e.next=15;break}return e.next=15,ke(t,n,r,a,s,c,u,l,d);case 15:if(1!==d.length){e.next=20;break}return e.next=18,(0,o.sendTransactionWithRetry)(t,n,d[0],l[0],"single");case 18:e.next=22;break;case 20:return e.next=22,(0,o.sendTransactions)(t,n,d,l,o.SequenceType.StopOnFailure,"single");case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e,t,n,i,r,a,o){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,g.Z)(k().mark((function e(t,n,i,r,a,s,c){var u,l,d,p,f;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:if(u=[],l=[],d=[],p=n.get(t.auction.info.tokenMint),!o.cache.get(t.auction.info.tokenMint)||!t.myBidderPot){e.next=20;break}if(f="",t.auction.info.tokenMint!=o.WRAPPED_SOL_MINT.toBase58()){e.next=13;break}f=(0,o.ensureWrappedAccount)(l,d,p,r.publicKey,i,u),e.next=16;break;case 13:return e.next=15,De(t,r,c);case 15:f=e.sent;case 16:return e.next=18,(0,o.cancelBid)(r.publicKey.toBase58(),(0,o.pubkeyToString)(f),t.myBidderPot.info.bidderPot,t.auction.info.tokenMint,t.vault.pubkey,l);case 18:a.push(u),s.push([].concat(l,(0,v.Z)(d.reverse())));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e,t,n,i,r,a,o){return _e.apply(this,arguments)}function _e(){return(_e=(0,g.Z)(k().mark((function e(t,n,i,r,a,s,c){var u,l,d,p,f;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=[],l=[],e.next=4,Re(t,n,i,r,a,s,l,u);case 4:return d=e.sent,e.next=7,(0,o.sendTransactionWithRetry)(t,n,l[0],u[0],c);case 7:if(p=e.sent,f=p.txid,!c){e.next=12;break}return e.next=12,t.confirmTransaction(f,c);case 12:return e.abrupt("return",{amount:d});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(e,t,n,i,r,a,o,s){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,g.Z)(k().mark((function e(t,n,i,r,a,s,c,u){var l,d,p,f,m,h,x,b,y,g,j,w,N,P;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:return l=[],d=[],p=[],e.next=7,t.getMinimumBalanceForRentExemption(Z.AccountLayout.span);case 7:if(f=e.sent,m=i?o.cache.get(i):void 0,h=o.cache.get(m?m.info.mint:ne),x=f+("number"===typeof s?(0,o.toLamports)(s,h.info):s.toNumber()),!r.myBidderPot){e.next=20;break}if(b=null===(y=r.myBidderPot)||void 0===y?void 0:y.info.bidderPot,r.auction.info.ended()){e.next=20;break}return g=[],j=[],e.next=18,Be(r,a,f,n,g,j,t);case 18:l=[].concat((0,v.Z)(l),(0,v.Z)(g[0])),d=[].concat((0,v.Z)(j[0]),(0,v.Z)(d));case 20:if(w="",r.auction.info.tokenMint!=o.WRAPPED_SOL_MINT.toBase58()){e.next=25;break}w=(0,o.ensureWrappedAccount)(d,p,m,n.publicKey,x+2*f,l),e.next=28;break;case 25:return e.next=27,De(r,n,t);case 27:w=e.sent;case 28:return N=(0,W.approve)(d,p,(0,o.toPublicKey)(w),n.publicKey,x-f),l.push(N),P=new(_())(x-f),e.next=33,(0,o.placeBid)(n.publicKey.toBase58(),(0,o.pubkeyToString)(w),b,r.auction.info.tokenMint,N.publicKey.toBase58(),n.publicKey.toBase58(),r.auctionManager.vault,P,d);case 33:return c.push([].concat((0,v.Z)(d),(0,v.Z)(p.reverse()))),u.push(l),e.abrupt("return",P);case 36:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var De=function(){var e=(0,g.Z)(k().mark((function e(t,n,i){var r,a,s,c,u,l;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:return r="",a=(0,o.programIds)(),s=new R.PublicKey(t.auction.info.tokenMint),e.next=7,R.PublicKey.findProgramAddress([n.publicKey.toBuffer(),a.token.toBuffer(),s.toBuffer()],a.associatedToken);case 7:return c=e.sent[0],r=(0,o.pubkeyToString)(c),u=[],e.next=12,i.getAccountInfo(c);case 12:return l=e.sent,console.log("Looking for existing ata?",l),l||(0,o.createAssociatedTokenAccountInstruction)(u,(0,o.toPublicKey)(r),n.publicKey,n.publicKey,s),e.abrupt("return",r);case 16:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),We=10;function Le(e,t,n,i,r,a){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,g.Z)(k().mark((function e(t,n,i,r,a,s){var c,u;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.auction.info.ended()||i.auction.info.state===o.AuctionState.Ended){e.next=7;break}return c=[],u=[],e.next=5,Re(t,n,a,i,s,0,u,c);case 5:return e.next=7,(0,o.sendTransactionWithRetry)(t,n,u[0],c[0]);case 7:return e.next=9,qe(t,n,i,r);case 9:return e.next=11,Ue(t,n,i);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(e,t,n){return ze.apply(this,arguments)}function ze(){return(ze=(0,g.Z)(k().mark((function e(t,n,i){var r,a,s,c,u,l,d,p,f,m,h,x,b,y,g,j,w,N,P,S,M,T,A,Z;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:r=(0,o.programIds)(),a=[],s=[],c=[],u=[],l=[],d=[],p={},f=[].concat((0,v.Z)(i.items),(0,v.Z)(i.participationItem?[[i.participationItem]]:[])),m=0;case 12:if(!(m<f.length)){e.next=45;break}h=f[m],x=0;case 15:if(!(x<h.length)){e.next=42;break}b=h[x],y=b.metadata.info.data.creators,g=!(null===y||void 0===y||!y.map((function(e){return e.address})).find((function(e){return e===i.auctionManager.authority}))),j=[].concat((0,v.Z)(y?y.map((function(e){return e.address})):[]),[i.auctionManager.authority]),w=0;case 21:if(!(w<j.length)){e.next=39;break}return e.next=24,(0,o.findProgramAddress)([(0,o.toPublicKey)(j[w]).toBuffer(),r.token.toBuffer(),(0,o.toPublicKey)(i.auction.info.tokenMint).toBuffer()],r.associatedToken);case 24:return P=e.sent[0],e.next=27,t.getAccountInfo((0,o.toPublicKey)(P));case 27:return S=e.sent,console.log("Existing ata?",S),S||p[P]||(0,o.createAssociatedTokenAccountInstruction)(d,(0,o.toPublicKey)(P),n.publicKey,(0,o.toPublicKey)(j[w]),(0,o.toPublicKey)(i.auction.info.tokenMint)),p[P]=!0,M=y?y.map((function(e){return e.address})).indexOf(j[w]):null,e.next=34,(0,Q.C)(i.auctionManager.acceptPayment,P,i.auctionManager.pubkey,b.metadata.pubkey,null===(N=b.masterEdition)||void 0===N?void 0:N.pubkey,b.safetyDeposit.pubkey,b.safetyDeposit.info.vault,i.auction.pubkey,n.publicKey.toBase58(),j[w],b===i.participationItem?null:m,b===i.participationItem?null:x,-1===M||null===M||g&&w===j.length-1?null:M,d);case 34:d.length>=6&&(c.push(l),u.push(d),l=[],d=[]),u.length===We&&(a.push(c),s.push(u),c=[],u=[]);case 36:w++,e.next=21;break;case 39:x++,e.next=15;break;case 42:m++,e.next=12;break;case 45:d.length<6&&d.length>0&&(c.push(l),u.push(d)),u.length<=We&&u.length>0&&(a.push(c),s.push(u)),T=0;case 48:if(!(T<s.length)){e.next=61;break}if(A=s[T],Z=a[T],!(A.length>=2)){e.next=56;break}return e.next=54,(0,o.sendTransactions)(t,n,A,Z,o.SequenceType.StopOnFailure,"single");case 54:e.next=58;break;case 56:return e.next=58,(0,o.sendTransactionWithRetry)(t,n,A[0],Z[0],"single");case 58:T++,e.next=48;break;case 61:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(e,t,n,i){return He.apply(this,arguments)}function He(){return(He=(0,g.Z)(k().mark((function e(t,n,i,r){var a,s,c,u,l,d,p,f,m,h,x;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],s=[],c=[],u=[],l=[],d=[],p=0;case 7:if(!(p<r.length)){e.next=17;break}return f=r[p],console.log("Claiming",f.info.bidderAct),e.next=12,(0,X.G)(i.auctionManager.acceptPayment,f.info.bidderAct,f.info.bidderPot,i.vault.pubkey,i.auction.info.tokenMint,d);case 12:6===d.length&&(c.push(l),u.push(d),l=[],d=[]),u.length===We&&(a.push(c),s.push(u),c=[],u=[]);case 14:p++,e.next=7;break;case 17:d.length<6&&d.length>0&&(c.push(l),u.push(d)),u.length<=We&&u.length>0&&(a.push(c),s.push(u)),console.log("Instructions",s),m=0;case 21:if(!(m<s.length)){e.next=36;break}if(h=s[m],x=a[m],console.log("Running batch",m),!(h.length>=2)){e.next=30;break}return e.next=28,(0,o.sendTransactions)(t,n,h,x,o.SequenceType.StopOnFailure,"single");case 28:e.next=32;break;case 30:return e.next=32,(0,o.sendTransactionWithRetry)(t,n,h[0],x[0],"single");case 32:console.log("Done");case 33:m++,e.next=21;break;case 36:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(e,t,n){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,g.Z)(k().mark((function e(t,n,i){var r,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=[],a=[],e.next=5,(0,B.startAuction)(i.vault.pubkey,i.auctionManager.authority,a);case 5:return e.next=7,(0,o.sendTransactionWithRetry)(t,n,a,r);case 7:(0,o.notify)({message:"Auction started",type:"success"}),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),(0,o.notify)({message:"Transaction failed...",description:"Failed to start the auction",type:"error"}),e.abrupt("return",Promise.reject(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var Xe=n(44587),Qe=n(33666),Je=n(97403),$e=n(34406),et=i.createContext(null);function tt(e){var t=e.children,n=void 0===t?null:t,r=(0,i.useState)(null),a=r[0],o=r[1];$e.env.NEXT_SPL_TOKEN_MINTS?[Je.WRAPPED_SAFE_MINT].concat((0,v.Z)($e.env.NEXT_SPL_TOKEN_MINTS.split(","))):Je.WRAPPED_SAFE_MINT;(0,i.useEffect)((function(){(new Qe.TokenListProvider).resolve(Qe.Strategy.Static).then(o)}),[o]);var s=!!$e.env.NEXT_SPL_TOKEN_MINTS,u=a?a.filterByChainId(102).getList():[],l=(0,i.useMemo)((function(){var e=new Map;return u.forEach((function(t){e.set(t.address,t)})),e}),[a]),d=(0,i.useMemo)((function(){var e=u.filter((function(e){var t,n;return(null===(t=e.extensions)||void 0===t?void 0:t.serumV3Usdt)||(null===(n=e.extensions)||void 0===n?void 0:n.serumV3Usdc)}));return e.sort((function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0})),e}),[a,l]),p=(0,i.useMemo)((function(){var e=u.filter((function(e){var t;return null===(t=e.tags)||void 0===t?void 0:t.includes("wrapped-safecoin")}));return e.sort((function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0})),[e,new Map(e.map((function(e){return[e.address,e]})))]}),[a]),f=p[0],m=p[1],h=(0,i.useMemo)((function(){var e=u.filter((function(e){var t;return null===(t=e.tags)||void 0===t?void 0:t.includes("wormhole")}));return e.sort((function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0})),[e,new Map(e.map((function(e){return[e.address,e]})))]}),[a]),x=h[0],b=h[1];return(0,c.jsx)(et.Provider,{value:{mainnetTokens:u,tokenMap:l,wormholeMap:b,solletMap:m,swappableTokens:d,swappableTokensWormhole:x,swappableTokensSollet:f,hasOtherTokens:s},children:n})}var nt=function(){var e=(0,i.useContext)(et);return console.log("USE TOKEN - from source export ",e),e},it=n(34406),rt="".concat("https://api.coingecko.com/api/v3/","simple/price"),at=function(){var e=(0,g.Z)(k().mark((function e(){var t,n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(rt,"?ids=safe-coin-2&vs_currencies=usd"),e.next=3,window.fetch(t).then((function(e){return e.json()}));case 3:return n=e.sent,e.abrupt("return",n["safe-coin-2"].usd);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ot=function(){var e=(0,g.Z)(k().mark((function e(t){var n,i,r,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(it.env.NEXT_SPL_TOKEN_MINTS&&0!=it.env.NEXT_SPL_TOKEN_MINTS.length){e.next=2;break}return e.abrupt("return",0);case 2:return i=t?t.toLowerCase().split(" ").join("-"):it.env.NEXT_CG_SPL_TOKEN_ID||"",r="".concat(rt,"?ids=").concat(i,"&vs_currencies=usd"),e.next=6,window.fetch(r).then((function(e){return e.json()}));case 6:return a=e.sent,e.abrupt("return",null===(n=a[i])||void 0===n?void 0:n.usd);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),st=i.createContext(null);function ct(e){var t=e.children,n=void 0===t?null:t,r=(0,i.useState)(0),a=r[0],o=r[1],s=(0,i.useState)([]),u=s[0],l=s[1];nt().mainnetTokens;return(0,i.useEffect)((function(){var e=0,t=function(){var e=(0,g.Z)(k().mark((function e(){var t,i,r,a,s,c,u,d;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at();case 2:t=e.sent,o(t),i=it.env.NEXT_SPL_TOKEN_MINTS?it.env.NEXT_SPL_TOKEN_MINTS.split(","):[],r=it.env.NEXT_CG_SPL_TOKEN_IDS?it.env.NEXT_CG_SPL_TOKEN_IDS.split(","):[],a=[],s=0;case 8:if(!(s<i.length)){e.next=23;break}return e.prev=9,c=r[s],u=i[s],e.next=14,ot(c);case 14:d=e.sent,a[s]={tokenMint:u,tokenName:c,tokenPrice:d},e.next=20;break;case 18:e.prev=18,e.t0=e.catch(9);case 20:s++,e.next=8;break;case 23:l(a),n();case 25:case"end":return e.stop()}}),e,null,[[9,18]])})));return function(){return e.apply(this,arguments)}}(),n=function(){e=window.setTimeout((0,g.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t();case 1:case"end":return e.stop()}}),e)}))),6e4)};return t(),function(){clearTimeout(e)}}),[o,l]),(0,c.jsx)(st.Provider,{value:{solPrice:a,allSplPrices:u},children:n})}var ut,lt=function(){return(0,i.useContext)(st)},dt=function(){return lt().solPrice},pt=function(){return lt().allSplPrices};!function(e){e[e.Master=0]="Master",e[e.Print=1]="Print",e[e.NFT=2]="NFT"}(ut||(ut={}));var ft=n(12955),mt=n(97704);n(83742),n(48834).Buffer;function ht(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}function xt(){var e=(0,i.useState)(ht()),t=e[0],n=e[1];return(0,i.useEffect)((function(){function e(){n(ht())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),t}var bt,yt=new Map,vt=function(e,t){var n=(0,i.useState)(void 0),r=n[0],a=n[1],o=(0,i.useState)(!0),s=o[0],c=o[1];return(0,i.useEffect)((function(){if(e){var n=yt.get(e);n?a(n):(0,g.Z)(k().mark((function n(){var i,r,o;return k().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch(e,{cache:"force-cache"});case 3:return i=n.sent,n.next=6,i.blob();case 6:if(0!==(r=n.sent).size){n.next=9;break}throw new Error("No content");case 9:n.next=27;break;case 11:return n.prev=11,n.t0=n.catch(0),n.prev=13,n.next=16,fetch(e,{cache:"reload"});case 16:return i=n.sent,n.next=19,i.blob();case 19:r=n.sent,n.next=27;break;case 22:return n.prev=22,n.t1=n.catch(13),null!==e&&void 0!==e&&e.startsWith("http")&&a(e),c(!1),n.abrupt("return");case 27:if(0!==r.size){n.next=30;break}return c(!1),n.abrupt("return");case 30:if(!t){n.next=38;break}return ft.CtF.enabled=!0,n.t2=ft.CtF,n.t3=e,n.next=36,r.arrayBuffer();case 36:n.t4=n.sent,n.t2.add.call(n.t2,n.t3,n.t4);case 38:o=URL.createObjectURL(r),yt.set(e,o),a(o),c(!1);case 42:case"end":return n.stop()}}),n,null,[[0,11],[13,22]])})))()}}),[e,a,c]),{cachedBlob:r,isLoading:s}},gt=function(e){var t=(0,Xe.useMeta)(),n=t.metadata,r=t.editions,a=t.masterEditions,o=t.whitelistedCreatorsByCreator,s=(0,i.useMemo)((function(){return n.find((function(t){return t.pubkey===e}))}),[e,n]);return(0,i.useMemo)((function(){return function(e,t,n,i){var r=ut.NFT,a=void 0,o=void 0,s=void 0;if(e){var c=n[e.masterEdition||""],u=t[e.edition||""];if(u){var l,d=n[u.info.parent||""];d&&(r=ut.Print,a=u.info.edition.toNumber(),s=(null===(l=d.info)||void 0===l?void 0:l.supply.toNumber())||0)}else if(c){var p;r=ut.Master,o=null===(p=c.info.maxSupply)||void 0===p?void 0:p.toNumber(),s=c.info.supply.toNumber()}}return{uri:(null===e||void 0===e?void 0:e.data.uri)||"",mint:null===e||void 0===e?void 0:e.mint,title:null===e||void 0===e?void 0:e.data.name,creators:((null===e||void 0===e?void 0:e.data.creators)||[]).map((function(e){var t=i[e.address];return{address:e.address,verified:e.verified,share:e.share,image:(null===t||void 0===t?void 0:t.info.image)||"",name:(null===t||void 0===t?void 0:t.info.name)||"",link:(null===t||void 0===t?void 0:t.info.twitter)||""}})).sort((function(e,t){var n=(t.share||0)-(e.share||0);return 0===n?e.name.localeCompare(t.name):n})),seller_fee_basis_points:(null===e||void 0===e?void 0:e.data.sellerFeeBasisPoints)||0,edition:a,maxSupply:o,supply:s,type:r}}(null===s||void 0===s?void 0:s.info,r,a,o)}),[s,r,a,o])},jt=function(e){var t=(0,Xe.useMeta)().metadata,n=(0,i.useState)(),r=n[0],a=n[1],s=xt().width,c=(0,mt.YD)({root:null,rootMargin:"-100px 0px"}),u=c.ref,l=c.inView,d=(0,o.useLocalStorage)(),p=(0,o.pubkeyToString)(e),f=(0,i.useMemo)((function(){return t.find((function(e){return e.pubkey===p}))}),[p,t]);return(0,i.useEffect)((function(){if((l||s<768)&&e&&!r){if(f&&f.info.data.uri){var t=f.info.data.uri,n=function(e){var t,n;if(e&&0!==(null===e||void 0===e||null===(t=e.properties)||void 0===t||null===(n=t.files)||void 0===n?void 0:n.length)){if(null!==e&&void 0!==e&&e.image){var i=e.image.startsWith("http")?e.image:"".concat(f.info.data.uri,"/").concat(e.image);e.image=i}return e}};try{var i=d.getItem(t);i?a(n(JSON.parse(i))):fetch(t).then(function(){var e=(0,g.Z)(k().mark((function e(i){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.json();case 3:r=e.sent;try{d.setItem(t,JSON.stringify(r))}catch(o){}a(n(r)),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",void 0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(){}))}catch(o){console.error(o)}}}}),[l,e,r,a,f]),{ref:u,data:r}};function kt(){var e=(0,Xe.useMeta)(),t=e.auctions,n=e.auctionManagersByAuction;return(0,i.useMemo)((function(){return Object.values(n).map((function(e){return t[e.info.auction]})).filter(Boolean)}),[Object.keys(t).length,n])}function wt(){var e=(0,Xe.useMeta)().bidRedemptions,t=kt(),n=(0,b.useWallet)().publicKey,r=(0,i.useState)({}),a=r[0],s=r[1];return(0,i.useEffect)((function(){n&&(0,g.Z)(k().mark((function i(){var r;return k().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=Object.assign({},a),i.next=3,(0,o.createPipelineExecutor)(t.values(),function(){var t=(0,g.Z)(k().mark((function t(i){var o;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a[i.pubkey]){t.next=7;break}return t.next=3,(0,B.getBidderKeys)(i.pubkey,n.toBase58());case 3:o=t.sent,r[i.pubkey]=e[o.bidRedemption]?e[o.bidRedemption]:{pubkey:o.bidRedemption,info:null},t.next=8;break;case 7:a[i.pubkey].info||(r[i.pubkey]=e[a[i.pubkey].pubkey]||a[i.pubkey]);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{delay:1,sequence:2});case 3:Object.keys(r).length&&s(r);case 4:case"end":return i.stop()}}),i)})))()}),[t,e,n]),a}!function(e){e.Live="0",e.Upcoming="1",e.Ended="2",e.BuyNow="3",e.Defective="-1"}(bt||(bt={}));var Nt=function(e){var t=(0,i.useState)([]),n=t[0],r=t[1],a=(0,b.useWallet)().publicKey,o=wt(),s=kt(),c=(0,Xe.useMeta)(),u=c.auctionManagersByAuction,l=c.safetyDepositBoxesByVaultAndIndex,d=c.metadataByMint,p=c.bidderMetadataByAuctionAndBidder,f=c.bidderPotsByAuctionAndBidder,m=c.vaults,h=c.masterEditions,x=c.masterEditionsByPrintingMint,y=c.masterEditionsByOneTimeAuthMint,v=c.metadataByMasterEdition,g=c.safetyDepositConfigsByAuctionManagerAndIndex,j=c.bidRedemptionV2sByAuctionManagerAndWinningIndex,k=c.auctionDataExtended,w=c.metadataByAuction;return(0,i.useEffect)((function(){var t=[];s.map((function(n){var i=Mt(null===a||void 0===a?void 0:a.toBase58(),n,k,u,l,d,p,f,j,h,m,g,x,y,v,o,w,e);i&&t.push(i)})),r(t.sort(Pt))}),[e,s,k,u,l,d,p,f,j,m,g,h,x,y,v,a,o,w,r]),n};function Pt(e,t){var n,i;return((null===(n=t.auction.info.endedAt)||void 0===n?void 0:n.toNumber())||0)-((null===(i=e.auction.info.endedAt)||void 0===i?void 0:i.toNumber())||0)}function St(e,t){var n=[],i=e[t+"-0"];if(i){n.push(i);for(var r=1;i;)(i=e[t+"-"+r.toString()])&&n.push(i),r++}return n}function Mt(e,t,n,i,r,a,s,c,u,l,d,p,f,m,h,x,b,y){var v;v=t.info.ended()?bt.Ended:t.info.state===o.AuctionState.Started?bt.Live:t.info.state===o.AuctionState.Created?bt.Upcoming:bt.BuyNow;var g=i[t.pubkey||""];if((!y||y===bt.Defective||y===v)&&g){var j;if(y===bt.Defective&&g.info.state.status!==B.AuctionManagerStatus.Initialized)return;if(y!==bt.Defective&&g.info.state.status===B.AuctionManagerStatus.Initialized)return;var k,w,N=d[g.info.vault],P=g.pubkey,S=St(p,P),M=St(u,P),T=new B.AuctionManager({instance:g,auction:t,vault:N,safetyDepositConfigs:S,bidRedemptions:M}),A=g.info.key==B.MetaplexKey.AuctionManagerV2?g.info.auctionDataExtended:null,C=A?n[A]:null,Z=T.safetyDepositBoxesExpected.toNumber(),O=null!==(j=x[t.pubkey])&&void 0!==j&&j.info?x[t.pubkey]:void 0,E=s[t.pubkey+"-"+e],K=c[t.pubkey+"-"+e],I=St(r,T.vault),R=void 0,F=void 0,D=void 0;if(null!==T.participationConfig&&void 0!==T.participationConfig&&I.length>0)(R=h[null===(w=m[(F=I[null===(k=T.participationConfig)||void 0===k?void 0:k.safetyDepositBoxIndex]).info.tokenMint])||void 0===w?void 0:w.pubkey]||a[F.info.tokenMint])&&(D=m[F.info.tokenMint]||R.info.masterEdition&&l[R.info.masterEdition]);var W={auction:t,auctionManager:T,state:v,vault:N,auctionDataExtended:C||void 0,safetyDepositBoxes:I,items:T.getItemsFromSafetyDepositBoxes(a,f,h,l,I),participationItem:R&&F?{metadata:R,safetyDeposit:F,masterEdition:D,amount:new(_())(1),winningConfigType:B.WinningConfigType.Participation}:void 0,myBidderMetadata:E,myBidderPot:K,myBidRedemption:O};if(W.thumbnail=((W.items||[])[0]||[])[0]||W.participationItem||(b[t.pubkey]?{metadata:b[t.pubkey][0]}:null),W.isInstantSale=function(e,t){return!!(null!==e&&void 0!==e&&e.info.instantSalePrice&&t.info.priceFloor.minPrice&&null!==e&&void 0!==e&&e.info.instantSalePrice.eq(t.info.priceFloor.minPrice))}(C,t),W.totallyComplete=!!(W.thumbnail&&Z===(W.items||[]).length+(null===T.participationConfig||void 0===T.participationConfig?0:1)&&(null===T.participationConfig||void 0===T.participationConfig||null!==T.participationConfig&&W.participationItem)&&W.vault),(!W.thumbnail||!W.thumbnail.metadata)&&y!=bt.Defective)return;return W}}var Tt=function(){var e=(0,Xe.useMeta)(),t=e.metadata,n=e.masterEditions,i=e.editions,r=(0,o.useUserAccounts)().accountByMint,a=t.filter((function(e){var t,n,i;return r.has(e.info.mint)&&((null===r||void 0===r||null===(t=r.get(e.info.mint))||void 0===t||null===(n=t.info)||void 0===n||null===(i=n.amount)||void 0===i?void 0:i.toNumber())||0)>0})),s=a.map((function(e){return e.info.edition?i[e.info.edition]:void 0})),c=a.map((function(e){return e.info.masterEdition?n[e.info.masterEdition]:void 0})),u=[],l=0;return a.forEach((function(e){var t,n,i,a=r.get(e.info.mint),d=c[l];((null===d||void 0===d?void 0:d.info.key)==o.MetadataKey.MasterEditionV1&&(t=r.get((null===d||void 0===d?void 0:d.info.printingMint)||"")),n=(null===d||void 0===d?void 0:d.info.key)==o.MetadataKey.MasterEditionV1?B.WinningConfigType.PrintingV1:(null===d||void 0===d?void 0:d.info.key)==o.MetadataKey.MasterEditionV2?d.info.maxSupply?B.WinningConfigType.PrintingV2:B.WinningConfigType.Participation:B.WinningConfigType.TokenOnlyTransfer,a)&&u.push({holding:a.pubkey,edition:s[l],masterEdition:d,metadata:e,printingMintHolding:null===(i=t)||void 0===i?void 0:i.pubkey,winningConfigType:n,amountRanges:[],participationConfig:n==B.WinningConfigType.Participation?new B.ParticipationConfigV2({winnerConstraint:B.WinningConstraint.ParticipationPrizeGiven,nonWinningConstraint:B.NonWinningConstraint.GivenForFixedPrice,fixedPrice:new(_())(0)}):void 0});l++})),u},At=function(e){var t=(0,b.useWallet)().publicKey,n=wt(),r=(0,i.useState)(void 0),a=r[0],o=r[1],s=null===t||void 0===t?void 0:t.toBase58(),c=(0,Xe.useMeta)(),u=c.auctions,l=c.auctionManagersByAuction,d=c.safetyDepositBoxesByVaultAndIndex,p=c.metadataByMint,f=c.bidderMetadataByAuctionAndBidder,m=c.bidderPotsByAuctionAndBidder,h=c.masterEditions,x=c.vaults,y=c.safetyDepositConfigsByAuctionManagerAndIndex,v=c.masterEditionsByOneTimeAuthMint,g=c.masterEditionsByPrintingMint,j=c.metadataByMasterEdition,k=c.bidRedemptionV2sByAuctionManagerAndWinningIndex,w=c.auctionDataExtended,N=c.metadataByAuction,P=c.isLoading;return(0,i.useEffect)((function(){var t=u[e];if(!P&&t){var i=Mt(s,t,w,l,d,p,f,m,k,h,x,y,g,v,j,n,N,void 0);i&&o(i)}}),[u,s,l,d,p,f,m,k,x,y,h,g,v,j,n,N,P]),a},Ct=function(e){var t=(0,i.useMemo)((function(){return"string"===typeof e?""!==e?e:void 0:e}),[e]),n=(0,o.useMeta)().bidderMetadataByAuctionAndBidder,r=(0,i.useState)([]),a=r[0],s=r[1];return(0,i.useEffect)((function(){var e=o.cache.emitter.onCache((function(e){e.parser===o.BidderMetadataParser&&s(Zt(n,t))}));return s(Zt(n,t)),function(){e()}}),[t]),a},Zt=function(e,t){return(o.USE_SPEED_RUN?Object.values(e).filter((function(e){return e.info.auctionPubkey===t})):o.cache.byParser(o.BidderMetadataParser).filter((function(e){var n=o.cache.get(e);return!!n&&t===n.info.auctionPubkey})).map((function(e){return o.cache.get(e)}))).sort((function(e,t){var n=t.info.lastBid.sub(e.info.lastBid).toNumber();return 0===n?e.info.lastBidTimestamp.sub(t.info.lastBidTimestamp).toNumber():n})).map((function(e){return e}))};function Ot(e,t){var n,r=(0,i.useMemo)((function(){return e}),[e]),a=(0,o.useUserAccounts)().userAccounts,s=(0,i.useState)(0),c=s[0],u=s[1],l=dt(),d=null===(n=pt().filter((function(t){return t.tokenMint==e}))[0])||void 0===n?void 0:n.tokenPrice,p=e==o.WRAPPED_SOL_MINT.toBase58()?l:d,f=(0,o.useMint)(r),m=(0,i.useMemo)((function(){return a.filter((function(e){return r===e.info.mint.toBase58()&&(!t||t===e.pubkey)})).sort((function(e,t){return t.info.amount.sub(e.info.amount).toNumber()}))}),[a,r,t]),h=(0,i.useMemo)((function(){return m.reduce((function(e,t){return e+t.info.amount.toNumber()}),0)}),[m]),x=(0,i.useMemo)((function(){return(0,o.fromLamports)(h,f)}),[f,h]);return(0,i.useEffect)((function(){u(x*p)}),[x,p,r,u]),{balance:x,balanceLamports:h,balanceInUSD:c,accounts:m,hasBalance:m.length>0&&x>0}}var Et,Bt=function(e){return(0,Xe.useMeta)().metadata.filter((function(t){var n;return null===(n=t.info.data.creators)||void 0===n?void 0:n.some((function(t){return t.address===e}))}))},Kt=n(29566),It=function(e){var t=(0,Xe.useMeta)().whitelistedCreatorsByCreator;return(0,i.useMemo)((function(){var n;return(0,v.Z)(([].concat((0,v.Z)(((null===e||void 0===e?void 0:e.items)||[]).flat().map((function(e){return null===e||void 0===e?void 0:e.metadata}))),[null===e||void 0===e||null===(n=e.thumbnail)||void 0===n?void 0:n.metadata]).filter((function(e){return e&&e.info})).map((function(e){return(null===e||void 0===e?void 0:e.info.data.creators)||[]})).flat()||[]).filter((function(e){return e.verified})).reduce((function(e,t){return e.set(t.address,t.share),e}),new Map).entries()).map((function(e){var n=(0,Kt.Z)(e,2),i=n[0],r=n[1],a=t[i];return{address:i,verified:!0,share:r,image:(null===a||void 0===a?void 0:a.info.image)||"",name:(null===a||void 0===a?void 0:a.info.name)||"",link:(null===a||void 0===a?void 0:a.info.twitter)||""}}))}),[e,t])};function _t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ft(e){var t=e.id,n=e.action,r=e.onFinish,a=e.icon,o=(0,i.useState)(Et.NotRunning),s=o[0],u=o[1];(0,i.useMemo)((function(){return u(Et.NotRunning)}),[t]);var l,d=function(){var e=(0,g.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(Et.Running);case 2:return e.next=4,n();case 4:if(!e.sent){e.next=11;break}return e.next=8,u(Et.Success);case 8:setTimeout((function(){return r?r():null}),2e3),e.next=13;break;case 11:return e.next=13,u(Et.Failed);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();switch(s){case Et.NotRunning:l=(0,c.jsx)("span",{className:"hover-button",onClick:d,children:a});break;case Et.Failed:l=(0,c.jsx)("span",{className:"hover-button",onClick:d,children:(0,c.jsx)(w.Z,{})});break;case Et.Running:l=(0,c.jsx)(N.Z,{});break;case Et.Success:l=(0,c.jsx)(P.Z,{twoToneColor:"#52c41a"})}return l}function Dt(e){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,g.Z)(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,o.programIds)(),null!==t&&void 0!==t&&t.publicKey){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,o.findProgramAddress)([t.publicKey.toBuffer(),n.token.toBuffer(),ne.toBuffer()],n.associatedToken);case 5:return e.abrupt("return",e.sent[0]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e[e.NotRunning=0]="NotRunning",e[e.Running=1]="Running",e[e.Success=2]="Success",e[e.Failed=3]="Failed"}(Et||(Et={}));var Lt={};function Vt(){var e,t=(0,Xe.useMeta)(),n=t.metadata,a=t.whitelistedCreatorsByCreator,s=t.store,u=t.vaults,l=t.safetyDepositBoxesByVaultAndIndex,d=t.pullAllSiteData,p=Nt(bt.Defective),f=Nt(bt.Upcoming),m=(0,o.useConnection)(),h=(0,b.useWallet)(),x=((0,o.useUserAccounts)().accountByMint,[]),j=(null===(e=h.publicKey)||void 0===e?void 0:e.toBase58())||"";!function(e){var t=e.connection,n=e.wallet,r=e.notifications,a=(0,i.useState)(!1),s=a[0],c=a[1],u=function(){var e=(0,g.Z)(k().mark((function e(){var i,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dt(n);case 2:if(!(i=e.sent)){e.next=13;break}return e.prev=4,e.next=7,t.getTokenAccountBalance((0,o.toPublicKey)(i));case 7:(r=e.sent)&&r.value.uiAmount&&c(!0),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(4);case 13:setTimeout(u,6e4);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){u()}),[]),s&&r.push({id:"unsettled",title:"Unsettled funds!",description:"You have unsettled royalties in your personal escrow account.",action:function(){var e=(0,g.Z)(k().mark((function e(){var i,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dt(n);case 3:if(!(i=e.sent)){e.next=11;break}return e.next=7,t.getAccountInfo((0,o.toPublicKey)(i));case 7:if(null===(r=e.sent)||void 0===r||!r.data.length){e.next=11;break}return e.next=11,O(t,n,i);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 17:return e.abrupt("return",!0);case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()})}({connection:m,wallet:h,notifications:x}),function(e){var t,n=e.connection,a=e.wallet,s=e.notifications,u=(0,o.useUserAccounts)().accountByMint,l=null===a||void 0===a||null===(t=a.publicKey)||void 0===t?void 0:t.toBase58(),d=(0,Xe.useMeta)(),p=d.bidderPotsByAuctionAndBidder,f=d.pullAuctionPage,m=[].concat((0,v.Z)(Nt(bt.Ended)),(0,v.Z)(Nt(bt.BuyNow))),h=(0,i.useState)({}),x=h[0],b=h[1];(0,i.useMemo)((function(){!function(){var e=(0,g.Z)(k().mark((function e(){var t,i,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=m.filter((function(e){var t=e.isInstantSale&&e.items.length===e.auction.info.bidState.bids.length;return l&&e.auctionManager.authority===l&&(e.auction.info.ended()||t)})).sort((function(e,t){var n,i;return((null===(n=t.auction.info.endedAt)||void 0===n?void 0:n.toNumber())||0)-((null===(i=e.auction.info.endedAt)||void 0===i?void 0:i.toNumber())||0)})),i=k().mark((function e(i){var r,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t[i],Lt[r.auctionManager.pubkey]){e.next=13;break}return Lt[r.auctionManager.pubkey]=!0,e.prev=3,e.next=6,n.getTokenAccountBalance((0,o.toPublicKey)(r.auctionManager.acceptPayment));case 6:(0===((a=e.sent).value.uiAmount||0)&&r.auction.info.bidState.bids.map((function(e){return e.amount.toNumber()})).reduce((function(e,t){return e+t}),0)>0||(a.value.uiAmount||0)>1e-5)&&b((function(e){return Rt(Rt({},e),{},(0,y.Z)({},r.auctionManager.pubkey,a.value.uiAmount||0))})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})),r=0;case 3:if(!(r<t.length)){e.next=8;break}return e.delegateYield(i(r),"t0",5);case 5:r++,e.next=3;break;case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[m.length,l]),Object.keys(x).forEach((function(e){var t=m.find((function(t){return t.auctionManager.pubkey===e}));if(t){var i=(0,v.Z)(t.auction.info.bidState.bids).reverse().slice(0,t.auctionManager.numWinners.toNumber()).reduce((function(e,t){return e[t.key]=!0,e}),{}),l=u.get(t.auction.info.tokenMint),d=t.auction.pubkey,h=Object.values(p).filter((function(e){return i[e.info.bidderAct]&&!e.info.emptied&&e.info.auctionAct===d}));(h.length||x[e]>0)&&s.push({id:e,title:"You have an ended auction that needs settling!",description:(0,c.jsxs)("span",{children:["One of your auctions ended and it has monies that can be claimed. For more detail,"," ",(0,c.jsx)(r.Link,{to:"/auction/".concat(d,"/billing"),children:"click here."})]}),action:function(){var e=(0,g.Z)(k().mark((function e(){var i,r,s,c,d,p,m,x,b,y,v,g,j,w,N,P,S;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f(t.auction.pubkey);case 3:if(i=e.sent,r=i.auctionDataExtended,s=i.auctionManagersByAuction,c=i.safetyDepositBoxesByVaultAndIndex,d=i.metadataByMint,p=i.bidderMetadataByAuctionAndBidder,m=i.bidderPotsByAuctionAndBidder,x=i.bidRedemptionV2sByAuctionManagerAndWinningIndex,b=i.masterEditions,y=i.vaults,v=i.safetyDepositConfigsByAuctionManagerAndIndex,g=i.masterEditionsByPrintingMint,j=i.masterEditionsByOneTimeAuthMint,w=i.metadataByMasterEdition,N=i.metadataByAuction,!(P=Mt(t.auction.pubkey,t.auction,r,s,c,d,p,m,x,b,y,v,g,j,w,{},N,void 0))){e.next=29;break}return e.next=22,Le(n,a,P,h,null===l||void 0===l?void 0:l.pubkey,u);case 22:if(!a.publicKey||t.auction.info.tokenMint!=o.WRAPPED_SOL_MINT.toBase58()){e.next=29;break}return e.next=25,Dt(a);case 25:if(!(S=e.sent)){e.next=29;break}return e.next=29,O(n,a,S);case 29:e.next=35;break;case 31:return e.prev=31,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 35:return e.abrupt("return",!0);case 36:case"end":return e.stop()}}),e,null,[[0,31]])})));return function(){return e.apply(this,arguments)}}()})}}))}({connection:m,wallet:h,notifications:x}),(0,i.useMemo)((function(){return Object.values(u).filter((function(e){return e.info.authority===j&&e.info.state!==o.VaultState.Deactivated&&e.info.tokenTypeCount>0}))}),[u,j]).forEach((function(e){x.push({id:e.pubkey,title:"You have items locked in a defective auction!",description:(0,c.jsx)("span",{children:"During an auction creation process that probably had some issues, you lost an item. Reclaim it now."}),action:function(){var t=(0,g.Z)(k().mark((function t(){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,U(m,h,e,l);case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return",!1);case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}()})})),x.push({id:"none",title:"Search for other auctions.",description:(0,c.jsx)("span",{children:"Load all auctions (including defectives) by pressing here. Then you can close them."}),action:function(){var e=(0,g.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d();case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}),p.filter((function(e){return e.auctionManager.authority===j})).forEach((function(e){x.push({id:e.auctionManager.pubkey,title:"You have items locked in a defective auction!",description:(0,c.jsx)("span",{children:"During an auction creation process that probably had some issues, you lost an item. Reclaim it now."}),action:function(){var t=(0,g.Z)(k().mark((function t(){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q(m,h,e,l);case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return",!1);case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}()})})),(0,i.useMemo)((function(){return n.filter((function(e){var t,n;return e.info.data.creators&&((null===(t=a[e.info.updateAuthority])||void 0===t||null===(n=t.info)||void 0===n?void 0:n.activated)||(null===s||void 0===s?void 0:s.info.public))&&e.info.data.creators.find((function(e){return e.address===j&&!e.verified}))}))}),[n,a,j]).forEach((function(e){var t,n;x.push({id:e.pubkey,title:"You have a new artwork to approve!",description:(0,c.jsxs)("span",{children:[(null===(t=a[e.info.updateAuthority])||void 0===t||null===(n=t.info)||void 0===n?void 0:n.name)||e.pubkey," ","wants you to approve that you helped create their art"," ",(0,c.jsx)(r.Link,{to:"/art/".concat(e.pubkey),children:"here."})]}),action:function(){var t=(0,g.Z)(k().mark((function t(){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G(m,h,e.pubkey);case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return",!1);case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}()})})),f.filter((function(e){return e.auctionManager.authority===j})).forEach((function(e){x.push({id:e.auctionManager.pubkey,title:"You have an auction which is not started yet!",description:(0,c.jsx)("span",{children:"You can activate it now if you wish."}),action:function(){var t=(0,g.Z)(k().mark((function t(){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ge(m,h,e);case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return",!1);case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(){return t.apply(this,arguments)}}()})}));var w=x.length?(0,c.jsx)("div",{style:{width:"300px",color:"white"},className:"notifications-container",children:(0,c.jsx)(M.ZP,{itemLayout:"vertical",size:"small",dataSource:x.slice(0,10),renderItem:function(e){return(0,c.jsx)(M.ZP.Item,{extra:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Ft,{id:e.id,action:e.action,icon:(0,c.jsx)(S.Z,{})}),e.dismiss&&(0,c.jsx)(Ft,{id:e.id,action:e.dismiss,icon:(0,c.jsx)(S.Z,{})})]}),children:(0,c.jsx)(M.ZP.Item.Meta,{title:(0,c.jsx)("span",{children:e.title}),description:(0,c.jsx)("span",{children:(0,c.jsx)("i",{children:e.description})})})})}})}):(0,c.jsx)("span",{children:"No notifications"}),N=(0,c.jsxs)(T.Z,{placement:"bottomLeft",content:w,trigger:"click",children:[(0,c.jsx)("img",{src:"/bell.svg",style:{cursor:"pointer"}}),!!x.length&&(0,c.jsx)("div",{className:"mobile-notification",children:x.length-1})]});return 0===x.length?N:(0,c.jsx)(A.Z,{count:x.length-1,style:{backgroundColor:"white",color:"black"},children:N})}var Ut=n(58403),zt=n(24419),qt=n(3306),Ht=n(3086),Gt=n(59039),Yt=function(e){var t=e.title,n=void 0===t?"":t,i=e.description,r=void 0===i?"":i,a=e.endElement,o=void 0===a?(0,c.jsx)("div",{className:"line"}):a,s=e.imgSrc,u=void 0===s?"":s;return(0,c.jsxs)(zt.Z,{cover:(0,c.jsx)("div",{className:"card-cover",children:u?(0,c.jsx)("img",{src:u}):(0,c.jsx)(Gt.Z,{style:{color:"rgba(179, 136, 245, 1)",fontSize:18}})}),children:[(0,c.jsx)("div",{className:"body-title",children:n}),(0,c.jsx)("div",{className:"body-content",children:r}),o]})},Xt=function(e){var t=e.children;return(0,c.jsx)("div",{className:"site-card-wrapper",children:(0,c.jsxs)(qt.Z,{gutter:16,children:[(0,c.jsxs)(Ht.Z,{span:24,xl:8,children:[t[0]," "]}),(0,c.jsx)(Ht.Z,{span:24,xl:8,children:t[1]}),(0,c.jsx)(Ht.Z,{span:24,xl:8,children:t[2]})]})})},Qt=function(e){var t=e.buttonClassName,n=e.buttonText,r=e.modalTitle,a=e.cardProps,o=e.onClick,s=(0,i.useState)(!1),u=s[0],l=s[1];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(m.Z,{className:t,onClick:function(){o&&o(),l(!0)},children:n}),(0,c.jsx)(h.Z,{title:r,visible:u,onOk:function(){l(!1)},onCancel:function(){l(!1)},footer:null,className:"modal-box instructions-modal",closeIcon:(0,c.jsx)("img",{src:"/modals/close.svg"}),children:(0,c.jsxs)(Xt,{children:[(0,c.jsx)(Yt,{title:a[0].title,description:a[0].description,imgSrc:a[0].imgSrc,endElement:a[0].endElement}),(0,c.jsx)(Yt,{title:a[1].title,description:a[1].description,imgSrc:a[1].imgSrc,endElement:a[1].endElement}),(0,c.jsx)(Yt,{title:a[2].title,description:a[2].description,imgSrc:a[2].imgSrc,endElement:a[2].endElement})]})})]})},Jt=function(e){var t=e.buttonClassName,n=e.onClick;return(0,c.jsx)(Qt,{buttonClassName:t,buttonText:"How to Buy",modalTitle:"Buying NFTs on ".concat(te),cardProps:[{title:"Create a SAFE wallet",imgSrc:"/modals/how-to-buy-1.svg",description:"SAFE is the cryptocurrency we use for purchases on ".concat(te,". To keep your SAFE safe, you\u2019ll need a crypto wallet\u2014we recommend using one called SAFE Wallet. Just head to Safecoin's site.")},{title:"Add funds to your wallet",imgSrc:"/modals/how-to-buy-2.svg",description:"To fund your wallet, you\u2019ll need to purchase SAFE. The easiest way is to get safecoins is at safeTrade"},{title:"Connect your wallet to ".concat(te,"."),imgSrc:"/modals/how-to-buy-3.jpg",description:"To connect your wallet, tap \u201cConnect Wallet\u201d here on the site. Select the Safecoin option, and your wallet will connect. After that, you can start bidding on NFTs.",endElement:(0,c.jsx)(o.ConnectButton,{className:"secondary-btn"})}],onClick:n})},$t=n(51747);function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nn=function(e){var t=e.iconSize,n=void 0===t?24:t,i=e.iconFile,r=void 0===i?void 0:i,a=e.style,o=void 0===a?{}:a,s=r||"/unknown_token.png";return(0,c.jsx)("span",{style:tn({background:"rgba(255, 255, 255, 0.05)",borderRadius:"50%",height:n,width:n,display:"inline-flex",overflow:"hidden"},o),children:(0,c.jsx)("img",{src:s})})},rn={border:"none",height:40},an=function(e){var t=(0,b.useWallet)(),n=(t.wallet,t.publicKey),a=(0,Xe.useMeta)(),o=a.whitelistedCreatorsByCreator,s=a.store,u=(null===n||void 0===n?void 0:n.toBase58())||"",l=(0,i.useMemo)((function(){var e,t,n;return(null===s||void 0===s||null===(e=s.info)||void 0===e?void 0:e.public)||(null===(t=o[u])||void 0===t||null===(n=t.info)||void 0===n?void 0:n.activated)}),[u,o,s]);return(0,c.jsx)(c.Fragment,{children:s&&(e.mobile?(0,c.jsxs)("div",{className:"actions-buttons actions-user",children:[l&&(0,c.jsx)(r.Link,{to:"/art/create",children:(0,c.jsx)(m.Z,{onClick:function(){e.onClick&&e.onClick()},className:"black-btn",children:"Create"})}),(0,c.jsx)(r.Link,{to:"/auction/create/0",children:(0,c.jsx)(m.Z,{onClick:function(){e.onClick&&e.onClick()},className:"black-btn",children:"Sell"})})]}):(0,c.jsxs)("div",{style:{display:"flex"},children:[l&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.Link,{to:"/art/create",style:{width:"100%"},children:(0,c.jsx)(m.Z,{className:"metaplex-button-default",style:rn,children:"Create"})}),"\xa0\xa0"]}),(0,c.jsx)(r.Link,{to:"/auction/create/0",style:{width:"100%"},children:(0,c.jsx)(m.Z,{className:"metaplex-button-default",style:rn,children:"Sell"})})]}))})},on=function(e){return(0,c.jsx)(o.MetaplexModal,{visible:e.showAddFundsModal,onCancel:function(){return e.setShowAddFundsModal(!1)},title:"Add Funds",bodyStyle:{alignItems:"start"},children:(0,c.jsxs)("div",{style:{maxWidth:"100%"},children:[(0,c.jsx)("p",{style:{color:"white"},children:"To add funds please make your way over to SafeTrade"}),(0,c.jsxs)("div",{style:{width:"100%",background:"#242424",borderRadius:12,marginBottom:10,height:50,display:"flex",alignItems:"center",padding:"0 10px",justifyContent:"space-between",fontWeight:700},children:[(0,c.jsx)("span",{style:{color:"rgba(255, 255, 255, 0.5)"},children:"Balance"}),(0,c.jsxs)("span",{children:[o.formatNumber.format(e.balance),"\xa0\xa0",(0,c.jsx)("span",{style:{borderRadius:"50%",background:"black",display:"inline-block",padding:"1px 4px 4px 4px",lineHeight:1},children:(0,c.jsx)("img",{src:"/Safecoin.svg",width:"10"})})," ","Safe"]})]}),(0,c.jsx)(m.Z,{onClick:function(){return e.setShowAddFundsModal(!1)},style:{background:"#454545",borderRadius:14,width:"30%",padding:10,height:"auto"},children:"Close"})]})})},sn=function(e){var t=(0,b.useWallet)(),n=t.wallet,r=t.publicKey,a=t.disconnect,s=(0,o.useNativeAccount)().account,u=dt(),l=(0,i.useState)(!1),d=l[0],p=l[1];if(!n||!r)return null;var f=((null===s||void 0===s?void 0:s.lamports)||0)/R.LAMPORTS_PER_SAFE,h=f*u,x=nt().tokenMap.get("Safe111111111111111111111111111111111111111"),y={display:"flex",width:e.iconSize,borderRadius:50},v=e.showAddress?(0,o.shortenAddress)("".concat(r)):"",g=n;g.name&&!e.showAddress&&(v=g.name);var j=(0,c.jsx)(o.Identicon,{address:null===r||void 0===r?void 0:r.toBase58(),style:y});return g.image&&(j=(0,c.jsx)("img",{src:g.image,style:y})),(0,c.jsxs)("div",{className:"wallet-wrapper",children:[e.showBalance&&(0,c.jsxs)("span",{children:[o.formatNumber.format(((null===s||void 0===s?void 0:s.lamports)||0)/R.LAMPORTS_PER_SAFE)," SOL"]}),(0,c.jsx)(T.Z,{trigger:"click",placement:"bottomRight",content:(0,c.jsx)(o.Settings,{additionalSettings:(0,c.jsxs)("div",{style:{width:250},children:[(0,c.jsx)("h5",{style:{color:"rgba(255, 255, 255, 0.7)",letterSpacing:"0.02em"},children:"BALANCE"}),(0,c.jsxs)("div",{style:{marginBottom:10},children:[(0,c.jsx)(nn,{iconFile:x?x.logoURI:""}),"\xa0",(0,c.jsxs)("span",{style:{fontWeight:600,color:"#FFFFFF"},children:[o.formatNumber.format(f)," SAFEE"]}),"\xa0",(0,c.jsx)("span",{style:{color:"rgba(255, 255, 255, 0.5)"},children:o.formatUSD.format(h)}),"\xa0"]}),(0,c.jsxs)("div",{style:{display:"flex",marginBottom:10},children:[(0,c.jsx)(m.Z,{className:"metaplex-button-default",onClick:function(){return p(!0)},style:rn,children:"Add Funds"}),"\xa0\xa0",(0,c.jsx)(m.Z,{className:"metaplex-button-default",onClick:a,style:rn,children:"Disconnect"})]}),(0,c.jsx)(an,{})]})}),children:(0,c.jsxs)(m.Z,{className:"wallet-key",children:[j,v&&(0,c.jsx)("span",{style:{marginLeft:"0.5rem",fontWeight:600},children:v})]})}),(0,c.jsx)(on,{setShowAddFundsModal:p,showAddFundsModal:d,publicKey:r,balance:f})]})},cn=function(){var e=(0,o.useConnectionConfig)().endpoint,t=(0,o.useQuerySearch)(),n=(0,o.useWalletModal)().setVisible,r=(0,i.useCallback)((function(){return n(!0)}),[n]);return(0,c.jsx)("div",{className:"wallet-wrapper",children:(0,c.jsx)(T.Z,{trigger:"click",placement:"bottomRight",content:(0,c.jsxs)("div",{style:{width:250},children:[(0,c.jsx)("h5",{style:{color:"rgba(255, 255, 255, 0.7)",letterSpacing:"0.02em"},children:"NETWORK"}),(0,c.jsx)($t.Z,{onSelect:function(e){var n=window.location.hash;t.set("network",e);var i="".concat(n.split("?")[0],"?").concat(t.toString());window.location.hash=i,window.location.reload()},value:e.name,bordered:!1,style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:8,width:"100%",marginBottom:10},children:o.ENDPOINTS.map((function(t){var n=t.name;return(0,c.jsx)($t.Z.Option,{value:n,children:n},e.name)}))}),(0,c.jsx)(m.Z,{className:"metaplex-button-default",style:rn,onClick:r,children:"Change wallet"})]}),children:(0,c.jsx)(m.Z,{className:"wallet-key",children:(0,c.jsx)("img",{src:"/cog.svg"})})})})},un=function(e){var t=(0,b.useWallet)(),n=t.wallet,r=t.publicKey,a=t.disconnect,s=(0,o.useNativeAccount)().account,u=dt(),l=(0,i.useState)(!1),d=l[0],p=l[1];if(!n||!r)return null;var f=((null===s||void 0===s?void 0:s.lamports)||0)/R.LAMPORTS_PER_SAFE,h=f*u,x={display:"flex",width:e.iconSize,borderRadius:50},y=e.showAddress?(0,o.shortenAddress)("".concat(r)):"",v=n;v.name&&!e.showAddress&&(y=v.name);var g=(0,c.jsx)(o.Identicon,{address:null===r||void 0===r?void 0:r.toBase58(),style:x});return v.image&&(g=(0,c.jsx)("img",{src:v.image,style:x})),(0,c.jsxs)("div",{className:"current-user-mobile-badge",children:[(0,c.jsxs)("div",{className:"mobile-badge",children:[g,y&&(0,c.jsx)("span",{style:{marginLeft:"0.5rem",fontWeight:600},children:y})]}),(0,c.jsxs)("div",{className:"balance-container",children:[(0,c.jsx)("span",{className:"balance-title",children:"Balance"}),(0,c.jsxs)("span",{children:[(0,c.jsx)("span",{className:"sol-img-wrapper",children:(0,c.jsx)("img",{src:"/Safecoin.svg",width:"10"})})," ",o.formatNumber.format(f),"\xa0\xa0 Safe"," ",(0,c.jsx)("span",{style:{marginLeft:5,fontWeight:"normal",color:"rgba(255, 255, 255, 0.5)"},children:o.formatUSD.format(h)})]})]}),(0,c.jsxs)("div",{className:"actions-buttons",children:[(0,c.jsx)(m.Z,{className:"secondary-btn",onClick:function(){e.closeModal&&e.closeModal(),p(!0)},children:"Add Funds"}),"\xa0\xa0",(0,c.jsx)(m.Z,{className:"black-btn",onClick:a,children:"Disconnect"})]}),(0,c.jsx)("div",{className:"actions-buttons",children:(0,c.jsx)(an,{mobile:!0,onClick:function(){e.closeModal&&e.closeModal()}})}),(0,c.jsx)(on,{setShowAddFundsModal:p,showAddFundsModal:d,publicKey:r,balance:f})]})},ln=function(){var e=(0,b.useWallet)().connected;return(0,c.jsxs)("div",{id:"mobile-navbar",children:[(0,c.jsx)(mn,{}),(0,c.jsxs)("div",{className:"mobile-menu",children:[e&&(0,c.jsx)(Vt,{}),(0,c.jsx)(fn,{})]})]})},dn=function(e){return[(0,c.jsx)(r.Link,{to:"/",children:(0,c.jsx)(m.Z,{className:"app-btn",children:"Explore"})},"explore"),(0,c.jsx)(r.Link,{to:"/artworks",children:(0,c.jsx)(m.Z,{className:"app-btn",children:e?"My Items":"Artwork"})},"artwork"),(0,c.jsx)(r.Link,{to:"/artists",children:(0,c.jsx)(m.Z,{className:"app-btn",children:"Creators"})},"artists")]},pn=function(e){var t=e.vertical,n=void 0!==t&&t,i=(0,b.useWallet)().connected;return(0,c.jsx)("div",{style:{display:"flex",flexDirection:n?"column":"row"},children:dn(i)})},fn=function(){var e=xt().width,t=(0,i.useState)(!1),n=t[0],r=t[1],a=(0,b.useWallet)().connected;return e<768?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(h.Z,{title:(0,c.jsx)("img",{src:"/Safecoin.svg"}),visible:n,footer:null,className:"modal-box",closeIcon:(0,c.jsx)("img",{onClick:function(){return r(!1)},src:"/modals/close.svg"}),children:(0,c.jsxs)("div",{className:"site-card-wrapper mobile-menu-modal",children:[(0,c.jsx)(x.Z,{onClick:function(){return r(!1)},children:dn(a).map((function(e,t){return(0,c.jsx)(x.Z.Item,{children:e},t)}))}),(0,c.jsx)("div",{className:"actions",children:a?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(un,{showBalance:!1,showAddress:!0,iconSize:24,closeModal:function(){r(!1)}}),(0,c.jsx)(Vt,{}),(0,c.jsx)(cn,{})]}):(0,c.jsxs)("div",{className:"actions-buttons",children:[(0,c.jsx)(o.ConnectButton,{onClick:function(){return r(!1)},className:"secondary-btn"}),(0,c.jsx)(Jt,{onClick:function(){return r(!1)},buttonClassName:"black-btn"})]})})]})}),(0,c.jsx)(Ut.Z,{onClick:function(){return r(!0)},style:{fontSize:"1.4rem"}})]}):(0,c.jsx)(pn,{})},mn=function(){return(0,c.jsx)(r.Link,{to:"/",children:(0,c.jsx)("img",{src:"/metaplex-logo.svg"})})},hn=function(){var e=(0,b.useWallet)().connected;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ln,{}),(0,c.jsxs)("div",{id:"desktop-navbar",children:[(0,c.jsxs)("div",{className:"app-left",children:[(0,c.jsx)(mn,{}),"\xa0\xa0\xa0",(0,c.jsx)(fn,{})]}),(0,c.jsxs)("div",{className:"app-right",children:[!e&&(0,c.jsx)(Jt,{buttonClassName:"modal-button-default"}),!e&&(0,c.jsx)(o.ConnectButton,{style:{height:48},allowWalletChange:!0}),e&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(sn,{showBalance:!1,showAddress:!0,iconSize:24}),(0,c.jsx)(Vt,{}),(0,c.jsx)(cn,{})]})]})]})]})},xn=f.Z.Header,bn=f.Z.Content,yn=i.memo((function(e){return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(f.Z,{id:"main-layout",children:[(0,c.jsx)("span",{id:"main-bg"}),(0,c.jsx)("span",{id:"bg-gradient"}),(0,c.jsx)("span",{id:"static-header-gradient"}),(0,c.jsx)("span",{id:"static-end-gradient"}),(0,c.jsx)(xn,{className:"App-Bar",children:(0,c.jsx)(hn,{})}),(0,c.jsx)(f.Z,{id:"width-layout",children:(0,c.jsx)(bn,{style:{overflow:"scroll",padding:"30px 48px "},children:e.children})})]})})})),vn=function(e){var t=e.children,n=(0,o.useMeta)().isLoading;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"loader-container ".concat(n?"active":""),children:(0,c.jsxs)("div",{className:"loader-block",children:[(0,c.jsx)("div",{className:"loader-title",children:"loading"}),(0,c.jsx)(gn,{})]})}),t]})},gn=function(){return(0,c.jsxs)("div",{className:"spinner",children:[(0,c.jsx)("span",{className:"line line-1"}),(0,c.jsx)("span",{className:"line line-2"}),(0,c.jsx)("span",{className:"line line-3"}),(0,c.jsx)("span",{className:"line line-4"}),(0,c.jsx)("span",{className:"line line-5"}),(0,c.jsx)("span",{className:"line line-6"}),(0,c.jsx)("span",{className:"line line-7"}),(0,c.jsx)("span",{className:"line line-8"}),(0,c.jsx)("span",{className:"line line-9"})]})},jn=n(34406),kn=function(e){var t=e.children;return(0,c.jsx)(o.ConnectionProvider,{children:(0,c.jsx)(o.WalletProvider,{children:(0,c.jsx)(o.AccountsProvider,{children:(0,c.jsx)(tt,{children:(0,c.jsx)(ct,{children:(0,c.jsx)(o.StoreProvider,{ownerAddress:"ETYJgForS5jHu7C1Pkcu9TqnnLnHiU3kMxKajd1v3WHn",storeAddress:jn.env.NEXT_PUBLIC_STORE_ADDRESS,children:(0,c.jsx)(o.MetaProvider,{children:(0,c.jsx)(vn,{children:(0,c.jsx)(l,{children:(0,c.jsx)(yn,{children:t})})})})})})})})})})},wn=n(73884),Nn=n(74782);function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mn=function(){return(0,c.jsxs)(Nn.ZP,{speed:2,width:223,height:400,viewBox:"0 0 250 400",backgroundColor:"#0c0c0c",foregroundColor:"#595959",children:[(0,c.jsx)("rect",{x:"9",y:"0",rx:"14",ry:"14",width:"232",height:"240"}),(0,c.jsx)("circle",{cx:"39",cy:"296",r:"15"}),(0,c.jsx)("rect",{x:"24",y:"251",rx:"0",ry:"6",width:"123",height:"21"}),(0,c.jsx)("rect",{x:"24",y:"322",rx:"6",ry:"6",width:"44",height:"25"})]})},Tn=function(e){var t=e.style;return(0,c.jsxs)(Nn.ZP,{viewBox:"0 0 212 200",height:200,width:212,backgroundColor:"transparent",style:Sn({width:"100%",margin:"auto"},t),children:[(0,c.jsx)("circle",{cx:"86",cy:"100",r:"8"}),(0,c.jsx)("circle",{cx:"106",cy:"100",r:"8"}),(0,c.jsx)("circle",{cx:"126",cy:"100",r:"8"})]})},An=function(e){return(0,i.useEffect)((function(){var t=document.getElementById("main-bg"),n=document.getElementById("bg-gradient");return t&&e.useBannerBg&&(t.style.backgroundImage="url(".concat(e.src,")"),t.style.display="inline-block",n&&(n.style.display="inline-block")),function(){var t=document.getElementById("main-bg"),n=document.getElementById("bg-gradient");t&&e.useBannerBg&&(t.style.backgroundImage="",t.style.display="none"),n&&(n.style.display="none")}}),[e.src,e.useBannerBg]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{id:"mobile-banner",children:[(0,c.jsx)("img",{className:"banner-img",src:e.src}),(0,c.jsxs)("div",{className:"banner-content",children:[(0,c.jsx)("div",{id:"main-heading",children:e.headingText}),(0,c.jsx)("div",{id:"sub-heading",children:e.subHeadingText}),e.actionComponent]})]}),(0,c.jsxs)("div",{id:"current-banner",style:{backgroundImage:"url(".concat(e.src,")")},children:[(0,c.jsx)("span",{id:"gradient-banner"}),(0,c.jsxs)("div",{id:"banner-inner",children:[(0,c.jsxs)("div",{id:"message-container",children:[(0,c.jsx)("div",{id:"main-heading",children:e.headingText}),(0,c.jsx)("div",{id:"sub-heading",children:e.subHeadingText}),e.actionComponent]}),e.children,(0,c.jsx)("div",{className:"powered-by",children:(0,c.jsxs)("span",{children:["POWERED BY ",(0,c.jsx)("b",{children:"Safecoin-METAPLEX"})]})})]})]})]})},Cn=function(e){return e.thumbnail.metadata.info.primarySaleHappened},Zn=function(e){return e.state===bt.Live&&!Cn(e)},On=function(e,t){return e.state!==bt.Defective&&e.auction.info.bidState.bids.some((function(e){return e.key==(null===t||void 0===t?void 0:t.toBase58())}))},En=function(e){return e.state===bt.Live&&Cn(e)},Bn=function(e){var t=e.state;return[bt.Ended,bt.BuyNow].includes(t)},Kn=function(e,t){return e.state===bt.Live&&e.auctionManager.authority===(null===t||void 0===t?void 0:t.toBase58())},In=function(e){var t=(0,b.useWallet)().publicKey,n=Nt();return{auctions:(0,i.useMemo)((function(){var i=function(e){switch(e){case ai.All:return Zn;case ai.Participated:return On;case ai.Resale:return En;case ai.Ended:return Bn;case ai.Own:return Kn}}(e);return n.filter((function(e){return i(e,t)}))}),[e,n,t]),hasResaleAuctions:(0,i.useMemo)((function(){return n.some((function(e){return En(e)}))}),[n])}},_n=n(90059),Rn=n(85982);n(7318);function Fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fn(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wn(e){return(0,c.jsx)("model-viewer",{style:Dn({width:"100%",height:"100%",minHeight:400,minWidth:400,maxHeight:400},e.style),src:e.url,"auto-rotate":!0,"rotation-per-second":"40deg",className:e.className,"camera-controls":!0})}var Ln,Vn,Un=n(56058),zn=function(e){if(!(e.length<=0))return e[e.length-1]},qn=n(72362);function Hn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hn(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yn=function(e){var t=e.uri,n=e.animationUrl,i=e.className,r=e.style,a=e.files,o=a&&a.length>0&&"string"===typeof a[0]?a[0]:n;return vt(o||"",!0).isLoading?(0,c.jsx)(Xn,{uri:t,className:i,preview:!1,style:Gn({width:"100%"},r)}):(0,c.jsx)(Wn,{url:o,className:i,style:r})},Xn=function(e){var t=e.uri,n=e.className,i=e.preview,r=e.style,a=vt(t||"").cachedBlob;return(0,c.jsx)(Rn.Z,{fallback:"image-placeholder.svg",src:a,preview:i,wrapperClassName:n,loading:"lazy",wrapperStyle:Gn({},r),placeholder:(0,c.jsx)(Tn,{})})},Qn=function(e){var t,n=e.className,r=e.style,a=e.files,o=e.uri,s=e.animationURL,u=e.active,l=(0,i.useState)(),d=l[0],p=l[1],f=(0,i.useCallback)((function(e){p(e)}),[p]);(0,i.useEffect)((function(){d&&(d.currentTime=0)}),[u,d]);var m=null===(t=(a||[]).filter((function(e,t,n){return"string"===typeof e&&(n.length>=2?1===t:0===t)})))||void 0===t?void 0:t[0];return m&&m.startsWith("https://watch.videodelivery.net/")?(0,c.jsx)("div",{className:"".concat(n," square"),children:(0,c.jsx)(Un.F,{streamRef:function(e){return f(e)},src:m.replace("https://watch.videodelivery.net/",""),loop:!0,height:600,width:600,controls:!1,videoDimensions:{videoHeight:700,videoWidth:400},autoplay:!0,muted:!0})}):(0,c.jsx)("div",{className:"".concat(n," square"),children:(0,c.jsxs)("video",{playsInline:!0,autoPlay:!0,muted:!0,controls:!0,controlsList:"nodownload",style:r,loop:!0,poster:o,children:[m&&(0,c.jsx)("source",{src:m,type:"video/mp4",style:r}),s&&(0,c.jsx)("source",{src:s,type:"video/mp4",style:r}),null===a||void 0===a?void 0:a.filter((function(e){return"string"!==typeof e})).map((function(e){return(0,c.jsx)("source",{src:e.uri,type:e.type,style:r})}))]})})},Jn=qn.ZP.div(Ln||(Ln=(0,_n.Z)(["\n  padding-top: 100%;\n  position: relative;\n  width: 100%;\n"]))),$n=function(e){var t=e.uri,n=e.animationUrl,r=e.className,a=e.preview,o=e.style,s=e.files,u=e.artView,l=(0,i.useState)(!1),d=l[0],p=l[1];if(!u)return(0,c.jsx)(Xn,{uri:t,className:r,preview:a,style:o});var f=s&&s.length>0&&"string"===typeof s[0]?s[0]:n;return(0,c.jsxs)(Jn,{children:[!d&&(0,c.jsx)(Tn,{style:{width:"100%",height:"100%",top:0,left:0,position:"absolute"}}),(0,c.jsx)("iframe",{allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",sandbox:"allow-scripts",frameBorder:"0",src:f,className:"html-iframe ".concat(r),onLoad:function(){p(!0)},style:Gn(Gn({},o),{},{height:d?"100%":0})})]})},ei=qn.ZP.div(Vn||(Vn=(0,_n.Z)(["\n  display: flex;\n  alignItems: center;\n  justifyContent: center;\n  height: 100%;\n"]))),ti=function(e){var t=e.category,n=e.className,r=e.preview,a=e.style,s=e.active,u=e.allowMeshRender,l=e.pubkey,d=e.uri,p=e.animationURL,f=e.files,m=e.artView,h=(0,i.useState)(),x=h[0],b=h[1],y=(0,i.useState)(),v=y[0],g=y[1],j=(0,i.useState)(),k=j[0],w=j[1],N=(0,i.useState)(),P=N[0],S=N[1],M=(0,o.pubkeyToString)(l),T=jt(M),A=T.ref,C=T.data;(0,i.useEffect)((function(){b(d)}),[d]),(0,i.useEffect)((function(){g(p)}),[p]),(0,i.useEffect)((function(){w(f)}),[f]),(0,i.useEffect)((function(){S(t)}),[t]),(0,i.useEffect)((function(){l&&C&&(b(C.image),g(C.animation_url)),l&&null!==C&&void 0!==C&&C.properties&&(w(C.properties.files),S(C.properties.category))}),[l,C]);var Z=new URLSearchParams(zn((v||"").split("?"))).get("ext");if(u&&("vr"===P||"glb"===Z||"gltf"===Z))return(0,c.jsx)(Yn,{uri:x,animationUrl:v,className:n,style:a,files:k});if("html"===P||"html"===Z)return(0,c.jsx)($n,{uri:x,animationUrl:v,className:n,preview:r,style:a,files:k,artView:m});var O="video"===P?(0,c.jsx)(Qn,{className:n,style:a,files:k,uri:x,animationURL:v,active:s}):(0,c.jsx)(Xn,{uri:x,className:n,preview:r,style:a});return(0,c.jsx)(ei,{ref:A,children:O})},ni=n(46104);function ii(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ri(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ii(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ii(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ai,oi=function(e){var t,n=e.amount,r=e.displayUSD,a=void 0===r||r,s=e.displaySymbol,u=void 0===s?"":s,l=e.title,d=void 0===l?"":l,p=e.style,f=void 0===p?{}:p,m=e.containerStyle,h=void 0===m?{}:m,x=e.iconSize,b=void 0===x?38:x,y=e.customPrefix,v=e.ended,g=e.tokenInfo,j="string"===typeof n?parseFloat(n):n,k="".concat(j);j>=1&&(k=(0,o.formatAmount)(j)),console.log("++++++ TOKENINFO ",g);var w=dt(),N=null===(t=pt().filter((function(e){return e.tokenMint==(null===g||void 0===g?void 0:g.address)}))[0])||void 0===t?void 0:t.tokenPrice,P="Safe1111111111111111111111111111111111111"==(null===g||void 0===g?void 0:g.address)?w:N,S=(0,i.useState)(void 0),M=S[0],T=S[1];(0,i.useEffect)((function(){T(P*j)}),[j,P,N]);var A=isNaN(j);return(0,c.jsxs)("div",{style:ri({display:"flex"},h),children:[!1===A&&(0,c.jsx)(ni.Z,{style:f,className:"create-statistic",title:d||"",value:"".concat(k," ").concat(u||""),prefix:y||(0,c.jsx)(nn,{iconSize:b,iconFile:""==(null===g||void 0===g?void 0:g.logoURI)||null===g||void 0===g?void 0:g.logoURI})}),a&&(0,c.jsx)("div",{className:"usd",children:!1===A?M?o.formatUSD.format(M):"$N/A":(0,c.jsx)("div",{className:"placebid",children:v?"N/A":"Place Bid"})})]})},si=n(78597),ci=function(e){var t=e.creator,n=e.size,r=e.alt,a=(0,i.useState)(!1),s=a[0],u=a[1],l=t.image||"";return(0,c.jsx)(si.C,{alt:r,size:n,src:s?(0,c.jsx)(o.Identicon,{alt:r,address:t.address,style:{width:n}}):l,onError:function(){return u(!0),!1}})},ui=function(e){var t=e.creators,n=e.showMultiple,i=e.size||32;if(!t||0===t.length)return(0,c.jsx)(si.C,{size:i,src:!1});var r=(t||[]).map((function(e){return(0,c.jsx)(ci,{creator:e,alt:e.name,size:i})}));return n?(0,c.jsx)(si.C.Group,{children:r||null}):r[0]},li=function(e){var t=e.creators,n=e.size||32;return t&&0!==t.length?(0,c.jsx)("div",{children:(t||[]).map((function(e,t){return(0,c.jsxs)("div",{style:{display:"flex"},children:[(0,c.jsx)(ci,{creator:e,alt:e.name,size:n}),(0,c.jsx)("p",{style:{marginLeft:10},children:e.name?e.name:"No name provided."})]},t)}))}):(0,c.jsx)(si.C,{size:n,src:!1})},di=function(e){var t=(0,i.useState)(),n=t[0],r=t[1],a=e.auction.info;return(0,i.useEffect)((function(){var e=function(){var e=a.timeToEnd();r(e)},t=setInterval((function(){e()}),1e3);return e(),function(){return clearInterval(t)}}),[a]),n},pi=function(e){var t=e.auctionView,n=di(t),i=mi(n);return e.labels?(0,c.jsx)(Ht.Z,{span:i?24:10,children:(0,c.jsx)(xi,{state:n})}):(0,c.jsx)(hi,{state:n})},fi=function(e){var t,n,i=e.auctionView,r=di(i),a=Ct(i.auction.pubkey),s=(0,o.useMint)(i.auction.info.tokenMint),u=(null===(t=i.auctionManager.participationConfig)||void 0===t?void 0:t.fixedPrice)||0,l=0===i.auctionManager.numWinners.toNumber(),d=i.auction.info.priceFloor.type===o.PriceFloorType.Minimum&&(null===(n=i.auction.info.priceFloor.minPrice)||void 0===n?void 0:n.toNumber())||0,p=i.state===bt.Upcoming,f=i.state===bt.Live,m=nt().mainnetTokens[0],h=mi(r);return(0,c.jsxs)("div",{style:{maxWidth:350},children:[(!h||i.isInstantSale)&&(0,c.jsxs)(c.Fragment,{children:[(p||0===a.length||i.isInstantSale)&&(0,c.jsx)(oi,{displaySymbol:(null===m||void 0===m?void 0:m.symbol)||"CUSTOM",style:{marginBottom:e.showAsRow?0:10},title:i.isInstantSale?"Price":"Starting bid",tokenInfo:m,amount:(0,o.fromLamports)(l?u:d,s)}),!i.isInstantSale&&f&&a.length>0&&(0,c.jsx)(oi,{displaySymbol:(null===m||void 0===m?void 0:m.symbol)||"CUSTOM",style:{marginBottom:e.showAsRow?0:10},containerStyle:{flexDirection:e.showAsRow?" row":"column"},title:"Highest bid",tokenInfo:m,amount:(0,o.formatTokenAmount)(a[0].info.lastBid,s)})]}),h||e.hideCountdown?null:(0,c.jsx)(pi,{auctionView:i,labels:!0})]})},mi=function(e){return 0===(null===e||void 0===e?void 0:e.days)&&0===(null===e||void 0===e?void 0:e.hours)&&0===(null===e||void 0===e?void 0:e.minutes)&&0===(null===e||void 0===e?void 0:e.seconds)},hi=function(e){var t=e.state;return t||(t={days:0,hours:0,minutes:0,seconds:0}),(0,c.jsxs)(qt.Z,{style:{width:"100%",flexWrap:"nowrap"},className:"no-label-cd",children:[t.days>0&&(0,c.jsx)(Ht.Z,{children:(0,c.jsxs)("div",{className:"cd-number",children:[t.days,(0,c.jsx)("span",{style:{opacity:.5},children:"days"})]})}),(0,c.jsx)(Ht.Z,{children:(0,c.jsxs)("div",{className:"cd-number",children:[t.hours,(0,c.jsx)("span",{style:{opacity:.5},children:"hours"})]})}),(0,c.jsx)(Ht.Z,{children:(0,c.jsxs)("div",{className:"cd-number",children:[t.minutes,(0,c.jsx)("span",{style:{opacity:.5},children:"min"})]})}),!t.days&&(0,c.jsx)(Ht.Z,{children:(0,c.jsxs)("div",{className:"cd-number",children:[t.seconds,(0,c.jsx)("span",{style:{opacity:.5},children:"sec"})]})})]})},xi=function(e){var t=e.state;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{style:{width:"100%"},children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"info-header",style:{margin:"12px 0",fontSize:18},children:"Time left"}),t&&(mi(t)?(0,c.jsx)(qt.Z,{style:{width:"100%"},children:(0,c.jsx)("div",{className:"cd-number",children:"This auction has ended"})}):(0,c.jsxs)(qt.Z,{style:{width:"100%",flexWrap:"nowrap"},children:[t&&t.days>0&&(0,c.jsxs)(Ht.Z,{children:[(0,c.jsxs)("div",{className:"cd-number",children:[t.days,(0,c.jsx)("span",{style:{opacity:.5},children:":"})]}),(0,c.jsx)("div",{className:"cd-label",children:"days"})]}),(0,c.jsxs)(Ht.Z,{children:[(0,c.jsxs)("div",{className:"cd-number",children:[t.hours,(0,c.jsx)("span",{style:{opacity:.5},children:":"})]}),(0,c.jsx)("div",{className:"cd-label",children:"hour"})]}),(0,c.jsxs)(Ht.Z,{children:[(0,c.jsxs)("div",{className:"cd-number",children:[t.minutes,0===t.days&&(0,c.jsx)("span",{style:{opacity:.5},children:":"})]}),(0,c.jsx)("div",{className:"cd-label",children:"mins"})]}),!t.days&&(0,c.jsxs)(Ht.Z,{children:[(0,c.jsx)("div",{className:"cd-number",children:t.seconds}),(0,c.jsx)("div",{className:"cd-label",children:"secs"})]})]}))]})})})},bi=function(e){var t,n,r=Ct(e.auction.pubkey),a=function(e){var t=Ct(e);return(0,i.useMemo)((function(){return null===t||void 0===t?void 0:t[0]}),[t])}(e.auction.pubkey),s=(0,o.useMint)(e.auction.info.tokenMint),c=(null===(t=e.auctionManager.participationConfig)||void 0===t?void 0:t.fixedPrice)||0,u=e.auctionManager.numWinners.eq(new I.BN(0)),l=e.auction.info.priceFloor.type===o.PriceFloorType.Minimum&&(null===(n=e.auction.info.priceFloor.minPrice)||void 0===n?void 0:n.toNumber())||0,d="Starting Bid",p=(0,o.fromLamports)(u?c:l,s),f=e.auction.info.timeToEnd(),m=e.auction.info.bidState.type===o.BidStateType.OpenEdition;m&&(d="Open Sale");var h=0===(null===f||void 0===f?void 0:f.hours)&&0===(null===f||void 0===f?void 0:f.minutes)&&0===(null===f||void 0===f?void 0:f.seconds)&&e.auction.info.state===o.AuctionState.Ended;if(e.isInstantSale){var x,b,y=r.length===e.items.length;return d=e.state===bt.Ended?"Ended":"Price",y&&!m&&(d="Sold Out"),{status:d,amount:p=(0,o.formatTokenAmount)(null===(x=e.auctionDataExtended)||void 0===x||null===(b=x.info.instantSalePrice)||void 0===b?void 0:b.toNumber(),s)}}return r.length>0&&!m&&(p=(0,o.formatTokenAmount)(a.info.lastBid),d="Current Bid"),h?0===r.length?{status:"Ended",amount:p}:{status:"Winning Bid",amount:p}:{status:d,amount:p}},yi=function(e){var t,n,i,r=e.auctionView,a=r.thumbnail.metadata.pubkey,o=gt(a),s=It(r),u=(null===o||void 0===o?void 0:o.title)||" ",l=nt().mainnetTokens[0],d=bi(r),p=d.status,f=d.amount;return(0,c.jsxs)(zt.Z,{hoverable:!0,className:"auction-render-card",bordered:!1,children:[(0,c.jsx)("div",{className:"card-art-info",children:(0,c.jsxs)("div",{className:"auction-gray-wrapper",children:[(0,c.jsxs)("div",{className:"card-artist-info",children:[(0,c.jsx)(ui,{creators:s.length?[s[0]]:void 0}),(0,c.jsxs)("span",{className:"artist-name",children:[(null===(t=s[0])||void 0===t?void 0:t.name)||(null===(n=s[0])||void 0===n||null===(i=n.address)||void 0===i?void 0:i.substr(0,6))||"Go to auction","..."]})]}),(0,c.jsx)("div",{className:"art-content-wrapper",children:(0,c.jsx)(ti,{className:"auction-image no-events",preview:!1,pubkey:a,allowMeshRender:!1})}),(0,c.jsx)("div",{className:"art-name",children:u}),(0,c.jsxs)("div",{className:"auction-info-container",children:[(0,c.jsx)("div",{className:"info-message",children:"ENDING IN"}),(0,c.jsx)(pi,{auctionView:r,labels:!1})]})]})}),(0,c.jsxs)("div",{className:"card-bid-info",children:[(0,c.jsx)("span",{className:"text-uppercase info-message",children:p}),(0,c.jsx)(oi,{containerStyle:{flexDirection:"row"},title:p,amount:f,iconSize:24,tokenInfo:l})]})]})},vi=wn.Z.TabPane,gi=f.Z.Content;!function(e){e.All="0",e.Participated="1",e.Ended="2",e.Resale="3",e.Own="4"}(ai||(ai={}));var ji=function(){var e=(0,i.useState)(ai.All),t=e[0],n=e[1],a=(0,Xe.useMeta)().isLoading,o=(0,b.useWallet)().connected,s=In(t),u=s.auctions,l=s.hasResaleAuctions;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(An,{src:"/main-banner.svg",headingText:"The amazing world of Metaplex.",subHeadingText:"Buy exclusive Metaplex NFTs.",actionComponent:(0,c.jsx)(Jt,{buttonClassName:"secondary-btn"}),useBannerBg:!0}),(0,c.jsx)(f.Z,{children:(0,c.jsx)(gi,{style:{display:"flex",flexWrap:"wrap"},children:(0,c.jsxs)(Ht.Z,{style:{width:"100%",marginTop:32},children:[(0,c.jsx)(qt.Z,{children:(0,c.jsxs)(wn.Z,{activeKey:t,onTabClick:function(e){return n(e)},children:[(0,c.jsx)(vi,{tab:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"live"})," Live"]})},ai.All),l&&(0,c.jsx)(vi,{tab:"Secondary Marketplace"},ai.Resale),(0,c.jsx)(vi,{tab:"Ended"},ai.Ended),o&&(0,c.jsx)(vi,{tab:"Participated"},ai.Participated),o&&(0,c.jsx)(vi,{tab:"My Live Auctions"},ai.Own)]})}),(0,c.jsx)(qt.Z,{children:(0,c.jsxs)("div",{className:"artwork-grid",children:[a&&(0,v.Z)(Array(10)).map((function(e,t){return(0,c.jsx)(Mn,{},t)})),!a&&u.map((function(e){return(0,c.jsx)(r.Link,{to:"/auction/".concat(e.auction.pubkey),children:(0,c.jsx)(yi,{auctionView:e})},e.auction.pubkey)}))]})})]})})})]})},ki=n(39135),wi=n(61646);function Ni(e,t,n,i){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,g.Z)(k().mark((function e(t,n,i,r){var a,s,c,u,l,d,p,f;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:return a=[],s=[],c=[],u=[],e.next=8,(0,ki.P)(i,n.publicKey.toBase58(),n.publicKey.toBase58(),u);case 8:a.push(c),s.push(u),l=0;case 11:if(!(l<r.length)){e.next=22;break}return d=r[l],p=[],f=[],e.next=17,(0,wi.K)(d.address,d.activated,n.publicKey.toBase58(),n.publicKey.toBase58(),f);case 17:a.push(p),s.push(f);case 19:l++,e.next=11;break;case 22:if(1!==s.length){e.next=27;break}return e.next=25,(0,o.sendTransactionWithRetry)(t,n,s[0],a[0],"single");case 25:e.next=29;break;case 27:return e.next=29,(0,o.sendTransactions)(t,n,s,a,o.SequenceType.StopOnFailure,"single");case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Si=n(16593),Mi=function(e){var t=e.storeAddress,n=e.storeOwnerAddress,r=(0,i.useRef)(null),a=(0,i.useCallback)((function(){var e,t=null===(e=r.current)||void 0===e?void 0:e.innerText;t&&navigator.clipboard.writeText(t)}),[]);return t||n?(0,c.jsx)(zt.Z,{title:"Store configuration",extra:(0,c.jsx)(m.Z,{type:"dashed",onClick:a,icon:(0,c.jsx)(Si.Z,{})}),children:(0,c.jsx)("div",{ref:r,children:n&&(0,c.jsxs)("p",{children:["REACT_APP_STORE_OWNER_ADDRESS_ADDRESS=",n]})})}):null},Ti=function(){var e,t=(0,i.useState)(!1),n=t[0],r=t[1],s=(0,o.useConnection)(),u=(0,Xe.useMeta)().store,l=(0,o.useStore)().setStoreForOwner,d=(0,a.k6)(),p=(0,b.useWallet)(),f=(0,o.useWalletModal)().setVisible,h=(0,i.useCallback)((function(){return p.wallet?p.connect().catch():f(!0)}),[p.wallet,p.connect,f]),x=(0,i.useState)(),y=x[0];x[1];(0,i.useEffect)((function(){}),[p.publicKey]);var v=function(){var e=(0,g.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.publicKey){e.next=2;break}return e.abrupt("return");case 2:return r(!0),e.next=5,Ni(s,p,!1,[new o.WhitelistedCreator({address:p.publicKey.toBase58(),activated:!0})]);case 5:return e.next=7,l(void 0);case 7:return e.next=9,l(p.publicKey.toBase58());case 9:d.push("/admin");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,c.jsxs)(c.Fragment,{children:[!p.connected&&(0,c.jsxs)("p",{children:[(0,c.jsx)(m.Z,{type:"primary",className:"app-btn",onClick:h,children:"Connect"})," ","to configure store."]}),p.connected&&!u&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{children:"Store is not initialized yet"}),(0,c.jsx)("p",{children:"There must be some \u25ce SAFE in the wallet before initialization."}),(0,c.jsx)("p",{children:"After initialization, you will be able to manage the list of creators"}),(0,c.jsx)("p",{children:(0,c.jsx)(m.Z,{className:"app-btn",type:"primary",loading:n,onClick:v,children:"Init Store"})})]}),p.connected&&u&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("p",{children:["To finish initialization please copy config below into"," ",(0,c.jsx)("b",{children:"packages/web/.env"})," and restart yarn or redeploy"]}),(0,c.jsx)(Mi,{storeAddress:y,storeOwnerAddress:null===(e=p.publicKey)||void 0===e?void 0:e.toBase58()})]})]})},Ai=function(){var e=(0,Xe.useMeta)(),t=e.isLoading,n=e.store,i=(0,o.useStore)().isConfigured,r=n&&i||t;return(0,c.jsx)(f.Z,{style:{margin:0,marginTop:30,alignItems:"center"},children:r?(0,c.jsx)(ji,{}):(0,c.jsx)(Ti,{})})},Ci=n(78786),Zi=n(80318),Oi=n(88662),Ei=function(e){var t=e.id,n=(0,o.useConnectionConfig)().endpoint,i=gt(t);return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(Ht.Z,{children:[(0,c.jsx)("h6",{children:"View on"}),(0,c.jsxs)("div",{style:{display:"flex"},children:[(0,c.jsx)(m.Z,{className:"tag",onClick:function(){return window.open(i.uri||"","_blank")},children:"Arweave"}),(0,c.jsx)(m.Z,{className:"tag",onClick:function(){var e=n.name,t=new URL("account/".concat((null===i||void 0===i?void 0:i.mint)||""),"https://explorer.safecoin.org");e.includes("mainnet")||t.searchParams.set("cluster",e),window.open(t.href,"_blank")},children:"safecoin"})]})]})})},Bi=n(3319),Ki=n(90385),Ii=n(64340),_i=n(54073),Ri=n.n(_i);function Fi(e,t,n,i,r,a,o,s){return Di.apply(this,arguments)}function Di(){return(Di=(0,g.Z)(k().mark((function e(t,n,i,r,a,s,c,u){var l,d,p,f,m,h,x;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.mint){e.next=2;break}throw new Error("Art mint is not provided");case 2:if("undefined"!==typeof t.supply){e.next=4;break}throw new Error("Art supply is not provided");case 4:if(n.publicKey){e.next=6;break}throw new Error("Wallet pubKey is not provided");case 6:if(r){e.next=8;break}throw new Error("Art mint token account is not provided");case 8:return l=n.publicKey.toString(),d=t.mint,p=r.pubkey,f=r.info.owner.toString(),e.next=14,i.getMinimumBalanceForRentExemption(Z.MintLayout.span);case 14:return m=e.sent,e.next=17,$(n,u,m,s,c);case 17:return h=e.sent,x=h.mint,e.next=21,(0,o.mintNewEditionFromMasterEditionViaToken)(x,d,l,l,f,p,s,l,a);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Wi=10;function Li(e,t,n,i){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,g.Z)(k().mark((function e(t,n,i,r){var a,s,c,u,l,d,p,f,m,h,x,b,y,v=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=v.length>4&&void 0!==v[4]?v[4]:1,s=v.length>5?v[5]:void 0,c=v.length>6?v[6]:void 0,u=[],l=[],d=[],p=[],f=[],m=[],h=0;case 10:if(!(h<a)){e.next=19;break}return console.log("Minting",h),e.next=14,Fi(t,n,i,r,c?new(_())(c):new(_())(t.supply+1+h),m,f,s);case 14:5===m.length&&(d.push(f),p.push(m),f=[],m=[]),p.length===Wi&&(u.push(d),l.push(p),d=[],p=[]);case 16:h++,e.next=10;break;case 19:m.length<5&&m.length>0&&(d.push(f),p.push(m)),p.length<=Wi&&p.length>0&&(u.push(d),l.push(p)),console.log("Instructions",l),x=0;case 23:if(!(x<l.length)){e.next=38;break}if(b=l[x],y=u[x],console.log("Running batch",x),!(b.length>=2)){e.next=32;break}return e.next=30,(0,o.sendTransactions)(i,n,b,y,o.SequenceType.StopOnFailure,"single");case 30:e.next=34;break;case 32:return e.next=34,(0,o.sendTransactionWithRetry)(i,n,b[0],y[0],"single");case 34:console.log("Done");case 35:x++,e.next=23;break;case 38:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ui=function(e){var t,n=e.id,a=e.onMint,s=(0,b.useWallet)(),u=(0,o.useConnection)(),l=(0,o.useUserAccounts)().accountByMint,p=(0,i.useState)(!1),f=p[0],x=p[1],y=(0,i.useState)(!1),v=y[0],j=y[1],w=(0,i.useState)(""),N=w[0],P=w[1],S=(0,i.useState)(1),M=S[0],T=S[1],A=(0,i.useState)(void 0),C=A[0],O=A[1],E=(0,i.useState)(0),B=E[0],K=E[1],I=(0,i.useState)(!1),_=I[0],F=I[1],D=gt(n),W=(null===s||void 0===s||null===(t=s.publicKey)||void 0===t?void 0:t.toString())||"",L=D.maxSupply-D.supply,V=D.type===ut.Master,U=l.get(D.mint),z=(l.has(D.mint)&&(null===U||void 0===U?void 0:U.info.amount.toNumber())||0)>0,q=!!U&&(0,o.decodeMasterEdition)(U.account.data).key===o.MetadataKey.MasterEditionV1,H=V&&z&&!q,G=(0,i.useMemo)((function(){if(!N)return"Required";try{return new R.PublicKey(N),""}catch(e){return"Invalid address format"}}),[N]),Y=_||M<1||Boolean(G),X=(0,i.useCallback)(Ri()((function(e){T(e<1?1:e)}),300),[]);(0,i.useEffect)((function(){M<1||(0,g.Z)(k().mark((function e(){var t,n,i,r,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.getMinimumBalanceForRentExemption(Z.MintLayout.span);case 2:return t=e.sent,e.next=5,u.getMinimumBalanceForRentExemption(Z.AccountLayout.span);case 5:return n=e.sent,e.next=8,u.getMinimumBalanceForRentExemption(o.MAX_METADATA_LEN);case 8:return i=e.sent,e.next=11,u.getMinimumBalanceForRentExemption(o.MAX_EDITION_LEN);case 11:r=e.sent,a=(t+n+i+r)*M/R.LAMPORTS_PER_SAFE,K(a);case 14:case"end":return e.stop()}}),e)})))()}),[u,M]),(0,i.useEffect)((function(){W&&P(W)}),[W]),(0,i.useEffect)((function(){return X.cancel()}),[]);var Q=function(){var e=(0,g.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F(!0),e.next=4,Li(D,s,u,U,M,N,C);case 4:x(!1),P(W),T(1),j(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:return e.prev=10,F(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(){return e.apply(this,arguments)}}();return(0,c.jsx)(c.Fragment,{children:H&&(0,c.jsxs)("div",{children:[(0,c.jsx)(m.Z,{type:"primary",size:"large",className:"action-btn",style:{marginTop:20},onClick:function(){return x(!0)},children:"Mint"}),(0,c.jsxs)(h.Z,{visible:f,centered:!0,okText:"Mint",closable:!_,okButtonProps:{disabled:Y},cancelButtonProps:{disabled:_},onOk:Q,onCancel:function(){return x(!1)},className:"art-minting-modal",children:[(0,c.jsx)(Bi.Z.Item,{style:{width:"100%",flexDirection:"column",paddingTop:30,marginBottom:4},label:(0,c.jsx)("h3",{style:{color:"white"},children:"Mint to"}),labelAlign:"left",colon:!1,validateStatus:G?"error":"success",help:G,children:(0,c.jsx)(Ki.Z,{placeholder:"Address to mint edition to",value:N,onChange:function(e){P(e.target.value)}})}),(0,c.jsx)(Bi.Z.Item,{style:{width:"100%",flexDirection:"column",paddingTop:30},label:(0,c.jsx)("h3",{style:{color:"white"},children:"Number of editions to mint"}),labelAlign:"left",colon:!1,children:(0,c.jsx)(Ii.Z,{type:"number",placeholder:"1",style:{width:"100%"},min:1,max:L,value:M,precision:0,onChange:X})}),(0,c.jsx)(Bi.Z.Item,{style:{width:"100%",flexDirection:"column",paddingTop:30},label:(0,c.jsx)("h3",{style:{color:"white"},children:"Edition Number (Optional)"}),labelAlign:"left",colon:!1,children:(0,c.jsx)(Ii.Z,{type:"number",style:{width:"100%"},min:1,max:D.supply,value:C,precision:0,onChange:O})}),(0,c.jsxs)("div",{children:["Total cost: ","\u25ce".concat(B)]})]}),(0,c.jsxs)(o.MetaplexOverlay,{visible:v,children:[(0,c.jsx)(d,{}),(0,c.jsx)("h1",{className:"title",style:{fontSize:"3rem",marginBottom:20},children:"Congratulations"}),(0,c.jsxs)("p",{style:{color:"white",textAlign:"center",fontSize:"2rem"},children:["New editions have been minted please view your NFTs in"," ",(0,c.jsx)(r.Link,{to:"/artworks",children:"My Items"}),"."]}),(0,c.jsx)(m.Z,{onClick:(0,g.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:j(!1);case 3:case"end":return e.stop()}}),e)}))),className:"overlay-btn",children:"Got it"})]})]})})},zi=f.Z.Content,qi=function(){var e,t,n,r=(0,a.UO)().id,s=(0,b.useWallet)(),u=(0,i.useState)(0),l=u[0],d=u[1],p=(0,o.useConnection)(),f=gt(r),h="",x="";f.type===ut.NFT?h="Unique":f.type===ut.Master?(h="NFT 0",x=void 0!==f.maxSupply?f.maxSupply.toString():"Unlimited"):f.type===ut.Print&&(h="".concat(f.edition," of ").concat(f.supply));var y=jt(r),v=y.ref,j=y.data,w=null===j||void 0===j?void 0:j.description,N=null===j||void 0===j?void 0:j.attributes,P=(null===s||void 0===s||null===(e=s.publicKey)||void 0===e?void 0:e.toBase58())||"",S=(0,c.jsx)("div",{className:"info-header",children:(0,c.jsx)(Ci.Z,{color:"blue",children:"UNVERIFIED"})}),T=(0,c.jsxs)(c.Fragment,{children:[S,(0,c.jsx)("div",{style:{fontSize:12},children:(0,c.jsxs)("i",{children:["This artwork is still missing verification from"," ",null===(t=f.creators)||void 0===t?void 0:t.filter((function(e){return!e.verified})).length," contributors before it can be considered verified and sellable on the platform."]})}),(0,c.jsx)("br",{})]});return(0,c.jsx)(zi,{children:(0,c.jsx)(Ht.Z,{children:(0,c.jsxs)(qt.Z,{ref:v,children:[(0,c.jsx)(Ht.Z,{xs:{span:24},md:{span:12},style:{paddingRight:"30px"},children:(0,c.jsx)(ti,{style:{width:"100%",height:"auto",margin:"0 auto"},height:300,width:300,className:"artwork-image",pubkey:r,active:!0,allowMeshRender:!0,artView:!0})}),(0,c.jsxs)(Ht.Z,{xs:{span:24},md:{span:12},style:{textAlign:"left",fontSize:"1.4rem"},children:[(0,c.jsx)(qt.Z,{children:(0,c.jsx)("div",{style:{fontWeight:700,fontSize:"4rem"},children:f.title||(0,c.jsx)(Zi.Z,{paragraph:{rows:0}})})}),(0,c.jsxs)(qt.Z,{children:[(0,c.jsxs)(Ht.Z,{span:6,children:[(0,c.jsx)("h6",{children:"Royalties"}),(0,c.jsxs)("div",{className:"royalties",children:[((f.seller_fee_basis_points||0)/100).toFixed(2),"%"]})]}),(0,c.jsx)(Ht.Z,{span:12,children:(0,c.jsx)(Ei,{id:r})})]}),(0,c.jsx)(qt.Z,{children:(0,c.jsxs)(Ht.Z,{children:[(0,c.jsx)("h6",{style:{marginTop:5},children:"Created By"}),(0,c.jsx)("div",{className:"creators",children:(f.creators||[]).map((function(e,t){return(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:5},children:[(0,c.jsx)(ui,{creators:[e],size:64}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"creator-name",children:e.name||(0,o.shortenAddress)(e.address||"")}),(0,c.jsx)("div",{style:{marginLeft:10},children:!e.verified&&(e.address===P?(0,c.jsx)(m.Z,{onClick:(0,g.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G(p,s,r);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",!1);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,null,[[0,5]])}))),children:"Approve"}):S)})]})]},t)}))})]})}),(0,c.jsx)(qt.Z,{children:(0,c.jsxs)(Ht.Z,{children:[(0,c.jsx)("h6",{style:{marginTop:5},children:"Edition"}),(0,c.jsx)("div",{className:"art-edition",children:h})]})}),f.type===ut.Master&&(0,c.jsx)(qt.Z,{children:(0,c.jsxs)(Ht.Z,{children:[(0,c.jsx)("h6",{style:{marginTop:5},children:"Max Supply"}),(0,c.jsx)("div",{className:"art-edition",children:x})]})}),(0,c.jsx)(Ui,{id:r,onMint:(0,g.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d((function(e){return e+1}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))},l)]}),(0,c.jsxs)(Ht.Z,{span:"12",children:[(0,c.jsx)(Oi.Z,{}),(null===(n=f.creators)||void 0===n?void 0:n.find((function(e){return!e.verified})))&&T,(0,c.jsx)("br",{}),(0,c.jsx)("div",{className:"info-header",children:"ABOUT THE CREATION"}),(0,c.jsx)("div",{className:"info-content",children:w}),(0,c.jsx)("br",{})]}),(0,c.jsx)(Ht.Z,{span:"12",children:N&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Oi.Z,{}),(0,c.jsx)("br",{}),(0,c.jsx)("div",{className:"info-header",children:"Attributes"}),(0,c.jsx)(M.ZP,{size:"large",grid:{column:4},children:N.map((function(e){return(0,c.jsx)(M.ZP.Item,{children:(0,c.jsx)(zt.Z,{title:e.trait_type,children:e.value})},e.trait_type)}))})]})})]})})})},Hi=n(30358),Gi=n(98393),Yi=n(78819),Xi=n(6712),Qi=n(35281),Ji=n(13721),$i=n(23712),er=["className","small","category","image","animationURL","name","preview","creators","description","onClose","pubkey","height","artView","width","count"];function tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ir=zt.Z.Meta,rr=function(e){var t,n=e.className,i=e.small,r=e.category,a=e.image,o=e.animationURL,s=e.name,u=e.preview,l=e.creators,d=(e.description,e.onClose),p=e.pubkey,f=e.height,h=e.artView,x=e.width,b=e.count,y=(0,$i.Z)(e,er),v=gt(p);l=(null===v||void 0===v?void 0:v.creators)||l||[],s=(null===v||void 0===v?void 0:v.title)||s||" ";var g="";v.type===ut.NFT?g="Unique":v.type===ut.Master?g="NFT 0":v.type===ut.Print&&(g="".concat(v.edition," of ").concat(v.supply));var j=(0,c.jsxs)(zt.Z,nr(nr({hoverable:!0,className:"art-card ".concat(i?"small":""," ").concat(null!==n&&void 0!==n?n:"")},y),{},{children:[d&&(0,c.jsx)(m.Z,{className:"card-close-button",shape:"circle",onClick:function(e){e.stopPropagation(),e.preventDefault(),d&&d()},children:"X"}),(0,c.jsxs)("div",{className:"art-card__header",children:[(0,c.jsx)(ui,{creators:l,size:32}),(0,c.jsx)("div",{className:"edition-badge",children:g})]}),(0,c.jsx)("div",{className:"art-content__wrapper",children:(0,c.jsx)(ti,{pubkey:p,uri:a,animationURL:o,category:r,preview:u,height:f,width:x,artView:h})}),(0,c.jsx)(ir,{title:"".concat(s),description:(0,c.jsx)(c.Fragment,{children:b&&(0,c.jsxs)("div",{className:"edition-badge",children:["Selected count: ",b]})})})]}));return null!==(t=v.creators)&&void 0!==t&&t.find((function(e){return!e.verified}))?(0,c.jsx)(A.Z.Ribbon,{text:"Unverified",children:j}):j},ar=["fetchOptions","debounceTimeout"];function or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?or(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cr(e){var t=e.fetchOptions,n=e.debounceTimeout,r=void 0===n?800:n,a=(0,$i.Z)(e,ar),o=(0,i.useState)(!1),s=o[0],u=o[1],l=(0,i.useState)([]),d=l[0],p=l[1],f=(0,i.useRef)(0),m=(0,i.useMemo)((function(){return Ri()((function(e){f.current+=1;var n=f.current;p([]),u(!0),t(e).then((function(e){n===f.current&&(p(e),u(!1))}))}),r)}),[t,r]);return(0,c.jsx)($t.Z,sr(sr({labelInValue:!0,filterOption:!1,onSearch:m,notFoundContent:s?(0,c.jsx)(Ji.Z,{size:"small"}):null},a),{},{options:d}))}var ur=function(e){var t=(0,Xe.useMeta)().whitelistedCreatorsByCreator,n=i.useState([]),r=(0,Kt.Z)(n,2),a=r[0],s=r[1];return(0,c.jsx)(cr,{className:"user-selector",mode:"multiple",size:"large",value:a,placeholder:"Select creator",fetchOptions:function(){var e=(0,g.Z)(k().mark((function e(n){var i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object.values(t).filter((function(e){return e.info.activated})).map((function(e){return{label:e.info.name||(0,o.shortenAddress)(e.info.address),value:e.info.address}})),e.abrupt("return",i);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onChange:function(t){e.setCreators(t),s(t)},style:{width:"100%"}})},lr=n(5634),dr=new R.PublicKey("es7DKe3NyR1u8MJNuv6QV6rbhmZQkyYUpgKpGJNuTTc"),pr=n(48834).Buffer;function fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hr=function(){var e=(0,g.Z)(k().mark((function e(t){var n,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(o.ARWEAVE_UPLOAD_ENDPOINT,{method:"POST",body:t});case 2:if((n=e.sent).ok){e.next=5;break}return e.abrupt("return",Promise.reject(new Error("Arweave issues. Please wait and then try again.")));case 5:return e.next=7,n.json();case 7:if(!(i=e.sent).error){e.next=11;break}return console.log(i.error),e.abrupt("return",Promise.reject(new Error(String(n))));case 11:return e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xr=function(){var e=(0,g.Z)(k().mark((function e(t,n,i,r,a,s,u){var l,d,p,f,m,h,x,b,y,g,j,w,N,P,S,M,T,A,C,O,E,B,K,I;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n&&void 0!==n&&n.publicKey){e.next=2;break}return e.abrupt("return");case 2:return p={name:a.name,symbol:a.symbol,description:a.description,seller_fee_basis_points:a.sellerFeeBasisPoints,image:a.image,animation_url:a.animation_url,attributes:a.attributes,external_url:a.external_url,properties:mr(mr({},a.properties),{},{creators:null===(l=a.creators)||void 0===l?void 0:l.map((function(e){return{address:e.address,share:e.share}}))})},f=[].concat((0,v.Z)(r),[new File([JSON.stringify(p)],"metadata.json")]),e.next=6,br(n,f,a);case 6:return m=e.sent,h=m.instructions,x=m.signers,s(1),b=(0,o.programIds)().token,e.next=13,t.getMinimumBalanceForRentExemption(Z.MintLayout.span);case 13:return y=e.sent,g=n.publicKey.toBase58(),j=(0,v.Z)(h),w=(0,v.Z)(x),N=(0,o.createMint)(j,n.publicKey,y,0,(0,o.toPublicKey)(g),(0,o.toPublicKey)(g),w).toBase58(),e.next=20,(0,o.findProgramAddress)([n.publicKey.toBuffer(),(0,o.programIds)().token.toBuffer(),(0,o.toPublicKey)(N).toBuffer()],(0,o.programIds)().associatedToken);case 20:return P=e.sent[0],(0,o.createAssociatedTokenAccountInstruction)(j,(0,o.toPublicKey)(P),n.publicKey,n.publicKey,(0,o.toPublicKey)(N)),e.next=24,(0,o.createMetadata)(new o.Data({symbol:a.symbol,name:a.name,uri:" ".repeat(64),sellerFeeBasisPoints:a.sellerFeeBasisPoints,creators:a.creators}),g,N,g,j,n.publicKey.toBase58());case 24:return S=e.sent,s(2),e.next=28,(0,o.sendTransactionWithRetry)(t,n,j,w,"single");case 28:return M=e.sent,T=M.txid,s(3),e.prev=31,e.next=34,t.confirmTransaction(T,"max");case 34:s(4),e.next=39;break;case 37:e.prev=37,e.t0=e.catch(31);case 39:return e.next=41,t.getParsedConfirmedTransaction(T,"confirmed");case 41:return s(5),(A=new FormData).append("transaction",T),A.append("env",i),C=f.reduce((function(e,t){return e[t.name]=[{name:"mint",value:N}],e}),{}),A.append("tags",JSON.stringify(C)),f.map((function(e){return A.append("file[]",e)})),s(6),e.next=51,hr(A);case 51:if(O=e.sent,console.log(O.messages),null===(E=null===(d=O.messages)||void 0===d?void 0:d.find((function(e){return"manifest.json"===e.filename})))||void 0===E||!E.transactionId||!n.publicKey){e.next=69;break}return B=[],K=[],I="http://safestore.testnet.darkartlabs.tech:1984/".concat(E.transactionId),e.next=60,(0,o.updateMetadata)(new o.Data({name:a.name,symbol:a.symbol,uri:I,creators:a.creators,sellerFeeBasisPoints:a.sellerFeeBasisPoints}),void 0,void 0,N,g,B,S);case 60:return B.push(Z.Token.createMintToInstruction(b,(0,o.toPublicKey)(N),(0,o.toPublicKey)(P),(0,o.toPublicKey)(g),[],1)),s(7),e.next=64,(0,o.createMasterEdition)(void 0!==u?new(_())(u):void 0,N,g,g,g,B);case 64:return s(8),e.next=67,(0,o.sendTransactionWithRetry)(t,n,B,K);case 67:e.sent,(0,o.notify)({message:"Art created on safecoin",description:(0,c.jsx)("a",{href:I,target:"_blank",rel:"noopener noreferrer",children:"Arweave Link"}),type:"success"});case 69:return e.abrupt("return",{metadataAccount:S});case 70:case"end":return e.stop()}}),e,null,[[31,37]])})));return function(t,n,i,r,a,o,s){return e.apply(this,arguments)}}(),br=function(){var e=(0,g.Z)(k().mark((function e(t,n,i){var r,a,s,c,u,l;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,o.programIds)().memo,a=[],s=[],!t.publicKey){e.next=14;break}return e.t0=a,e.t1=R.SystemProgram,e.t2=t.publicKey,e.t3=dr,e.next=10,(0,o.getAssetCostToStore)(n);case 10:e.t4=e.sent,e.t5={fromPubkey:e.t2,toPubkey:e.t3,lamports:e.t4},e.t6=e.t1.transfer.call(e.t1,e.t5),e.t0.push.call(e.t0,e.t6);case 14:c=0;case 15:if(!(c<n.length)){e.next=27;break}return u=lr.createHash("sha256"),e.t7=u,e.next=20,n[c].text();case 20:e.t8=e.sent,e.t7.update.call(e.t7,e.t8),l=u.digest("hex"),a.push(new R.TransactionInstruction({keys:[],programId:r,data:pr.from(l)}));case 24:c++,e.next=15;break;case 27:return e.abrupt("return",{instructions:a,signers:s});case 28:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),yr=n(48834).Buffer;function vr(e,t,n,i){return gr.apply(this,arguments)}function gr(){return(gr=(0,g.Z)(k().mark((function e(t,n,i,r){var a,s,c,u,l,d,p,f,m,h,x,b;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:return a=o.utils.programIds(),s=[],c=[],e.next=7,t.getMinimumBalanceForRentExemption(Z.AccountLayout.span);case 7:return u=e.sent,e.next=10,t.getMinimumBalanceForRentExemption(Z.MintLayout.span);case 10:return l=e.sent,e.next=13,t.getMinimumBalanceForRentExemption(D.MAX_VAULT_SIZE);case 13:return d=e.sent,p=R.Keypair.generate(),e.next=17,(0,o.findProgramAddress)([yr.from(D.VAULT_PREFIX),(0,o.toPublicKey)(a.vault).toBuffer(),p.publicKey.toBuffer()],(0,o.toPublicKey)(a.vault));case 17:return f=e.sent[0],m=(0,o.createMint)(c,n.publicKey,l,0,(0,o.toPublicKey)(f),(0,o.toPublicKey)(f),s).toBase58(),h=(0,F.createTokenAccount)(c,n.publicKey,u,(0,o.toPublicKey)(i),(0,o.toPublicKey)(f),s).toBase58(),x=(0,F.createTokenAccount)(c,n.publicKey,u,(0,o.toPublicKey)(m),(0,o.toPublicKey)(f),s).toBase58(),b=R.SystemProgram.createAccount({fromPubkey:n.publicKey,newAccountPubkey:p.publicKey,lamports:d,space:D.MAX_VAULT_SIZE,programId:(0,o.toPublicKey)(a.vault)}),c.push(b),s.push(p),e.next=26,(0,D.initVault)(!0,m,h,x,p.publicKey.toBase58(),n.publicKey.toBase58(),r,c);case 26:return e.abrupt("return",{vault:p.publicKey.toBase58(),fractionalMint:m,redeemTreasury:h,fractionTreasury:x,signers:s,instructions:c});case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jr=n(11459),kr=n(48834).Buffer;function wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pr(e,t,n){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,g.Z)(k().mark((function e(t,n,i){var r,a,s,c,u;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:return r=o.utils.programIds(),a=[],s=[],e.next=7,(0,o.findProgramAddress)([kr.from(jr.AUCTION_PREFIX),(0,o.toPublicKey)(r.auction).toBuffer(),(0,o.toPublicKey)(n).toBuffer()],(0,o.toPublicKey)(r.auction));case 7:return c=e.sent[0],u=new o.CreateAuctionArgs(Nr(Nr({},i),{},{authority:t.publicKey.toBase58(),resource:n})),(0,jr.createAuction)(u,t.publicKey.toBase58(),s),e.abrupt("return",{instructions:s,signers:a,auction:c});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Mr=n(66714),Tr=n(7103);function Ar(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Cr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cr(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Cr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Zr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zr(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Er=Hi.Z.Step,Br=Gi.Z.Dragger,Kr=Yi.Z.Text,Ir=function(){var e=(0,o.useConnection)(),t=(0,o.useConnectionConfig)().endpoint,n=(0,b.useWallet)(),r=(0,i.useState)(),s=r[0],u=r[1],l=(0,a.UO)().step_param,d=(0,a.k6)(),p=xt().width,f=(0,i.useState)(0),h=f[0],x=f[1],y=(0,i.useState)(0),v=y[0],j=y[1],w=(0,i.useState)(!0),N=w[0],P=w[1],S=(0,i.useState)(!1),M=S[0],T=S[1],A=(0,i.useState)(void 0),C=A[0],Z=A[1],O=(0,i.useState)([]),E=O[0],B=O[1],K=(0,i.useState)({name:"",symbol:"",description:"",external_url:"",image:"",animation_url:void 0,attributes:void 0,seller_fee_basis_points:0,creators:[],properties:{files:[],category:o.MetadataCategory.Image}}),I=K[0],_=K[1],R=(0,i.useCallback)((function(e){d.push("/art/create/".concat(e.toString())),0===e&&P(!0)}),[d]);(0,i.useEffect)((function(){l?j(parseInt(l)):R(0)}),[l,R]);var F=function(){var i=(0,g.Z)(k().mark((function i(){var r,a,o,s;return k().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a={name:I.name,symbol:I.symbol,creators:I.creators,description:I.description,sellerFeeBasisPoints:I.seller_fee_basis_points,image:I.image,animation_url:I.animation_url,attributes:I.attributes,external_url:I.external_url,properties:{files:I.properties.files,category:null===(r=I.properties)||void 0===r?void 0:r.category}},P(!1),T(!0),i.prev=3,i.next=6,xr(e,n,t.name,E,a,x,null===(o=I.properties)||void 0===o?void 0:o.maxSupply);case 6:(s=i.sent)&&Z(s),u(""),i.next=14;break;case 11:i.prev=11,i.t0=i.catch(3),u(i.t0.message);case 14:return i.prev=14,T(!1),i.finish(14);case 17:case"end":return i.stop()}}),i,null,[[3,11,14,17]])})));return function(){return i.apply(this,arguments)}}();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(qt.Z,{className:"creator-base-page",style:{paddingTop:50},children:[N&&(0,c.jsx)(Ht.Z,{span:24,md:4,children:(0,c.jsxs)(Hi.Z,{progressDot:!0,direction:p<768?"horizontal":"vertical",current:v,style:{width:"fit-content",margin:"0 auto 30px auto",overflowX:"auto",maxWidth:"100%"},children:[(0,c.jsx)(Er,{title:"Category"}),(0,c.jsx)(Er,{title:"Upload"}),(0,c.jsx)(Er,{title:"Info"}),(0,c.jsx)(Er,{title:"Royalties"}),(0,c.jsx)(Er,{title:"Launch"})]})}),(0,c.jsxs)(Ht.Z,Or(Or({span:24},N?{md:20}:{md:24}),{},{children:[0===v&&(0,c.jsx)(_r,{confirm:function(e){_(Or(Or({},I),{},{properties:Or(Or({},I.properties),{},{category:e})})),R(1)}}),1===v&&(0,c.jsx)(Rr,{attributes:I,setAttributes:_,files:E,setFiles:B,confirm:function(){return R(2)}}),2===v&&(0,c.jsx)(Dr,{attributes:I,files:E,setAttributes:_,confirm:function(){return R(3)}}),3===v&&(0,c.jsx)(Lr,{attributes:I,confirm:function(){return R(4)},setAttributes:_}),4===v&&(0,c.jsx)(Vr,{attributes:I,files:E,confirm:function(){return R(5)},connection:e}),5===v&&(0,c.jsx)(Ur,{mint:F,minting:M,step:h,confirm:function(){return R(6)}}),0<v&&v<5&&(0,c.jsx)("div",{style:{margin:"auto",width:"fit-content"},children:(0,c.jsx)(m.Z,{onClick:function(){return R(v-1)},children:"Back"})})]}))]}),(0,c.jsx)(o.MetaplexOverlay,{visible:6===v,children:(0,c.jsx)(zr,{nft:C,alert:s})})]})},_r=function(e){var t=xt().width;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(qt.Z,{className:"call-to-action",children:[(0,c.jsx)("h2",{children:"Create a new item"}),(0,c.jsxs)("p",{children:["First time creating on Metaplex?"," ",(0,c.jsx)("a",{href:"https://docs.metaplex.com/create-store/sell",target:"_blank",rel:"noreferrer",children:"Read our creators\u2019 guide."})]})]}),(0,c.jsx)(qt.Z,{justify:t<768?"center":"start",children:(0,c.jsxs)(Ht.Z,{children:[(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{className:"type-btn",size:"large",onClick:function(){return e.confirm(o.MetadataCategory.Image)},children:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:"Image"}),(0,c.jsx)("div",{className:"type-btn-description",children:"JPG, PNG, GIF"})]})})}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{className:"type-btn",size:"large",onClick:function(){return e.confirm(o.MetadataCategory.Video)},children:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:"Video"}),(0,c.jsx)("div",{className:"type-btn-description",children:"MP4, MOV"})]})})}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{className:"type-btn",size:"large",onClick:function(){return e.confirm(o.MetadataCategory.Audio)},children:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:"Audio"}),(0,c.jsx)("div",{className:"type-btn-description",children:"MP3, WAV, FLAC"})]})})}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{className:"type-btn",size:"large",onClick:function(){return e.confirm(o.MetadataCategory.VR)},children:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:"AR/3D"}),(0,c.jsx)("div",{className:"type-btn-description",children:"GLB"})]})})}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{className:"type-btn",size:"large",onClick:function(){return e.confirm(o.MetadataCategory.HTML)},children:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:"HTML Asset"}),(0,c.jsx)("div",{className:"type-btn-description",children:"HTML"})]})})})]})})]})},Rr=function(e){var t,n,r,a,s,u=(0,i.useState)(null===(t=e.files)||void 0===t?void 0:t[0]),l=u[0],d=u[1],p=(0,i.useState)(null===(n=e.files)||void 0===n?void 0:n[1]),f=p[0],h=p[1],x=(0,i.useState)(),b=x[0],y=x[1],v=(0,i.useState)(""),j=v[0],w=v[1],N=(0,i.useState)(""),P=N[0],S=N[1],M=!(l||!P&&j);(0,i.useEffect)((function(){e.setAttributes(Or(Or({},e.attributes),{},{properties:Or(Or({},e.attributes.properties),{},{files:[]})}))}),[]);var T=e.attributes.properties.category,A="http://example.com/path/to/".concat(T===o.MetadataCategory.Image?"image":"file");return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(qt.Z,{className:"call-to-action",children:[(0,c.jsx)("h2",{children:"Now, let's upload your creation"}),(0,c.jsx)("p",{style:{fontSize:"1.2rem"},children:"Your file will be uploaded to the decentralized web via Arweave. Depending on file type, can take up to 1 minute. Arweave is a new type of storage that backs data with sustainable and perpetual endowments, allowing users and developers to truly store data forever \u2013 for the very first time."})]}),(0,c.jsxs)(qt.Z,{className:"content-action",children:[(0,c.jsx)("h3",{children:"Upload a cover image (PNG, JPG, GIF, SVG)"}),(0,c.jsxs)(Br,{accept:".png,.jpg,.gif,.mp4,.svg",style:{padding:20,background:"rgba(255, 255, 255, 0.08)"},multiple:!1,onRemove:function(){h(void 0),d(void 0)},customRequest:function(e){var t;null===e||void 0===e||null===(t=e.onSuccess)||void 0===t||t.call(e,{},null)},fileList:l?[l]:[],onChange:function(){var e=(0,g.Z)(k().mark((function e(t){var n,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.file.originFileObj){e.next=3;break}return e.abrupt("return");case 3:if(!((i=n.size/1024)<25)){e.next=7;break}return y("The file ".concat(n.name," is too small. It is ").concat(Math.round(10*i)/10,"KB but should be at least 25KB.")),e.abrupt("return");case 7:d(n),y(void 0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[(0,c.jsx)("div",{className:"ant-upload-drag-icon",children:(0,c.jsx)("h3",{style:{fontWeight:700},children:"Upload your cover image (PNG, JPG, GIF, SVG)"})}),b?(0,c.jsx)(Kr,{type:"danger",children:b}):(0,c.jsx)("p",{className:"ant-upload-text",style:{color:"#6d6d6d"},children:"Drag and drop, or click to browse"})]})]}),(null===(r=e.attributes.properties)||void 0===r?void 0:r.category)!==o.MetadataCategory.Image&&(0,c.jsxs)(qt.Z,{className:"content-action",style:{marginBottom:5,marginTop:30},children:[(0,c.jsx)("h3",{children:function(e){switch(e){case o.MetadataCategory.Audio:return"Upload your audio creation (MP3, FLAC, WAV)";case o.MetadataCategory.Image:return"Upload your image creation (PNG, JPG, GIF)";case o.MetadataCategory.Video:return"Upload your video creation (MP4, MOV, GLB)";case o.MetadataCategory.VR:return"Upload your AR/VR creation (GLB)";case o.MetadataCategory.HTML:return"Upload your HTML File (HTML)";default:return"Please go back and choose a category"}}(null===(a=e.attributes.properties)||void 0===a?void 0:a.category)}),(0,c.jsxs)(Br,{accept:function(e){switch(e){case o.MetadataCategory.Audio:return".mp3,.flac,.wav";case o.MetadataCategory.Image:return".png,.jpg,.gif";case o.MetadataCategory.Video:return".mp4,.mov,.webm";case o.MetadataCategory.VR:return".glb";case o.MetadataCategory.HTML:return".html";default:return""}}(null===(s=e.attributes.properties)||void 0===s?void 0:s.category),style:{padding:20,background:"rgba(255, 255, 255, 0.08)"},multiple:!1,customRequest:function(e){var t;null===e||void 0===e||null===(t=e.onSuccess)||void 0===t||t.call(e,{},null)},fileList:f?[f]:[],onChange:function(){var e=(0,g.Z)(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.file.originFileObj,w(""),S(""),n&&h(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onRemove:function(){h(void 0)},children:[(0,c.jsx)("div",{className:"ant-upload-drag-icon",children:(0,c.jsx)("h3",{style:{fontWeight:700},children:"Upload your creation"})}),(0,c.jsx)("p",{className:"ant-upload-text",style:{color:"#6d6d6d"},children:"Drag and drop, or click to browse"})]})]}),(0,c.jsx)(Bi.Z.Item,{className:"url-form-action",style:{width:"100%",flexDirection:"column",paddingTop:30,marginBottom:4},label:(0,c.jsx)("h3",{children:"OR use absolute URL to content"}),labelAlign:"left",colon:!1,validateStatus:P?"error":"success",help:P,children:(0,c.jsx)(Ki.Z,{disabled:!!f,placeholder:A,value:j,onChange:function(e){return w(e.target.value)},onFocus:function(){return S("")},onBlur:function(){if(j)try{new URL(j),w(j),S("")}catch(e){console.error(e),S("Please enter a valid absolute URL")}else S("")}})}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{type:"primary",size:"large",disabled:M,onClick:(0,g.Z)(k().mark((function t(){var n,i,r;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setAttributes(Or(Or({},e.attributes),{},{properties:Or(Or({},e.attributes.properties),{},{files:[l,f,j].filter((function(e){return e})).map((function(e){return{uri:"string"===typeof e?e:(null===e||void 0===e?void 0:e.name)||"",type:"string"!==typeof e&&e&&(e.type||zn(e.name.split(".")))||"unknown"}}))}),image:(null===l||void 0===l?void 0:l.name)||j||"",animation_url:(null===(n=e.attributes.properties)||void 0===n?void 0:n.category)!==o.MetadataCategory.Image&&j?j:f&&f.name})),t.next=3,fetch(j).then((function(e){return e.blob()}));case 3:i=t.sent,r=[l,f,j?new File([i],j):""].filter((function(e){return e})),e.setFiles(r),e.confirm();case 7:case"end":return t.stop()}}),t)}))),style:{marginTop:24},className:"action-btn",children:"Continue to Mint"})})]})},Fr=function(e,t){var n=(0,i.useState)({image:"",animation_url:""}),r=n[0],a=n[1];return(0,i.useEffect)((function(){if(t.image){var n=e.find((function(e){return e.name===t.image}));if(n){var i=new FileReader;i.onload=function(e){a((function(t){var n;return Or(Or({},t||{}),{},{image:(null===(n=e.target)||void 0===n?void 0:n.result)||""})}))},n&&i.readAsDataURL(n)}}if(t.animation_url){var r=e.find((function(e){return e.name===t.animation_url}));if(r){var o=new FileReader;o.onload=function(e){a((function(t){var n;return Or(Or({},t||{}),{},{animation_url:(null===(n=e.target)||void 0===n?void 0:n.result)||""})}))},r&&o.readAsDataURL(r)}}}),[e,t]),r},Dr=function(e){var t,n=(0,i.useState)([]),r=n[0],a=(n[1],(0,i.useState)([])),o=(a[0],a[1]),s=Fr(e.files,e.attributes),u=s.image,l=(s.animation_url,Bi.Z.useForm()),d=(0,Kt.Z)(l,1)[0];return(0,i.useEffect)((function(){o(r.map((function(e){return{creatorKey:e.key,amount:Math.trunc(100/r.length)}})))}),[r]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(qt.Z,{className:"call-to-action",children:[(0,c.jsx)("h2",{children:"Describe your item"}),(0,c.jsx)("p",{children:"Provide detailed description of your creative process to engage with your audience."})]}),(0,c.jsxs)(qt.Z,{className:"content-action",justify:"space-around",children:[(0,c.jsx)(Ht.Z,{children:e.attributes.image&&(0,c.jsx)(rr,{image:u,animationURL:e.attributes.animation_url,category:null===(t=e.attributes.properties)||void 0===t?void 0:t.category,name:e.attributes.name,symbol:e.attributes.symbol,small:!0,artView:!(e.files.length>1),className:"art-create-card"})}),(0,c.jsxs)(Ht.Z,{className:"section",style:{minWidth:300},children:[(0,c.jsxs)("label",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"Title"}),(0,c.jsx)(Ki.Z,{autoFocus:!0,className:"input",placeholder:"Max 50 characters",maxLength:50,allowClear:!0,value:e.attributes.name,onChange:function(t){return e.setAttributes(Or(Or({},e.attributes),{},{name:t.target.value}))}})]}),(0,c.jsxs)("label",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"Symbol"}),(0,c.jsx)(Ki.Z,{className:"input",placeholder:"Max 10 characters",maxLength:10,allowClear:!0,value:e.attributes.symbol,onChange:function(t){return e.setAttributes(Or(Or({},e.attributes),{},{symbol:t.target.value}))}})]}),(0,c.jsxs)("label",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"Description"}),(0,c.jsx)(Ki.Z.TextArea,{className:"input textarea",placeholder:"Max 500 characters",maxLength:500,value:e.attributes.description,onChange:function(t){return e.setAttributes(Or(Or({},e.attributes),{},{description:t.target.value}))},allowClear:!0})]}),(0,c.jsxs)("label",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"Maximum Supply"}),(0,c.jsx)(Ii.Z,{placeholder:"Quantity",onChange:function(t){e.setAttributes(Or(Or({},e.attributes),{},{properties:Or(Or({},e.attributes.properties),{},{maxSupply:t})}))},className:"royalties-input"})]}),(0,c.jsx)("label",{className:"action-field",children:(0,c.jsx)("span",{className:"field-title",children:"Attributes"})}),(0,c.jsx)(Bi.Z,{name:"dynamic_attributes",form:d,autoComplete:"off",children:(0,c.jsx)(Bi.Z.List,{name:"attributes",children:function(e,t){var n=t.add,i=t.remove;return(0,c.jsxs)(c.Fragment,{children:[e.map((function(e){var t=e.key,n=e.name;return(0,c.jsxs)(Xi.Z,{align:"baseline",children:[(0,c.jsx)(Bi.Z.Item,{name:[n,"trait_type"],hasFeedback:!0,children:(0,c.jsx)(Ki.Z,{placeholder:"trait_type (Optional)"})}),(0,c.jsx)(Bi.Z.Item,{name:[n,"value"],rules:[{required:!0,message:"Missing value"}],hasFeedback:!0,children:(0,c.jsx)(Ki.Z,{placeholder:"value"})}),(0,c.jsx)(Bi.Z.Item,{name:[n,"display_type"],hasFeedback:!0,children:(0,c.jsx)(Ki.Z,{placeholder:"display_type (Optional)"})}),(0,c.jsx)(Mr.Z,{onClick:function(){return i(n)}})]},t)})),(0,c.jsx)(Bi.Z.Item,{children:(0,c.jsx)(m.Z,{type:"dashed",onClick:function(){return n()},block:!0,icon:(0,c.jsx)(Tr.Z,{}),children:"Add attribute"})})]})}})})]})]}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{type:"primary",size:"large",onClick:function(){d.validateFields().then((function(t){var n,i=t.attributes,r=Ar(i||[]);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=Number(a.value);isNaN(o)||(a.value=o)}}catch(s){r.e(s)}finally{r.f()}console.log("Adding NFT attributes:",i),e.setAttributes(Or(Or({},e.attributes),{},{attributes:i})),e.confirm()}))},className:"action-btn",children:"Continue to royalties"})})]})},Wr=function(e){return(0,c.jsx)(Ht.Z,{children:(0,c.jsx)(qt.Z,{gutter:[0,24],children:e.creators.map((function(t,n){var i=e.royalties.find((function(e){return e.creatorKey===t.key}));if(!i)return null;var r=i.amount,a=function(t){e.setRoyalties(e.royalties.map((function(e){return Or(Or({},e),{},{amount:e.creatorKey===i.creatorKey?t:e.amount})})))};return(0,c.jsx)(Ht.Z,{span:24,children:(0,c.jsxs)(qt.Z,{align:"middle",gutter:[0,16],style:{margin:"5px auto"},children:[(0,c.jsx)(Ht.Z,{span:4,style:{padding:10},children:t.label}),(0,c.jsx)(Ht.Z,{span:3,children:(0,c.jsx)(Ii.Z,{min:0,max:100,formatter:function(e){return"".concat(e,"%")},value:r,parser:function(e){var t;return parseInt(null!==(t=null===e||void 0===e?void 0:e.replace("%",""))&&void 0!==t?t:"0")},onChange:a,className:"royalties-input"})}),(0,c.jsx)(Ht.Z,{span:4,style:{paddingLeft:12},children:(0,c.jsx)(Qi.Z,{value:r,onChange:a})}),e.isShowErrors&&0===r&&(0,c.jsx)(Ht.Z,{style:{paddingLeft:12},children:(0,c.jsx)(Kr,{type:"danger",children:"The split percentage for this creator cannot be 0%."})})]})},n)}))})})},Lr=function(e){var t=(0,b.useWallet)(),n=t.publicKey,r=t.connected,a=(0,i.useState)([]),s=a[0],u=a[1],l=(0,i.useState)([]),d=l[0],p=l[1],f=(0,i.useState)([]),h=f[0],x=f[1],y=(0,i.useState)(0),g=y[0],j=y[1],k=(0,i.useState)(!1),w=k[0],N=k[1],P=(0,i.useState)(!1),S=P[0],M=P[1];return(0,i.useEffect)((function(){if(n){var e=n.toBase58();p([{key:e,label:(0,o.shortenAddress)(e),value:e}])}}),[r,u]),(0,i.useEffect)((function(){x([].concat((0,v.Z)(d),(0,v.Z)(s)).map((function(e){return{creatorKey:e.key,amount:Math.trunc(100/[].concat((0,v.Z)(d),(0,v.Z)(s)).length)}})))}),[s,d]),(0,i.useEffect)((function(){var e=h.reduce((function(e,t){return e+t.amount}),0);j(e)}),[h]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(qt.Z,{className:"call-to-action",style:{marginBottom:20},children:[(0,c.jsx)("h2",{children:"Set royalties and creator splits"}),(0,c.jsx)("p",{children:"Royalties ensure that you continue to get compensated for your work after its initial sale."})]}),(0,c.jsx)(qt.Z,{className:"content-action",style:{marginBottom:20},children:(0,c.jsxs)("label",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"Royalty Percentage"}),(0,c.jsx)("p",{children:"This is how much of each secondary sale will be paid out to the creators."}),(0,c.jsx)(Ii.Z,{autoFocus:!0,min:0,max:100,placeholder:"Between 0 and 100",onChange:function(t){e.setAttributes(Or(Or({},e.attributes),{},{seller_fee_basis_points:100*t}))},className:"royalties-input"})]})}),[].concat((0,v.Z)(d),(0,v.Z)(s)).length>0&&(0,c.jsx)(qt.Z,{children:(0,c.jsxs)("label",{className:"action-field",style:{width:"100%"},children:[(0,c.jsx)("span",{className:"field-title",children:"Creators Split"}),(0,c.jsx)("p",{children:"This is how much of the proceeds from the initial sale and any royalties will be split out amongst the creators."}),(0,c.jsx)(Wr,{creators:[].concat((0,v.Z)(d),(0,v.Z)(s)),royalties:h,setRoyalties:x,isShowErrors:S})]})}),(0,c.jsxs)(qt.Z,{children:[(0,c.jsxs)("span",{onClick:function(){return N(!0)},style:{padding:10,marginBottom:10},children:[(0,c.jsx)("span",{style:{color:"white",fontSize:25,padding:"0px 8px 3px 8px",background:"rgb(57, 57, 57)",borderRadius:"50%",marginRight:5,verticalAlign:"middle"},children:"+"}),(0,c.jsx)("span",{style:{color:"rgba(255, 255, 255, 0.7)",verticalAlign:"middle",lineHeight:1},children:"Add another creator"})]}),(0,c.jsx)(o.MetaplexModal,{visible:w,onCancel:function(){return N(!1)},children:(0,c.jsxs)("label",{className:"action-field",style:{width:"100%"},children:[(0,c.jsx)("span",{className:"field-title",children:"Creators"}),(0,c.jsx)(ur,{setCreators:u})]})})]}),S&&100!==g&&(0,c.jsx)(qt.Z,{children:(0,c.jsxs)(Kr,{type:"danger",style:{paddingBottom:14},children:["The split percentages for each creator must add up to 100%. Current total split percentage is ",g,"%."]})}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{type:"primary",size:"large",onClick:function(){if(0===h.filter((function(e){return 0===e.amount})).length&&100===g){var t=[].concat((0,v.Z)(d),(0,v.Z)(s)).map((function(e){var t;return new o.Creator({address:e.value,verified:e.value===(null===n||void 0===n?void 0:n.toBase58()),share:(null===(t=h.find((function(t){return t.creatorKey===e.value})))||void 0===t?void 0:t.amount)||Math.round(100/h.length)})})),i=t.reduce((function(e,t){return e+t.share}),0);i>100&&t.length&&(t[0].share-=i-100),e.setAttributes(Or(Or({},e.attributes),{},{creators:t})),e.confirm()}else M(!0)},className:"action-btn",children:"Continue to review"})})]})},Vr=function(e){var t,n,r=(0,i.useState)(0),a=r[0],s=r[1],u=Fr(e.files,e.attributes),l=u.image,d=(u.animation_url,e.files),p=e.attributes;return(0,i.useEffect)((function(){var t=Promise.all([e.connection.getMinimumBalanceForRentExemption(Z.MintLayout.span),e.connection.getMinimumBalanceForRentExemption(o.MAX_METADATA_LEN)]);d.length&&(0,o.getAssetCostToStore)([].concat((0,v.Z)(d),[new File([JSON.stringify(p)],"metadata.json")])).then(function(){var e=(0,g.Z)(k().mark((function e(n){var i,r,a,c,u,l;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n/o.LAMPORT_MULTIPLIER,e.next=3,t;case 3:r=e.sent,a=(0,Kt.Z)(r,2),c=a[0],u=a[1],l=(u+c)/o.LAMPORT_MULTIPLIER,s(i+l);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[d,p,s]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(qt.Z,{className:"call-to-action",children:[(0,c.jsx)("h2",{children:"Launch your creation"}),(0,c.jsx)("p",{children:"Provide detailed description of your creative process to engage with your audience."})]}),(0,c.jsxs)(qt.Z,{className:"content-action",justify:"space-around",children:[(0,c.jsx)(Ht.Z,{children:e.attributes.image&&(0,c.jsx)(rr,{image:l,animationURL:e.attributes.animation_url,category:null===(t=e.attributes.properties)||void 0===t?void 0:t.category,name:e.attributes.name,symbol:e.attributes.symbol,small:!0,artView:"unknown"===(null===(n=e.files[1])||void 0===n?void 0:n.type),className:"art-create-card"})}),(0,c.jsxs)(Ht.Z,{className:"section",style:{minWidth:300},children:[(0,c.jsx)(ni.Z,{className:"create-statistic",title:"Royalty Percentage",value:e.attributes.seller_fee_basis_points/100,precision:2,suffix:"%"}),a?(0,c.jsx)(oi,{title:"Cost to Create",amount:a.toFixed(5),tokenInfo:nt().tokenMap.get(o.WRAPPED_SOL_MINT.toString())}):(0,c.jsx)(Ji.Z,{})]})]}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{type:"primary",size:"large",onClick:e.confirm,className:"action-btn",children:"Pay with SAFE"})})]})},Ur=function(e){(0,i.useEffect)((function(){(function(){var t=(0,g.Z)(k().mark((function t(){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.mint();case 2:e.confirm();case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var t=function(e,t){return e===t?(0,c.jsx)(N.Z,{}):null};return(0,c.jsxs)("div",{style:{marginTop:70,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,c.jsx)(Ji.Z,{size:"large"}),(0,c.jsx)(zt.Z,{children:(0,c.jsxs)(Hi.Z,{direction:"vertical",current:e.step,children:[(0,c.jsx)(Er,{className:"white-description",title:"Minting",description:"Starting Mint Process",icon:t(e.step,0)}),(0,c.jsx)(Er,{className:"white-description",title:"Preparing Assets",icon:t(e.step,1)}),(0,c.jsx)(Er,{className:"white-description",title:"Signing Metadata Transaction",description:"Approve the transaction from your wallet",icon:t(e.step,2)}),(0,c.jsx)(Er,{className:"white-description",title:"Sending Transaction to safecoin",description:"This will take a few seconds.",icon:t(e.step,3)}),(0,c.jsx)(Er,{className:"white-description",title:"Waiting for Initial Confirmation",icon:t(e.step,4)}),(0,c.jsx)(Er,{className:"white-description",title:"Waiting for Final Confirmation",icon:t(e.step,5)}),(0,c.jsx)(Er,{className:"white-description",title:"Uploading to Arweave",icon:t(e.step,6)}),(0,c.jsx)(Er,{className:"white-description",title:"Updating Metadata",icon:t(e.step,7)}),(0,c.jsx)(Er,{className:"white-description",title:"Signing Token Transaction",description:"Approve the final transaction from your wallet",icon:t(e.step,8)})]})})]})},zr=function(e){var t=(0,a.k6)();return e.alert?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"waiting-title",children:"Sorry, there was an error!"}),(0,c.jsx)("p",{children:e.alert}),(0,c.jsx)(m.Z,{onClick:function(e){return t.push("/art/create")},children:"Back to Create NFT"})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"waiting-title",children:"Congratulations, you created an NFT!"}),(0,c.jsxs)("div",{className:"congrats-button-container",children:[(0,c.jsxs)(m.Z,{className:"metaplex-button",onClick:function(t){return window.open(function(){var t,n={text:"I've created a new NFT artwork on Metaplex, check it out!",url:"".concat(window.location.origin,"/#/art/").concat(null===(t=e.nft)||void 0===t?void 0:t.metadataAccount.toString()),hashtags:"NFT,Crypto,Metaplex",related:"Metaplex,safecoin"},i=new URLSearchParams(n).toString();return"https://twitter.com/intent/tweet?".concat(i)}(),"_blank")},children:[(0,c.jsx)("span",{children:"Share it on Twitter"}),(0,c.jsx)("span",{children:">"})]}),(0,c.jsxs)(m.Z,{className:"metaplex-button",onClick:function(n){var i;return t.push("/art/".concat(null===(i=e.nft)||void 0===i?void 0:i.metadataAccount.toString()))},children:[(0,c.jsx)("span",{children:"See it in your collection"}),(0,c.jsx)("span",{children:">"})]}),(0,c.jsxs)(m.Z,{className:"metaplex-button",onClick:function(e){return t.push("/auction/create")},children:[(0,c.jsx)("span",{children:"Sell it via auction"}),(0,c.jsx)("span",{children:">"})]})]}),(0,c.jsx)(d,{})]})},qr=function(){var e=(0,a.UO)().id,t=function(e){var t=(0,Xe.useMeta)().whitelistedCreatorsByCreator,n=(0,o.pubkeyToString)(e);return Object.values(t).find((function(e){return e.info.address===n}))}(e),n=Bt(e),i=(0,c.jsx)("div",{className:"artwork-grid",children:n.length>0?n.map((function(e,t){var n=e.pubkey;return(0,c.jsx)(r.Link,{to:"/art/".concat(n),children:(0,c.jsx)(rr,{pubkey:e.pubkey,preview:!1,artView:!0},n)},t)})):(0,v.Z)(Array(6)).map((function(e,t){return(0,c.jsx)(Mn,{},t)}))});return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(Ht.Z,{children:[(0,c.jsx)(Oi.Z,{}),(0,c.jsx)(qt.Z,{style:{margin:"0 30px",textAlign:"left",fontSize:"1.4rem"},children:(0,c.jsxs)(Ht.Z,{span:24,children:[(0,c.jsx)("h2",{children:(null===t||void 0===t?void 0:t.info.name)||(null===t||void 0===t?void 0:t.info.address)}),(0,c.jsx)("br",{}),(0,c.jsx)("div",{className:"info-header",children:"ABOUT THE CREATOR"}),(0,c.jsx)("div",{className:"info-content",children:null===t||void 0===t?void 0:t.info.description}),(0,c.jsx)("br",{}),(0,c.jsx)("div",{className:"info-header",children:"Art Created"}),i]})})]})})},Hr=n(97e3),Gr=function(e){var t=e.artist;return(0,c.jsx)(zt.Z,{hoverable:!0,className:"artist-card",cover:(0,c.jsx)("div",{className:"header-container",children:t.background?(0,c.jsx)("img",{src:t.background}):null}),bordered:!1,children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ui,{creators:[t],size:64}),(0,c.jsx)("div",{className:"artist-card-name",children:t.name||(0,o.shortenAddress)(t.address||"")}),(0,c.jsx)("div",{className:"artist-card-description",children:t.about})]})})},Yr=f.Z.Content,Xr=function(){var e=(0,Xe.useMeta)().whitelistedCreatorsByCreator,t=Object.values(e),n=(0,c.jsx)(Hr.Z,{breakpointCols:{default:4,1100:3,700:2,500:1},className:"my-masonry-grid artists-masonry",columnClassName:"my-masonry-grid_column",children:t.map((function(e,t){var n=e.info.address;return(0,c.jsx)(r.Link,{to:"/artists/".concat(n),children:(0,c.jsx)(Gr,{artist:{address:e.info.address,name:e.info.name||"",image:e.info.image||"",link:e.info.twitter||"",background:e.info.background||""}},n)},t)}))});return(0,c.jsx)(f.Z,{style:{margin:0,marginTop:30},children:(0,c.jsx)(Yr,{style:{display:"flex",flexWrap:"wrap"},children:(0,c.jsx)(Ht.Z,{style:{width:"100%",marginTop:10},children:n})})})},Qr=n(62754),Jr=n(19034),$r=n.n(Jr),ea=function(e){var t=e.buttonClassName;return(0,c.jsx)(Qt,{buttonClassName:t,buttonText:"How Auctions Work",modalTitle:"How Auctions Work",cardProps:[{title:"Placing a Bid",description:"Once you find an NFT you\u2019d like to own, place a bid on the auction page. Keep in mind the amount of SAFE you bid will be locked in your wallet for the remainder of the auction.",imgSrc:"/modals/how-auctions-work-1.jpg"},{title:"Winning an Auction",description:"Keep an eye on the auctions page (and your notifications) to know when you\u2019ve been outbid, and how the sale is progressing.",imgSrc:"/modals/how-auctions-work-2.jpg"},{title:"Redeeming your NFT",description:"If you\u2019re lucky enough to win your NFT auction, you\u2019ll have to redeem it to add it to your wallet. This can be done from the auction, winning notification, or your profile on ".concat(te,"."),imgSrc:"/modals/how-auctions-work-3.jpg"}]})};function ta(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return na(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return na(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function na(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ia=function(e){var t,n=(0,b.useWallet)(),i=e.isInstantSale,r=e.auctionManager,a=e.auction,s=e.myBidRedemption,c=e.myBidderPot,u=e.myBidderMetadata,l=e.items,d=!1,p=!(null===u||void 0===u||!u.info.cancelled),f=!1;if(e.auction.info.bidState.type==o.BidStateType.EnglishAuction){var m,h=ta(l);try{for(h.s();!(m=h.n()).done;){var x,y=ta(m.value);try{for(y.s();!(x=y.n()).done;){var v=x.value,g=null===s||void 0===s?void 0:s.info.getBidRedeemed(v.safetyDeposit.info.order);if(d=g||!1)break}}catch(w){y.e(w)}finally{y.f()}}}catch(w){h.e(w)}finally{h.f()}f=!(!c||p)&&!d}else d=!(!c||!p),f=!(!c||p);var j=r.authority===(null===n||void 0===n||null===(t=n.publicKey)||void 0===t?void 0:t.toBase58()),k=a.info.endedAt;return{isInstantSale:i,isAlreadyBought:d,canClaimItem:!(!j||!k),canClaimPurchasedItem:f,canEndInstantSale:j&&!k}},ra=n(83871),aa=n(48834).Buffer;function oa(e,t,n){return sa.apply(this,arguments)}function sa(){return(sa=(0,g.Z)(k().mark((function e(t,n,i){var r,a,s,c,u,l,d,p,f;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,o.programIds)(),a=r.store){e.next=4;break}throw new Error("Store not initialized");case 4:return e.next=6,(0,o.getAuctionKeys)(t.toString());case 6:return s=e.sent,c=s.auctionKey,u=s.auctionManagerKey,e.next=11,(0,o.getAuctionExtended)({auctionProgramId:r.auction,resource:t.toString()});case 11:l=e.sent,d=new o.EndAuctionArgs({reveal:null}),p=aa.from((0,ra.serialize)(o.SCHEMA,d)),f=[{pubkey:(0,o.toPublicKey)(u),isSigner:!1,isWritable:!0},{pubkey:(0,o.toPublicKey)(c),isSigner:!1,isWritable:!0},{pubkey:(0,o.toPublicKey)(l),isSigner:!1,isWritable:!1},{pubkey:(0,o.toPublicKey)(n),isSigner:!0,isWritable:!1},{pubkey:(0,o.toPublicKey)(a),isSigner:!1,isWritable:!1},{pubkey:(0,o.toPublicKey)(r.auction),isSigner:!1,isWritable:!1},{pubkey:(0,o.toPublicKey)(R.SYSVAR_CLOCK_PUBKEY),isSigner:!1,isWritable:!1}],i.push(new R.TransactionInstruction({keys:f,programId:(0,o.toPublicKey)(r.metaplex),data:p}));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ca(e){return ua.apply(this,arguments)}function ua(){return(ua=(0,g.Z)(k().mark((function e(t){var n,i,r,a,s,c,u,l,d,p,f,m,h,x;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auctionView,i=t.connection,r=t.accountByMint,a=t.bids,s=t.bidRedemptions,c=t.prizeTrackingTickets,u=t.wallet,l=n.vault,d=n.auctionManager,p=[],e.next=5,oa(new R.PublicKey(l.pubkey),new R.PublicKey(d.authority),p);case 5:return f=[],m=[],e.next=9,ke(i,u,n,r,a,s,c,m,f);case 9:return h=[p].concat(f),x=[[]].concat(m),e.abrupt("return",(0,o.sendTransactions)(i,u,h,x));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var la=n(68685),da=function(e){var t=e.onClose,n=e.isModalVisible,i=e.children;return(0,c.jsx)(h.Z,{onCancel:t,footer:null,visible:n,closeIcon:(0,c.jsx)("img",{src:"/modals/close.svg"}),children:i})};function pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function fa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ma=function(e){var t=e.title,n=e.content,i=e.buttonText,r=e.onClickOk,a=e.onClose,o=e.extraButtonText,s=e.onClickExtraButton;return(0,c.jsxs)("div",{className:"congratulations-root",children:[(0,c.jsx)("div",{className:"emoji-frame",children:(0,c.jsx)("img",{src:"/modals/confetti-emoji.svg"})}),(0,c.jsx)("span",{className:"title",children:t||"Congratulations"}),(0,c.jsx)("span",{className:"content",children:n}),(0,c.jsx)(m.Z,{className:"ok-button",onClick:function(){r&&r(),a()},children:i||"Ok"}),!!o&&(0,c.jsx)(m.Z,{className:"extra-button",onClick:s,children:o})]})},ha=function(e){var t=(0,la.Z)({},e);return(0,c.jsx)(da,fa(fa({},t),{},{children:(0,c.jsx)(ma,fa({},t))}))};function xa(e,t,n,i){return ba.apply(this,arguments)}function ba(){return(ba=(0,g.Z)(k().mark((function e(t,n,i,r){var a,s,c,u,l,d,p,f,m,h;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMinimumBalanceForRentExemption(Z.AccountLayout.span);case 2:return a=e.sent,e.next=5,t.getMinimumBalanceForRentExemption(Z.MintLayout.span);case 5:return s=e.sent,e.next=8,t.getMinimumBalanceForRentExemption(o.MAX_METADATA_LEN);case 8:return c=e.sent,e.next=11,t.getMinimumBalanceForRentExemption(o.MAX_EDITION_LEN);case 11:return u=e.sent,e.next=14,t.getMinimumBalanceForRentExemption(B.MAX_PRIZE_TRACKING_TICKET_SIZE);case 14:return l=e.sent,e.next=17,ge(n,i,r);case 17:d=e.sent,p=n.auction.info.bidState.max.toNumber(),f=0,m=function(e){var t=n.auction.info.bidState.getWinnerAt(e);if(!t)return"break";if(i.find((function(e){return e.info.bidderPubkey===t})))for(var r=0;r<n.auctionManager.safetyDepositBoxesExpected.toNumber();r++)f+=n.auctionManager.getAmountForWinner(e,r).toNumber()},h=0;case 22:if(!(h<p)){e.next=29;break}if("break"!==m(h)){e.next=26;break}return e.abrupt("break",29);case 26:h++,e.next=22;break;case 29:return e.abrupt("return",(s+a+c+u+l)*(d.length+f));case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ya=function(e){var t,n,s,u,l,p,f,h,x,y=e.auctionView,v=e.style,j=e.hideDefaultAction,w=e.action,N=(0,a.k6)(),P=(0,o.useConnection)(),S=(0,Xe.useMeta)().update,M=(0,b.useWallet)(),T=(0,o.useWalletModal)().setVisible,A=(0,i.useCallback)((function(){return M.wallet?M.connect().catch():T(!0)}),[M.wallet,M.connect,T]),C=(0,o.useMint)(y.auction.info.tokenMint),Z=(0,Xe.useMeta)(),O=Z.prizeTrackingTickets,E=Z.bidRedemptions,K=Ct(y.auction.pubkey),I=It(y),F=(0,i.useState)(),D=F[0],W=F[1],L=(0,i.useState)(!1),V=L[0],U=L[1],z=(0,i.useState)(!1),q=z[0],H=z[1],G=(0,i.useState)(!1),Y=G[0],X=G[1],Q=(0,i.useState)(!1),J=Q[0],$=Q[1],ee=(0,i.useState)(!1),te=ee[0],ae=ee[1],oe=(0,i.useState)(!1),se=oe[0],ce=oe[1],ue=(0,i.useState)(void 0),le=ue[0],de=ue[1],pe=(0,i.useState)(!1),fe=(pe[0],pe[1]),me=(0,i.useState)(!1),he=me[0],xe=me[1],be=(0,i.useState)(!1),ye=be[0],ve=be[1],ge=(0,i.useState)(!1),je=ge[0],ke=ge[1],we=(0,i.useState)(),Ne=we[0],Pe=we[1],Se=(0,o.useUserAccounts)().accountByMint,Me=y.auction.info.tokenMint,Te=Ot(Me),Ae=nt().mainnetTokens.filter((function(e){return e.address==Me}))[0],Ce=Ae?Ae.symbol:Me==o.WRAPPED_SOL_MINT.toBase58()?"SAFE":"CUSTOM",Ze=Ae?Math.ceil(Math.pow(10,Ae.decimals)):R.LAMPORTS_PER_SAFE,Ee=Te.accounts[0],Be=(0,i.useMemo)((function(){var e;return null===(e=y.auctionDataExtended)||void 0===e?void 0:e.info.instantSalePrice}),[y.auctionDataExtended]),Ke=null;null!==(t=y.myBidderPot)&&void 0!==t&&t.pubkey&&(Ke=y.auction.info.bidState.getWinnerIndex(null===(n=y.myBidderPot)||void 0===n?void 0:n.info.bidderAct));var _e=y.auction.info.priceFloor.type===o.PriceFloorType.Minimum&&(null===(s=y.auction.info.priceFloor.minPrice)||void 0===s?void 0:s.toNumber())||0,Re=ie(Ke,y,y.myBidderMetadata,y.myBidRedemption),Fe=function(e){var t=(0,i.useState)(),n=t[0],r=t[1],a=(0,Xe.useMeta)().auctionDataExtended;return(0,i.useMemo)((function(){!function(){var t=(0,g.Z)(k().mark((function t(){var i,s,c;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=7;break}return i=(0,o.programIds)(),t.next=4,(0,o.getAuctionExtended)({auctionProgramId:i.auction,resource:e.vault.pubkey});case 4:s=t.sent,(c=a[s])&&r(c);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[a,n,r]),n}(y),De=null!==Ke||Re,We=((null===(u=y.auction.info.auctionGap)||void 0===u?void 0:u.toNumber())||0)/60,Le=Fe?Fe.info.gapTickSizePercentage:0,Ve=null!==Fe&&void 0!==Fe&&null!==(l=Fe.info)&&void 0!==l&&l.tickSize?Fe.info.tickSize:0,Ue=!(!Ve||!D||D*Ze%Ve.toNumber()==0),ze=function(e,t,n,r,a){return!!(0,i.useMemo)((function(){if(t&&e&&n&&!r.auction.info.ended()){var i=$r()().unix(),o=r.auction.info.endedAt;if(o){if(i>o.toNumber()){for(var s=e*a,c=r.auction.info.bidState.bids.length-1;c>-1;c--){var u=r.auction.info.bidState.bids[c].amount.toNumber();if(u<s)return u*((100+t)/100)>s;if(u===s)return!0}return!1}return!1}return!1}}),[e,t,n,r])}(D,Le,We,y,Ze),qe=y.auctionManager.authority!==(null===M||void 0===M||null===(p=M.publicKey)||void 0===p?void 0:p.toBase58()),He=y.auction.info.state===o.AuctionState.Created,Ye=y.state===bt.Upcoming,Qe=y.state===bt.Live,Je=(null===(f=y.auctionManager.participationConfig)||void 0===f?void 0:f.fixedPrice)||0,$e=0===y.auctionManager.numWinners.toNumber(),et=Ve&&(Ye||0===K.length?(0,o.fromLamports)($e?Je:_e,C):Qe&&K.length>0?parseFloat((0,o.formatTokenAmount)(K[0].info.lastBid,C)):9999999)+Ve.toNumber()/Ze,tt=Ue||ze||!Ee||void 0===D||D*Ze<_e||et&&D<et||V||!Se.get(ne.toBase58());(0,i.useEffect)((function(){M.connected?M.publicKey&&!se&&ce(!0):se&&ce(!1)}),[M.connected]);var it=function(){var e=(0,g.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(!0),e.prev=1,e.next=4,ca({auctionView:y,connection:P,accountByMint:Se,bids:K,bidRedemptions:E,prizeTrackingTickets:O,wallet:M});case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),console.error("endAuction",e.t0),U(!1),e.abrupt("return");case 11:X(!0),U(!1);case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),rt=ia(y),at=rt.canEndInstantSale,ot=rt.isAlreadyBought,st=rt.canClaimPurchasedItem,ct=rt.canClaimItem,ut=function(){var e=(0,g.Z)(k().mark((function e(){var t,n,i,r,a,s,c;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U(!0),n=(null===(t=y.participationItem)||void 0===t?void 0:t.winningConfigType)||y.items[0][0].winningConfigType,i=[B.WinningConfigType.FullRightsTransfer,B.WinningConfigType.TokenOnlyTransfer].includes(n),r=Ee&&!y.myBidderPot&&qe,a=Ee&&!qe&&i,!Be||!r&&!a){e.next=19;break}return e.prev=6,console.log("sendPlaceBid"),e.next=10,Ie(P,M,Ee.pubkey,y,Se,Be,"finalized");case 10:s=e.sent,de(s),e.next=19;break;case 14:return e.prev=14,e.t0=e.catch(6),console.error("sendPlaceBid",e.t0),U(!1),e.abrupt("return");case 19:return e.next=21,S(y.auction.pubkey,M.publicKey);case 21:return c=e.sent,y.auction=c[0],y.myBidderPot=c[1],y.myBidderMetadata=c[2],M.publicKey&&y.auction.info.bidState.type==o.BidStateType.EnglishAuction&&(null===y.auction.info.bidState.getWinnerIndex(M.publicKey.toBase58())&&y.auction.info.bidState.bids.unshift(new o.Bid({key:M.publicKey.toBase58(),amount:Be||new(_())(0)})),y.myBidderPot||(y.myBidderPot={pubkey:"none",account:{},info:new o.BidderPot({bidderPot:"dummy",bidderAct:M.publicKey.toBase58(),auctionAct:y.auction.pubkey,emptied:!1})})),e.prev=26,e.next=29,re(P,M,Ee.pubkey,y,Se,O,E,K);case 29:return e.next=31,S();case 31:st?ve(!0):xe(!0),e.next=38;break;case 34:e.prev=34,e.t1=e.catch(26),console.error(e.t1),$(!0);case 38:U(!1);case 39:case"end":return e.stop()}}),e,null,[[6,14],[26,34]])})));return function(){return e.apply(this,arguments)}}(),lt=y.auction.info.bidState.type===o.BidStateType.OpenEdition,dt=Boolean(null===(h=y.myBidderPot)||void 0===h?void 0:h.info.emptied),pt=dt&&y.auction.info.bidState.max.toNumber()===K.length,ft=!lt&&y.isInstantSale&&qe&&pt||y.vault.info.state===o.VaultState.Deactivated&&dt,mt=function(e){var t=ia(e),n=t.isInstantSale,i=t.canClaimItem,r=t.canClaimPurchasedItem,a=t.canEndInstantSale;return n?r?"Claim Purchase":i?"Claim item":a?"End sale & claim item":"Buy now":"Place Bid"}(y);return ft?(0,c.jsx)(c.Fragment,{}):(0,c.jsxs)("div",{className:"auction-container",style:v,children:[(0,c.jsx)("div",{className:"time-info",children:!y.isInstantSale&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{children:"Auction ends in"}),(0,c.jsx)("div",{children:(0,c.jsx)(pi,{auctionView:y,labels:!1})})]})}),(0,c.jsxs)("div",{className:"bid-info",children:[(0,c.jsxs)("div",{className:"bid-info-container",children:[(0,c.jsx)(fi,{auctionView:y,showAsRow:!0,hideCountdown:!0,displaySymbol:!0}),se&&!j&&M.connected&&y.auction.info.ended()&&(0,c.jsx)(m.Z,{className:"secondary-btn",disabled:!Ee||!y.myBidderMetadata&&qe||V||!!y.items.find((function(e){return e.find((function(e){return!e.metadata}))})),onClick:(0,g.Z)(k().mark((function e(){var t,n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U(!0),$(!1),(null===M||void 0===M||null===(t=M.publicKey)||void 0===t?void 0:t.toBase58())!==y.auctionManager.authority){e.next=8;break}return e.next=5,xa(P,y,K,E);case 5:n=e.sent,Pe(n),ke(!0);case 8:if(e.prev=8,!De){e.next=14;break}return e.next=12,re(P,M,Ee.pubkey,y,Se,O,E,K).then((function(){return H(!0)}));case 12:e.next=16;break;case 14:return e.next=16,Oe(P,M,Ee.pubkey,y,Se,K,E,O);case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(8),console.error(e.t0),$(!0);case 22:U(!1);case 23:case"end":return e.stop()}}),e,null,[[8,18]])}))),children:V||y.items.find((function(e){return e.find((function(e){return!e.metadata}))}))||!Ee?(0,c.jsx)(Ji.Z,{}):De?"Redeem bid":"".concat(null!==M&&void 0!==M&&M.publicKey&&y.auctionManager.authority===M.publicKey.toBase58()?"Reclaim Items":"Refund bid")}),se?(0,c.jsx)("div",{className:"show-place-bid",children:(0,c.jsx)(oi,{title:"in your wallet",displaySymbol:(null===Ae||void 0===Ae?void 0:Ae.symbol)||"CUSTOM",style:{marginBottom:0},amount:Te.balance,tokenInfo:Ae,customPrefix:(0,c.jsx)(o.Identicon,{address:null===M||void 0===M||null===(x=M.publicKey)||void 0===x?void 0:x.toBase58(),style:{width:36}})})}):(0,c.jsxs)("div",{className:"actions-place-bid",children:[(0,c.jsx)(ea,{buttonClassName:"black-btn"}),!j&&!y.auction.info.ended()&&(M.connected&&He&&!qe?(0,c.jsx)(m.Z,{className:"secondary-btn",disabled:V,onClick:(0,g.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(!0),e.prev=1,e.next=4,Ge(P,M,y);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:U(!1);case 10:case"end":return e.stop()}}),e,null,[[1,6]])}))),style:{marginTop:20},children:V?(0,c.jsx)(Ji.Z,{}):"Start auction"}):!se&&(0,c.jsx)(m.Z,{className:"secondary-btn",onClick:function(){M.connected?ce(!0):A()},children:"Place Bid"}))]})]}),se&&!y.isInstantSale&&!j&&M.connected&&!y.auction.info.ended()&&(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginTop:"15px",marginBottom:"10px",borderTop:"1px solid rgba(255, 255, 255, 0.1)",paddingTop:"15px"},children:[(0,c.jsx)("div",{style:{margin:"0 0 12px 0",letterSpacing:"0.02em",fontStyle:"normal",fontWeight:400,fontSize:"14px",lineHeight:"14px",textTransform:"uppercase",color:"rgba(255, 255, 255, 0.7)"},children:"your bid"}),(0,c.jsxs)("div",{className:"bid-container",children:[(0,c.jsx)("div",{style:{width:"100%",background:"#242424",borderRadius:14,color:"rgba(0, 0, 0, 0.5)"},children:(0,c.jsx)(Ii.Z,{autoFocus:!0,className:"input sol-input-bid",value:D,onChange:W,precision:4,style:{fontSize:16,lineHeight:"16px"},formatter:function(e){return e?"\u25ce ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","):""},placeholder:0===et?"Place a Bid":"Bid ".concat(et," ").concat(Ce," or more")})}),(0,c.jsxs)("div",{className:"bid-buttons",children:[(0,c.jsx)(m.Z,{className:"metaplex-button-default",style:{background:"transparent",color:"white",width:"unset",fontWeight:600,letterSpacing:"-0.02em",border:"none"},disabled:V,onClick:function(){return ce(!1)},children:"Cancel"}),(0,c.jsx)(m.Z,{className:"secondary-btn",disabled:tt,onClick:(0,g.Z)(k().mark((function e(){var t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U(!0),!Ee||!D){e.next=8;break}return e.next=4,Ie(P,M,Ee.pubkey,y,Se,D);case 4:t=e.sent,de(t),ae(!0),U(!1);case 8:case"end":return e.stop()}}),e)}))),children:V||!Se.get(ne.toBase58())?(0,c.jsx)(Ji.Z,{}):"Bid now"})]})]})]}),!j&&M.connected&&!y.auction.info.ended()&&(He&&!qe?(0,c.jsx)(m.Z,{type:"primary",size:"large",className:"action-btn",disabled:V,onClick:(0,g.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(!0),e.prev=1,e.next=4,Ge(P,M,y);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:U(!1);case 10:case"end":return e.stop()}}),e,null,[[1,6]])}))),style:{marginTop:20},children:V?(0,c.jsx)(Ji.Z,{}):"Start auction"}):V?(0,c.jsx)(Ji.Z,{}):y.isInstantSale&&!ot&&(0,c.jsx)(m.Z,{type:"primary",size:"large",className:"ant-btn secondary-btn",disabled:V,onClick:function(){if(!(Te.balanceLamports<((null===Be||void 0===Be?void 0:Be.toNumber())||0))||st||ct||at)return at?it():ut();fe(!0)},style:{marginTop:20,width:"100%"},children:mt})),!j&&!M.connected&&(0,c.jsxs)(m.Z,{type:"primary",size:"large",className:"action-btn",onClick:A,style:{marginTop:20},children:["Connect wallet to"," ",y.isInstantSale?"purchase":"place bid"]}),w,J&&(0,c.jsx)("span",{style:{color:"red"},children:"There was an issue redeeming or refunding your bid. Please try again."}),Ue&&Ve&&(0,c.jsxs)("span",{style:{color:"red"},children:["Tick size is \u25ce",Ve.toNumber()/Ze,"."]}),ze&&(0,c.jsxs)("span",{style:{color:"red"},children:["Your bid needs to be at least ",Le,"% larger than an existing bid during gap periods to be eligible."]}),!V&&void 0!==D&&se&&tt&&(0,c.jsx)("span",{style:{color:"red"},children:"Invalid amount"})]}),(0,c.jsxs)(o.MetaplexOverlay,{visible:te,children:[(0,c.jsx)(d,{}),(0,c.jsx)("h1",{className:"title",style:{fontSize:"3rem",marginBottom:20},children:"Nice bid!"}),(0,c.jsxs)("p",{style:{color:"white",textAlign:"center",fontSize:"2rem"},children:["Your bid of \u25ce ",(0,o.formatTokenAmount)(null===le||void 0===le?void 0:le.amount,C)," was successful"]}),(0,c.jsx)(m.Z,{onClick:function(){return ae(!1)},className:"overlay-btn",children:"Got it"})]}),(0,c.jsxs)(o.MetaplexOverlay,{visible:Y,children:[(0,c.jsx)(d,{}),(0,c.jsx)("h1",{className:"title",style:{fontSize:"3rem",marginBottom:20},children:"Congratulations"}),(0,c.jsxs)("p",{style:{color:"white",textAlign:"center",fontSize:"2rem"},children:["Your sale has been ended please view your NFTs in"," ",(0,c.jsx)(r.Link,{to:"/artworks",children:"My Items"}),"."]}),(0,c.jsx)(m.Z,{onClick:function(){return X(!1)},className:"overlay-btn",children:"Got it"})]}),(0,c.jsxs)(o.MetaplexOverlay,{visible:q,children:[(0,c.jsx)(d,{}),(0,c.jsx)("h1",{className:"title",style:{fontSize:"3rem",marginBottom:20},children:"Congratulations"}),(0,c.jsxs)("p",{style:{color:"white",textAlign:"center",fontSize:"2rem"},children:["Your ",y.isInstantSale?"purchase":"bid"," has been redeemed please view your NFTs in ",(0,c.jsx)(r.Link,{to:"/artworks",children:"My Items"}),"."]}),(0,c.jsx)(m.Z,{onClick:function(){return H(!1)},className:"overlay-btn",children:"Got it"})]}),(0,c.jsx)(o.MetaplexModal,{visible:je,onCancel:function(){return ke(!1)},bodyStyle:{alignItems:"start"},children:(0,c.jsxs)("h3",{style:{color:"white"},children:["Warning: There may be some items in this auction that still are required by the auction for printing bidders' limited or open edition NFTs. If you wish to withdraw them, you are agreeing to foot the cost of up to an estimated \u25ce",(0,c.jsx)("b",{children:(Ne||0)/Ze})," plus transaction fees to redeem their bids for them right now."]})}),(0,c.jsx)(ha,{isModalVisible:he,onClose:function(){return xe(!1)},onClickOk:function(){return window.location.reload()},buttonText:"Reload",content:"Reload the page and click claim to receive your NFT. Then check your wallet to confirm it has arrived. It may take a few minutes to process."}),(0,c.jsx)(ha,{isModalVisible:ye,onClose:function(){return ve(!1)},buttonText:"Got it",content:"You have claimed your item from ".concat(I.map((function(e){return" "+(e.name||(0,o.shortenAddress)(e.address||""))})),"!"),extraButtonText:"View My Items",onClickExtraButton:function(){return N.push("/artworks")}})]})},va=n(85366),ga=n(56907),ja=n(87532),ka=function(){return(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"feather feather-copy",children:[(0,c.jsx)("rect",{stroke:"currentColor",x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),(0,c.jsx)("path",{stroke:"currentColor",d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})},wa=function(){return(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"feather feather-check",children:(0,c.jsx)("polyline",{points:"20 6 9 17 4 12"})})},Na=function(e){var t=e.copyText,n=e.className,r=(0,i.useState)(!1),a=r[0],o=r[1];(0,i.useEffect)((function(){var e=setTimeout((function(){o(!1)}),3e3);return function(){return clearTimeout(e)}}),[a]);return(0,c.jsx)("div",{className:n,onClick:function(){navigator.clipboard.writeText(t),o(!0)},title:"Click to copy pubkey",children:a?(0,c.jsx)(wa,{}):(0,c.jsx)(ka,{})})},Pa=function(e){var t=e.item,n=e.index,i=e.size,r=e.active,a=t.metadata.pubkey,o={transform:0===n?"":"translate(".concat(15*n,"px, ").concat(-40*n,"px) scale(").concat(Math.max(1-.2*n,0),")"),transformOrigin:"right bottom",position:0!==n?"absolute":"static",zIndex:-1*n,marginLeft:i>1&&0===n?"0px":"auto",background:"black",boxShadow:"rgb(0 0 0 / 10%) 12px 2px 20px 14px",aspectRatio:"1/1"};return(0,c.jsx)(ti,{pubkey:a,className:"artwork-image stack-item",style:o,active:r,allowMeshRender:!0})},Sa=function(){var e,t=xt().width,n=(0,a.UO)().id,r=(0,o.useConnectionConfig)().endpoint,s=At(n),u=(0,i.useState)(0),l=u[0],d=u[1],p=gt(null===s||void 0===s?void 0:s.thumbnail.metadata.pubkey),f=jt(null===s||void 0===s?void 0:s.thumbnail.metadata.pubkey),h=f.ref,x=f.data,b=It(s),y=(0,o.useMeta)().pullAuctionPage;(0,i.useEffect)((function(){y(n)}),[]);var g="";p.type===ut.NFT?g="Unique":p.type===ut.Master?g="NFT 0":p.type===ut.Print&&(g="".concat(p.edition," of ").concat(p.supply));var j=null===s||void 0===s?void 0:s.items.flat().length,k=null===s||void 0===s?void 0:s.items.length,w=(null===s||void 0===s?void 0:s.auction.info.bidState.type)===o.BidStateType.OpenEdition,N=void 0===x||void 0===x.description,P=null===x||void 0===x?void 0:x.description,S=null===x||void 0===x?void 0:x.attributes,T=null===(e=nt())||void 0===e?void 0:e.mainnetTokens[0],A=[].concat((0,v.Z)((null===s||void 0===s?void 0:s.items.flat().reduce((function(e,t){return e.set(t.metadata.pubkey,t),e}),new Map).values())||[]),[null===s||void 0===s?void 0:s.participationItem]).map((function(e,t,n){var i;return e&&null!==e&&void 0!==e&&e.metadata&&null!==(i=e.metadata)&&void 0!==i&&i.pubkey?(0,c.jsx)(Pa,{item:e,index:t,size:n.length,active:t===l},e.metadata.pubkey):null}));return t<768?(0,c.jsxs)(qt.Z,{justify:"center",gutter:[48,0],className:"auction-mobile-container",children:[(0,c.jsx)(Ht.Z,{span:24,className:"img-cont-500",children:(0,c.jsx)("div",{className:"auction-view",style:{minHeight:300},children:(0,c.jsx)(Qr.Z,{autoplay:!1,afterChange:function(e){return d(e)},children:A})})}),(0,c.jsxs)(Ht.Z,{className:"auction-mobile-section",children:[(0,c.jsx)("h2",{className:"art-title",children:p.title||(0,c.jsx)(Zi.Z,{paragraph:{rows:0}})}),(0,c.jsxs)("div",{className:"info-container",children:[(0,c.jsxs)("div",{className:"info-component",children:[(0,c.jsx)("h6",{className:"info-title",children:"Edition"}),(0,c.jsx)("span",{children:((null===s||void 0===s?void 0:s.items.length)||0)>1?"Multiple":g})]}),(0,c.jsxs)("div",{className:"info-component",children:[(0,c.jsx)("h6",{className:"info-title",children:"Winners"}),(0,c.jsx)("span",{children:void 0===k?(0,c.jsx)(Zi.Z,{paragraph:{rows:0}}):w?"Unlimited":k})]}),(0,c.jsxs)("div",{className:"info-component",children:[(0,c.jsx)("h6",{className:"info-title",children:"NFTS"}),(0,c.jsx)("span",{children:void 0===j?(0,c.jsx)(Zi.Z,{paragraph:{rows:0}}):w?"Open":j})]})]})]}),(0,c.jsxs)(Ht.Z,{className:"auction-mobile-section",span:24,children:[!s&&(0,c.jsx)(Zi.Z,{paragraph:{rows:6}}),s&&(0,c.jsx)(ya,{auctionView:s,hideDefaultAction:!1})]}),(0,c.jsxs)(Ht.Z,{className:"auction-mobile-section",span:24,children:[(0,c.jsx)("h6",{className:"info-title",children:"Details"}),(0,c.jsx)("div",{className:"description",children:(0,c.jsxs)("p",{className:"about-nft-collection a-description",children:[N&&(0,c.jsx)(Zi.Z,{paragraph:{rows:3}}),P||void 0!==k&&(0,c.jsx)("div",{style:{fontStyle:"italic"},children:"No description provided."})]})})]}),S&&(0,c.jsxs)(Ht.Z,{className:"auction-mobile-section about-nft-collection a-attributes",span:24,children:[(0,c.jsx)("h6",{children:"Attributes"}),(0,c.jsx)(M.ZP,{grid:{column:4},children:S.map((function(e,t){return(0,c.jsx)(M.ZP.Item,{children:(0,c.jsx)(zt.Z,{title:e.trait_type,children:e.value})},"".concat(e.value,"-").concat(t))}))})]}),(0,c.jsx)(Ht.Z,{className:"auction-mobile-section",span:24,children:(0,c.jsxs)("div",{className:"info-view",children:[(0,c.jsx)("h6",{className:"info-title",children:"Artists"}),(0,c.jsx)("div",{style:{display:"flex"},children:(0,c.jsx)(li,{creators:b})})]})}),(0,c.jsx)(Ht.Z,{className:"auction-mobile-section",span:24,children:(0,c.jsxs)("div",{className:"info-view",children:[(0,c.jsx)("h6",{className:"info-title",children:"View on"}),(0,c.jsxs)("div",{style:{display:"flex"},children:[(0,c.jsx)(m.Z,{className:"tag",onClick:function(){return window.open(p.uri||"","_blank")},children:"Arweave"}),(0,c.jsx)(m.Z,{className:"tag",onClick:function(){var e=r.name,t=new URL("account/".concat((null===p||void 0===p?void 0:p.mint)||""),"https://explorer.safecoin.org");e.includes("mainnet")||t.searchParams.set("cluster",e),window.open(t.href,"_blank")},children:"safecoin"})]})]})}),(0,c.jsx)(Ht.Z,{className:"auction-mobile-section",span:24,children:(0,c.jsx)(Ta,{auctionView:s})})]}):(0,c.jsxs)(qt.Z,{justify:"center",ref:h,gutter:[48,0],children:[(0,c.jsxs)(Ht.Z,{span:24,md:10,className:"img-cont-500",children:[(0,c.jsx)("div",{className:"auction-view",style:{minHeight:300},children:(0,c.jsx)(Qr.Z,{autoplay:!1,afterChange:function(e){return d(e)},children:A})}),(0,c.jsxs)("h6",{className:"about-nft-collection",children:["ABOUT THIS ",1===j?"NFT":"COLLECTION"]}),(0,c.jsxs)("p",{className:"about-nft-collection a-description",children:[N&&(0,c.jsx)(Zi.Z,{paragraph:{rows:3}}),P||void 0!==k&&(0,c.jsx)("div",{style:{fontStyle:"italic"},children:"No description provided."})]}),S&&(0,c.jsxs)("div",{className:"about-nft-collection a-attributes",children:[(0,c.jsx)("h6",{children:"Attributes"}),(0,c.jsx)(M.ZP,{grid:{column:4},children:S.map((function(e,t){return(0,c.jsx)(M.ZP.Item,{children:(0,c.jsx)(zt.Z,{title:e.trait_type,children:e.value})},"".concat(e.value,"-").concat(t))}))})]})]}),(0,c.jsxs)(Ht.Z,{span:24,md:14,children:[(0,c.jsx)("h2",{className:"art-title",children:p.title||(0,c.jsx)(Zi.Z,{paragraph:{rows:0}})}),(0,c.jsxs)(qt.Z,{gutter:[44,0],children:[(0,c.jsx)(Ht.Z,{span:12,md:16,children:(0,c.jsxs)("div",{className:"info-container",children:[(0,c.jsxs)("div",{className:"info-component",children:[(0,c.jsx)("h6",{className:"info-title",children:"CREATED BY"}),(0,c.jsx)("span",{children:(0,c.jsx)(ui,{creators:b})})]}),(0,c.jsxs)("div",{className:"info-component",children:[(0,c.jsx)("h6",{className:"info-title",children:"Edition"}),(0,c.jsx)("span",{children:((null===s||void 0===s?void 0:s.items.length)||0)>1?"Multiple":g})]}),(0,c.jsxs)("div",{className:"info-component",children:[(0,c.jsx)("h6",{className:"info-title",children:"Winners"}),(0,c.jsx)("span",{children:void 0===k?(0,c.jsx)(Zi.Z,{paragraph:{rows:0}}):w?"Unlimited":k})]}),(0,c.jsxs)("div",{className:"info-component",children:[(0,c.jsx)("h6",{className:"info-title",children:"NFTS"}),(0,c.jsx)("span",{children:void 0===j?(0,c.jsx)(Zi.Z,{paragraph:{rows:0}}):w?"Open":j})]}),(0,c.jsxs)("div",{className:"info-component",children:[(0,c.jsx)("h6",{className:"info-title",children:"CURRENCY"}),(0,c.jsxs)("span",{children:[void 0===j?(0,c.jsx)(Zi.Z,{paragraph:{rows:0}}):"".concat((null===T||void 0===T?void 0:T.name)||"Custom Token"," ($").concat((null===T||void 0===T?void 0:T.symbol)||"CUSTOM",")"),(0,c.jsx)(Na,{className:"copy-pubkey",copyText:T?null===T||void 0===T?void 0:T.address:(null===s||void 0===s?void 0:s.auction.info.tokenMint)||""})]})]})]})}),(0,c.jsx)(Ht.Z,{span:12,md:8,className:"view-on-container",children:(0,c.jsx)("div",{className:"info-view-container",children:(0,c.jsxs)("div",{className:"info-view",children:[(0,c.jsx)("h6",{className:"info-title",children:"View on"}),(0,c.jsxs)("div",{style:{display:"flex"},children:[(0,c.jsx)(m.Z,{className:"tag",onClick:function(){return window.open(p.uri||"","_blank")},children:"Arweave"}),(0,c.jsx)(m.Z,{className:"tag",onClick:function(){var e=r.name,t=new URL("account/".concat((null===p||void 0===p?void 0:p.mint)||""),"https://explorer.safecoin.org");e.includes("mainnet")||t.searchParams.set("cluster",e),window.open(t.href,"_blank")},children:"safecoin"})]})]})})})]}),!s&&(0,c.jsx)(Zi.Z,{paragraph:{rows:6}}),s&&(0,c.jsx)(ya,{auctionView:s,hideDefaultAction:!1}),!(null!==s&&void 0!==s&&s.isInstantSale)&&(0,c.jsx)(Ta,{auctionView:s})]})]})},Ma=function(e){var t=e.bid,n=(e.index,e.mint),r=e.isCancelled,a=(e.isActive,e.mintKey),s=(0,b.useWallet)().publicKey,u=t.info.bidderPubkey,l=(null===s||void 0===s?void 0:s.toBase58())===u,d=nt().mainnetTokens.filter((function(e){return e.address==a}))[0],p=(0,o.useConnection)(),f=(0,i.useState)(""),m=f[0],h=f[1];return(0,i.useEffect)((function(){(function(){var e=(0,g.Z)(k().mark((function e(t,n){var i,r,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,ga.getHandleAndRegistryKey)(t,(0,o.toPublicKey)(n));case 3:i=e.sent,r=(0,Kt.Z)(i,1),a=r[0],h(a),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(0),console.warn("err"),e.abrupt("return",void 0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}})()(p,u)}),[m]),xt().width<768?(0,c.jsxs)(qt.Z,{className:"mobile-bid-history",children:[(0,c.jsxs)("div",{className:"bid-info-container",children:[(0,c.jsxs)("div",{className:"bidder-info-container",children:[(0,c.jsx)(o.Identicon,{style:{width:24,height:24,marginRight:10,marginTop:2},address:u}),m?(0,c.jsx)("a",{target:"_blank",title:(0,o.shortenAddress)(u),href:"https://twitter.com/".concat(m),children:"@".concat(m)}):(0,o.shortenAddress)(u)]}),(0,c.jsx)("div",{children:!r&&(0,c.jsxs)("div",{className:"flex ",children:[l&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ja.Z,{}),"\xa0"]}),(0,c.jsx)(oi,{style:{marginBottom:0,fontSize:"16px"},containerStyle:{flexDirection:"row",alignItems:"center"},displaySymbol:(null===d||void 0===d?void 0:d.symbol)||"CUSTOM",iconSize:24,amount:(0,o.formatTokenAmount)(t.info.lastBid,n)})]})})]}),(0,c.jsx)("div",{className:"bid-info-container",children:(0,va.WU)(1e3*t.info.lastBidTimestamp.toNumber())})]}):(0,c.jsxs)(qt.Z,{className:"bid-history",children:[r&&(0,c.jsx)("div",{style:{position:"absolute",left:0,width:"100%",height:1,background:"grey",top:"calc(50% - 1px)",zIndex:2}}),(0,c.jsx)(Ht.Z,{span:8,children:!r&&(0,c.jsxs)("div",{className:"flex ",children:[l&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ja.Z,{}),"\xa0"]}),(0,c.jsx)(oi,{style:{marginBottom:0,fontSize:"16px"},containerStyle:{flexDirection:"row",alignItems:"center"},displaySymbol:(null===d||void 0===d?void 0:d.symbol)||"CUSTOM",tokenInfo:d,iconSize:24,amount:(0,o.formatTokenAmount)(t.info.lastBid,n)})]})}),(0,c.jsx)(Ht.Z,{span:8,style:{opacity:.7},children:(0,va.WU)(1e3*t.info.lastBidTimestamp.toNumber())}),(0,c.jsx)(Ht.Z,{span:8,children:(0,c.jsxs)("div",{className:"flex-right",children:[(0,c.jsx)(o.Identicon,{style:{width:24,height:24,marginRight:10,marginTop:2},address:u})," ",(0,c.jsx)("span",{style:{opacity:.7},children:m?(0,c.jsxs)(qt.Z,{className:"pubkey-row",children:[(0,c.jsx)("a",{target:"_blank",title:(0,o.shortenAddress)(u),href:"https://twitter.com/".concat(m),children:"@".concat(m)}),(0,c.jsx)(Na,{className:"copy-pubkey",copyText:u})]}):(0,c.jsxs)(qt.Z,{className:"pubkey-row",children:[(0,o.shortenAddress)(u),(0,c.jsx)(Na,{className:"copy-pubkey",copyText:u})]})})]})})]})},Ta=function(e){var t=e.auctionView,n=Ct((null===t||void 0===t?void 0:t.auction.pubkey)||""),r=(0,o.useMint)(null===t||void 0===t?void 0:t.auction.info.tokenMint),a=xt().width,s=(0,i.useState)(!1),u=s[0],l=s[1],d=(null===t||void 0===t?void 0:t.auction.info.bidState.max.toNumber())||0,p=(null===t||void 0===t?void 0:t.auction.info.bidState.bids)||[],f=(0,i.useMemo)((function(){return new Set(p.map((function(e){return e.key})))}),[p]),m=t?t.auction.info.state:o.AuctionState.Created,h=(0,i.useMemo)((function(){var e=0;return n.map((function(n,i){var a=i<d&&!!n.info.cancelled||m!==o.AuctionState.Ended&&!!n.info.cancelled,s=(0,c.jsx)(Ma,{bid:n,index:e,mint:r,isCancelled:a,isActive:!n.info.cancelled,mintKey:(null===t||void 0===t?void 0:t.auction.info.tokenMint)||""},i);return a||e++,s}))}),[m,n,f]);return!t||n.length<1?null:(0,c.jsx)(qt.Z,{children:(0,c.jsxs)(Ht.Z,{className:"bids-lists",children:[(0,c.jsx)("h6",{className:"info-title",children:"Bid History"}),h.slice(0,10),n.length>10&&(0,c.jsx)("div",{className:"full-history",onClick:function(){return l(!0)},style:{cursor:"pointer"},children:"View full history"}),(0,c.jsx)(o.MetaplexModal,{visible:u,onCancel:function(){return l(!1)},title:"Bid history",bodyStyle:{background:"unset",boxShadow:"unset",borderRadius:0},centered:!0,width:a<768?a-10:600,children:(0,c.jsx)("div",{style:{maxHeight:600,overflowY:"scroll",width:"100%"},children:h})})]})})},Aa=n(57273),Ca=n(90405),Za=n(65470),Oa=function(e,t){var n=e[t];return{address:t,verified:!0,image:(null===n||void 0===n?void 0:n.info.image)||"",name:(null===n||void 0===n?void 0:n.info.name)||"",link:(null===n||void 0===n?void 0:n.info.twitter)||""}},Ea=function(e){var t=e.voucherMetadata,n=e.uri,r=e.name,a=e.authority,s=e.cardsRedeemed,u=e.allowedAmountToRedeem,l=e.artView,d=e.onClose,p=(0,o.useMeta)().whitelistedCreatorsByCreator,f=gt(t),h=(0,i.useMemo)((function(){return Oa(p,a)}),[p,a]),x=l?s?"Opened":"Sealed":"Pack",b=f.type===ut.Print&&"".concat(f.edition," of ").concat(f.supply),y=u&&s?u-s:u||0,v=(0,i.useMemo)((function(){return l?y?"".concat(y," NFT reveal left"):"All revealed":"PACK OPENING UNLOCKS"}),[l,y]);return(0,c.jsxs)(zt.Z,{hoverable:!0,className:"auction-render-card",bordered:!1,children:[d&&(0,c.jsx)(m.Z,{className:"card-close-button",shape:"circle",onClick:function(e){e.stopPropagation(),e.preventDefault(),d()},children:"X"}),(0,c.jsxs)("div",{className:"card-art-info",children:[(0,c.jsxs)("div",{className:"pack-gray-wrapper",children:[(0,c.jsxs)("div",{className:"card-artist-info card-artist-info--pack",children:[(0,c.jsxs)("div",{className:"pack-creator-info",children:[(0,c.jsx)(ui,{creators:[h]}),(0,c.jsx)("span",{className:"pack-creator-name",children:h.name||(0,o.shortenAddress)((null===h||void 0===h?void 0:h.address)||"")})]}),b&&(0,c.jsx)("div",{className:"card-artist-info__subtitle",children:(0,c.jsx)("p",{className:"info-message__main",children:b})})]}),(0,c.jsx)("div",{className:"art-content-wrapper",children:(0,c.jsx)(ti,{uri:n,preview:!1})}),(0,c.jsx)("div",{className:"art-name",children:r})]}),(0,c.jsxs)("div",{className:"art-auction-info",children:[(0,c.jsxs)("div",{className:"art-auction-info__left-side",children:[(0,c.jsx)("img",{src:"/grid-4.svg"}),(0,c.jsx)("span",{className:"info-message",children:v})]}),(0,c.jsx)("div",{className:"art-auction-info__right-side",children:(0,c.jsx)("span",{children:x})})]})]}),!l&&(0,c.jsx)("div",{className:"card-bid-info"})]})},Ba=n(34406),Ka=function(e){var t=e.current,n=e.isSelected,i=e.onSelect,r=e.onClose,a=(0,Xe.useMeta)(),o=a.packs,s=a.vouchers;if("true"===Ba.env.NEXT_ENABLE_NFT_PACKS){var u,l,d=null===(u=t.edition)||void 0===u||null===(l=u.info)||void 0===l?void 0:l.parent,p=Object.values(s).find((function(e){var t;return(null===e||void 0===e||null===(t=e.info)||void 0===t?void 0:t.master)===d}));if(p){var f=o[p.info.packSet].info,m=f.authority,h=f.allowedAmountToRedeem,x=f.name,b=f.uri;return(0,c.jsx)("div",{onClick:i,children:(0,c.jsx)(Ea,{name:x,voucherMetadata:t.metadata.pubkey,uri:b,authority:m,allowedAmountToRedeem:h,onClose:r,artView:!0})})}}return(0,c.jsx)(rr,{pubkey:t.metadata.pubkey,preview:!1,onClick:i,className:n?"selected-card art-card-for-selector":"not-selected-card art-card-for-selector",onClose:r})},Ia=["selected","setSelected","allowMultiple"],_a=function(e){var t=e.selected,n=e.setSelected,r=e.allowMultiple,a=((0,$i.Z)(e,Ia),Tt());e.filter&&(a=a.filter(e.filter));var o=(0,i.useMemo)((function(){return new Set(t.map((function(e){return e.metadata.pubkey})))}),[t]),s=(0,i.useState)(!1),u=s[0],l=s[1],d=function(){f(),l(!0)},p=function(){l(!1)},f=function(){n([])},x=function(){p()};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"artwork-grid",children:[t.map((function(e){var i=(null===e||void 0===e?void 0:e.metadata.pubkey)||"";return(0,c.jsx)(Ka,{current:e,onSelect:d,onClose:function(){n(t.filter((function(e){return e.metadata.pubkey!==i}))),x()}},i)})),(r||0===o.size)&&(0,c.jsx)("div",{className:"ant-card ant-card-bordered ant-card-hoverable art-card",style:{width:200,height:300,display:"flex"},onClick:d,children:(0,c.jsx)("span",{className:"text-center",children:"Add an NFT"})})]}),(0,c.jsxs)(h.Z,{visible:u,onCancel:p,onOk:x,width:1100,footer:null,className:"modalp-40 big-modal",children:[(0,c.jsxs)(qt.Z,{className:"call-to-action",style:{marginBottom:0},children:[(0,c.jsx)("h2",{children:"Select the NFT you want to sell"}),(0,c.jsx)("p",{style:{fontSize:"1.2rem"},children:"Select the NFT that you want to sell copy/copies of."})]}),(0,c.jsx)(qt.Z,{className:"content-action",style:{overflowY:"auto",height:"50vh"},children:(0,c.jsx)("div",{className:"artwork-grid",children:a.map((function(e){var t=e.metadata.pubkey,i=o.has(t);return(0,c.jsx)(Ka,{isSelected:i,current:e,onSelect:function(){var e=(0,v.Z)(o.keys());r&&(e=[]);var s=i?new Set(e.filter((function(e){return e!==t}))):new Set([].concat((0,v.Z)(e),[t])),c=a.filter((function(e){return s.has(e.metadata.pubkey)}));n(c),r||x()}},t)}))})}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{type:"primary",size:"large",onClick:x,className:"action-btn",children:"Confirm"})})]})]})},Ra=n(48834).Buffer;function Fa(e,t,n,i){return Da.apply(this,arguments)}function Da(){return(Da=(0,g.Z)(k().mark((function e(t,n,i,r){var a,s,c,u,l,d,p,f,m,h,x,b,y;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:return a=o.utils.programIds(),e.next=5,t.getMinimumBalanceForRentExemption(Z.AccountLayout.span);case 5:return s=e.sent,e.next=8,(0,o.findProgramAddress)([Ra.from(D.VAULT_PREFIX),(0,o.toPublicKey)(a.vault).toBuffer(),(0,o.toPublicKey)(i).toBuffer()],(0,o.toPublicKey)(a.vault));case 8:c=e.sent[0],u=0,l=[],d=[],p=[],f=[],m=[],h=0;case 16:if(!(h<r.length)){e.next=30;break}if(!(x=r[h]).box.tokenAccount){e.next=27;break}return b=(0,F.createTokenAccount)(m,n.publicKey,s,(0,o.toPublicKey)(x.box.tokenMint),(0,o.toPublicKey)(c),f),p.push(b.toBase58()),y=(0,W.approve)(m,[],(0,o.toPublicKey)(x.box.tokenAccount),n.publicKey,x.box.amount.toNumber()),f.push(y),e.next=25,(0,D.addTokenToInactiveVault)(x.draft.masterEdition&&x.draft.masterEdition.info.key===o.MetadataKey.MasterEditionV2?new(_())(1):x.box.amount,x.box.tokenMint,x.box.tokenAccount,b.toBase58(),i,n.publicKey.toBase58(),n.publicKey.toBase58(),y.publicKey.toBase58(),m);case 25:1===u&&(l.push(f),d.push(m),u=0,f=[],m=[]),u++;case 27:h++,e.next=16;break;case 30:return d[d.length-1]!==m&&(l.push(f),d.push(m)),e.abrupt("return",{signers:l,instructions:d,safetyDepositTokenStores:p});case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wa(e,t){return La.apply(this,arguments)}function La(){return(La=(0,g.Z)(k().mark((function e(t,n){var i,r,a,s,c,u,l,d;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:return i=o.utils.programIds(),r=[],a=[],e.next=7,t.getMinimumBalanceForRentExemption(D.MAX_EXTERNAL_ACCOUNT_SIZE);case 7:return s=e.sent,c=R.Keypair.generate(),u=c.publicKey.toBase58(),l=new D.ExternalPriceAccount({pricePerShare:new(_())(0),priceMint:ne.toBase58(),allowedToCombine:!0}),d=R.SystemProgram.createAccount({fromPubkey:n.publicKey,newAccountPubkey:c.publicKey,lamports:s,space:D.MAX_EXTERNAL_ACCOUNT_SIZE,programId:(0,o.toPublicKey)(i.vault)}),a.push(d),r.push(c),e.next=16,(0,D.updateExternalPriceAccount)(u,l,a);case 16:return e.abrupt("return",{externalPriceAccount:u,priceMint:ne.toBase58(),instructions:a,signers:r});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Va=n(72490);function Ua(e,t,n){return za.apply(this,arguments)}function za(){return(za=(0,g.Z)(k().mark((function e(t,n,i){var r,a,s,c,u,l,d;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:r=0,a=[],s=[],c=[],u=[],l=0;case 8:if(!(l<i.length)){e.next=18;break}if((d=i[l]).config.winningConfigType!==B.WinningConfigType.PrintingV1||!d.draft.masterEdition){e.next=13;break}return e.next=13,(0,o.deprecatedCreateReservationList)(d.draft.metadata.pubkey,d.draft.masterEdition.pubkey,n,t.publicKey.toBase58(),t.publicKey.toBase58(),u);case 13:10===r&&(a.push(c),s.push(u),r=0,c=[],u=[]),r++;case 15:l++,e.next=8;break;case 18:return s[s.length-1]!==u&&(a.push(c),s.push(u)),e.abrupt("return",{signers:a,instructions:s});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qa(e,t,n){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,g.Z)(k().mark((function e(t,n,i){var r,a,s,c,u,l,d,p,f,m,h,x,b;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:r=o.utils.programIds(),a=0,s=[],c=[],u=[],l=[],d=0;case 9:if(!(d<i.length)){e.next=44;break}if(m=i[d],(null===(p=m.draft.masterEdition)||void 0===p?void 0:p.info.key)==o.MetadataKey.MasterEditionV1){e.next=13;break}return e.abrupt("continue",41);case 13:if(h=null===(f=m.draft.masterEdition)||void 0===f?void 0:f.info.printingMint,m.box.tokenMint!==h||m.box.tokenAccount){e.next=22;break}return e.next=17,(0,o.findProgramAddress)([n.publicKey.toBuffer(),r.token.toBuffer(),(0,o.toPublicKey)(h).toBuffer()],r.associatedToken);case 17:x=e.sent[0],(0,o.createAssociatedTokenAccountInstruction)(l,(0,o.toPublicKey)(x),n.publicKey,n.publicKey,(0,o.toPublicKey)(h)),console.log("Making atas"),m.draft.printingMintHolding=x,m.box.tokenAccount=x;case 22:if(!m.box.tokenAccount||m.box.tokenMint!==h){e.next=40;break}return b=0,e.prev=24,e.next=27,t.getTokenAccountBalance((0,o.toPublicKey)(m.box.tokenAccount));case 27:if(e.t0=e.sent.value.uiAmount,e.t0){e.next=30;break}e.t0=0;case 30:b=e.t0,e.next=36;break;case 33:e.prev=33,e.t1=e.catch(24),console.error(e.t1);case 36:if(!(b<m.box.amount.toNumber()&&m.draft.masterEdition)){e.next=39;break}return e.next=39,(0,o.deprecatedMintPrintingTokens)(m.box.tokenAccount,m.box.tokenMint,n.publicKey.toBase58(),m.draft.metadata.pubkey,m.draft.masterEdition.pubkey,new(_())(m.box.amount.toNumber()-b),l);case 39:a++;case 40:4===a&&(s.push(u),c.push(l),a=0,u=[],l=[]);case 41:d++,e.next=9;break;case 44:return c[c.length-1]!==l&&(s.push(u),c.push(l)),e.abrupt("return",{signers:s,instructions:c,safetyDepositConfigs:i});case 46:case"end":return e.stop()}}),e,null,[[24,33]])})))).apply(this,arguments)}function Ga(e,t,n,i){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,g.Z)(k().mark((function e(t,n,i,r){var a,s;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:return a=[],s=[],e.next=6,(0,o.setAuctionAuthority)(i,t.publicKey.toBase58(),r,s);case 6:return e.next=8,(0,o.setVaultAuthority)(n,t.publicKey.toBase58(),r,s);case 8:return e.abrupt("return",{instructions:s,signers:a});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xa(e,t){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,g.Z)(k().mark((function e(t,n){var i,r,a,s,c,u,l,d;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:i=t.publicKey.toBase58(),r=[],a=[],s=[],c=[],u=0;case 8:if(!(u<n.length)){e.next=18;break}if(d=n[u].metadata,null!==(l=d.info.data.creators)&&void 0!==l&&l.find((function(e){return e.address===i}))||d.info.primarySaleHappened){e.next=15;break}return console.log("For token",d.info.data.name,"marking it sold because i didnt make it but i want to keep proceeds"),e.next=14,(0,o.updatePrimarySaleHappenedViaToken)(d.pubkey,i,n[u].holding,c);case 14:10===c.length&&(r.push(s),a.push(c),s=[],c=[]);case 15:u++,e.next=8;break;case 18:return c.length<10&&c.length>0&&(r.push(s),a.push(c)),e.abrupt("return",{instructions:a,signers:r});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ja=n(36038),$a=n(46418),eo=n(68633),to=n(82854);function no(e,t,n,i,r,a,o){return io.apply(this,arguments)}function io(){return(io=(0,g.Z)(k().mark((function e(t,n,i,r,a,o,s){var c,u,l,d,p,f,m,h,x,b,y;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:return c=t.publicKey.toBase58(),u=[],e.next=6,oo(t,n,i,r,a);case 6:return l=e.sent,d=l.auctionCache,p=l.instructions,f=l.signers,m=0==o.length?void 0:o[0].info.auctionCaches[0],e.next=13,(0,B.getStoreIndexer)(0);case 13:return h=e.sent,e.next=16,(0,eo.I)(h,d,c,new(_())(0),new(_())(0),u,void 0,m);case 16:return e.next=18,ro(t,o);case 18:return x=e.sent,b=x.instructions,y=x.signers,e.abrupt("return",{instructions:[].concat((0,v.Z)(s?[]:p),[u],(0,v.Z)(b)),signers:[].concat((0,v.Z)(s?[]:f),[[]],(0,v.Z)(y))});case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ro(e,t){return ao.apply(this,arguments)}function ao(){return(ao=(0,g.Z)(k().mark((function e(t,n){var i,r,a,o,s,c,u,l,d,p,f;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:i=t.publicKey.toBase58(),r=[],a=[],o=[],s=[],c=n[0],u=null;case 9:if(!c||c.info.auctionCaches.length!=B.MAX_INDEXED_ELEMENTS){e.next=27;break}if(l=c.info.auctionCaches[c.info.auctionCaches.length-1],(d=n[c.info.page.toNumber()+1])?(u=c,c=d):(u=c,c=null),!c){e.next=17;break}e.t0=c.pubkey,e.next=20;break;case 17:return e.next=19,(0,B.getStoreIndexer)(u.info.page.toNumber()+1);case 19:e.t0=e.sent;case 20:return p=e.t0,f=c?c.info.auctionCaches[0]:void 0,e.next=24,(0,eo.I)(p,l,i,u.info.page.add(new(_())(1)),new(_())(0),s,void 0,f);case 24:s.length>=10&&(r.push(o),a.push(s),o=[],s=[]),e.next=9;break;case 27:return s.length<10&&s.length>0&&(r.push(o),a.push(s)),e.abrupt("return",{instructions:a,signers:r});case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oo(e,t,n,i,r){return so.apply(this,arguments)}function so(){return(so=(0,g.Z)(k().mark((function e(t,n,i,r,a){var o,s,c,u,l,d,p,f;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:return o=t.publicKey.toBase58(),s=[],c=[],u=[],l=[],e.next=9,(0,B.getAuctionCache)(i);case 9:d=e.sent,p=0;case 11:if(!(p<a.length)){e.next=21;break}return e.next=14,(0,D.getSafetyDepositBoxAddress)(n,a[p]);case 14:return f=e.sent,e.next=17,(0,to.t)(d,o,i,f,r,new(_())(0),l);case 17:l.length>=10&&(s.push(u),c.push(l),u=[],l=[]);case 18:p++,e.next=11;break;case 21:return l.length<10&&l.length>0&&(s.push(u),c.push(l)),e.abrupt("return",{auctionCache:d,instructions:c,signers:s});case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function co(e,t,n,i,r,a,o,s){return uo.apply(this,arguments)}function uo(){return(uo=(0,g.Z)(k().mark((function e(t,n,i,r,a,s,c,u){var l,d,p,f,m,h,x,b,y,g,j,w,N,P,S,M,T,A,C,O,E,B,K,I,_,R,F,D,W,V,U,z,q,H,G,Y,X,Q,J,$,ee,te,ne,ie,re,ae;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMinimumBalanceForRentExemption(Z.AccountLayout.span);case 2:return h=e.sent,e.next=5,Wa(t,n);case 5:return x=e.sent,b=x.externalPriceAccount,y=x.priceMint,g=x.instructions,j=x.signers,e.next=12,vr(t,n,y,b);case 12:return w=e.sent,N=w.instructions,P=w.signers,S=w.vault,M=w.fractionalMint,T=w.redeemTreasury,A=w.fractionTreasury,e.next=21,Pr(n,S,r);case 21:return C=e.sent,O=C.instructions,E=C.signers,B=C.auction,e.next=27,lo(n,a,s);case 27:return K=e.sent,e.next=30,qa(t,n,K);case 30:return I=e.sent,_=I.instructions,R=I.signers,F=I.safetyDepositConfigs,e.next=36,fo(n,S,c,h,F,r);case 36:return D=e.sent,W=D.instructions,V=D.signers,U=D.auctionManager,e.next=42,Fa(t,n,S,F);case 42:return z=e.sent,q=z.instructions,H=z.signers,G=z.safetyDepositTokenStores,e.next=48,Ua(n,U,F);case 48:return Y=e.sent,X=Y.instructions,Q=Y.signers,e.next=53,Xa(n,a);case 53:return e.t0=e.sent,e.t1={instructions:g,signers:j},e.t2={instructions:N,signers:P},e.next=58,L(t,n,S,M,A,T,y,b);case 58:return e.t3=e.sent,e.t4={instructions:q,signers:H},e.t5={instructions:X,signers:Q},e.t6={instructions:O,signers:E},e.t7={instructions:W,signers:V},e.next=65,Ga(n,S,B,U);case 65:return e.t8=e.sent,e.next=68,ho(n,S);case 68:if(e.t9=e.sent,!s){e.next=75;break}return e.next=72,bo(n,U,i,S,G[G.length-1],s,h);case 72:e.t10=e.sent,e.next=76;break;case 75:e.t10=void 0;case 76:if(e.t11=e.t10,!s){e.next=83;break}return e.next=80,wo(t,n,null===s||void 0===s||null===(l=s.masterEdition)||void 0===l?void 0:l.info.oneTimePrintingAuthorizationMint);case 80:e.t12=e.sent,e.next=84;break;case 83:e.t12=void 0;case 84:return e.t13=e.t12,e.next=87,jo(n,i,S,F.filter((function(e){var t,n;return!s||(null===(t=s.masterEdition)||void 0===t?void 0:t.info.key)==o.MetadataKey.MasterEditionV1&&e.draft.metadata.pubkey!==s.metadata.pubkey||(null===(n=s.masterEdition)||void 0===n?void 0:n.info.key)==o.MetadataKey.MasterEditionV2})),G);case 87:return e.t14=e.sent,e.t15={instructions:_,signers:R},e.next=91,no(n,S,B,U,F.map((function(e){return e.draft.metadata.info.mint})),u);case 91:e.t16=e.sent,J={markItemsThatArentMineAsSold:e.t0,externalPriceAccount:e.t1,createVault:e.t2,closeVault:e.t3,addTokens:e.t4,deprecatedCreateReservationList:e.t5,makeAuction:e.t6,initAuctionManager:e.t7,setVaultAndAuctionAuthorities:e.t8,startAuction:e.t9,deprecatedValidateParticipation:e.t11,deprecatedBuildAndPopulateOneTimeAuthorizationAccount:e.t13,validateBoxes:e.t14,deprecatedPopulatePrintingTokens:e.t15,cacheAuctionIndexer:e.t16},$=[].concat((0,v.Z)(J.markItemsThatArentMineAsSold.signers),[J.externalPriceAccount.signers,(null===(d=J.deprecatedBuildAndPopulateOneTimeAuthorizationAccount)||void 0===d?void 0:d.signers)||[]],(0,v.Z)(J.deprecatedPopulatePrintingTokens.signers),[J.createVault.signers],(0,v.Z)(J.addTokens.signers),(0,v.Z)(J.deprecatedCreateReservationList.signers),[J.closeVault.signers,J.makeAuction.signers,J.initAuctionManager.signers,J.setVaultAndAuctionAuthorities.signers,(null===(p=J.deprecatedValidateParticipation)||void 0===p?void 0:p.signers)||[]],(0,v.Z)(J.validateBoxes.signers),[J.startAuction.signers],(0,v.Z)(J.cacheAuctionIndexer.signers)),ee={},te=[].concat((0,v.Z)(J.markItemsThatArentMineAsSold.instructions),[J.externalPriceAccount.instructions,(null===(f=J.deprecatedBuildAndPopulateOneTimeAuthorizationAccount)||void 0===f?void 0:f.instructions)||[]],(0,v.Z)(J.deprecatedPopulatePrintingTokens.instructions),[J.createVault.instructions],(0,v.Z)(J.addTokens.instructions),(0,v.Z)(J.deprecatedCreateReservationList.instructions),[J.closeVault.instructions,J.makeAuction.instructions,J.initAuctionManager.instructions,J.setVaultAndAuctionAuthorities.instructions,(null===(m=J.deprecatedValidateParticipation)||void 0===m?void 0:m.instructions)||[]],(0,v.Z)(J.validateBoxes.instructions),[J.startAuction.instructions],(0,v.Z)(J.cacheAuctionIndexer.instructions)).filter((function(e,t){return e.length>0||(ee[t]=!0,!1)})),ne=$.filter((function(e,t){return!ee[t]})),ie=0,re=0,ae=null;case 100:if(!(ie<te.length&&re<3)){e.next=123;break}if(te=te.slice(ie,te.length),ne=ne.slice(ie,ne.length),te.length===ae?re+=1:re=0,e.prev=104,1!==te.length){e.next=111;break}return e.next=108,(0,o.sendTransactionWithRetry)(t,n,te[0],ne[0],"single");case 108:ie=1,e.next=114;break;case 111:return e.next=113,(0,o.sendTransactions)(t,n,te,ne,o.SequenceType.StopOnFailure,"single");case 113:ie=e.sent;case 114:e.next=119;break;case 116:e.prev=116,e.t17=e.catch(104),console.error(e.t17);case 119:console.log("Died on ",ie,"retrying from instruction",te[ie],"instructions length is",te.length),ae=te.length,e.next=100;break;case 123:if(!(ie<te.length)){e.next=125;break}throw new Error("Failed to create");case 125:return e.abrupt("return",{vault:S,auction:B,auctionManager:U});case 126:case"end":return e.stop()}}),e,null,[[104,116]])})))).apply(this,arguments)}function lo(e,t,n){return po.apply(this,arguments)}function po(){return(po=(0,g.Z)(k().mark((function e(t,n,i){var r,a,s,c,u;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:if(r=[],n.forEach((function(e,t){var n,i=(0,v.Z)(e.amountRanges.map((function(e){return e.amount}))).sort().reverse()[0],a=(0,v.Z)(e.amountRanges.map((function(e){return e.length}))).sort().reverse()[0];r.push({box:{tokenAccount:e.winningConfigType!==B.WinningConfigType.PrintingV1?e.holding:e.printingMintHolding,tokenMint:e.winningConfigType!==B.WinningConfigType.PrintingV1?e.metadata.info.mint:null===(n=e.masterEdition)||void 0===n?void 0:n.info.printingMint,amount:e.winningConfigType==B.WinningConfigType.PrintingV2||e.winningConfigType==B.WinningConfigType.FullRightsTransfer?new(_())(1):new(_())(e.amountRanges.reduce((function(e,t){return e.add(t.amount.mul(t.length))}),new(_())(0)))},config:new B.SafetyDepositConfig({directArgs:{auctionManager:R.SystemProgram.programId.toBase58(),order:new(_())(t),amountRanges:e.amountRanges,amountType:i.gte(new(_())(254))?B.TupleNumericType.U16:B.TupleNumericType.U8,lengthType:a.gte(new(_())(254))?B.TupleNumericType.U16:B.TupleNumericType.U8,winningConfigType:e.winningConfigType,participationConfig:null,participationState:null}}),draft:e})})),!i||!i.masterEdition){e.next=24;break}if(a=(0,v.Z)(i.amountRanges.map((function(e){return e.amount}))).sort().reverse()[0],s=(0,v.Z)(i.amountRanges.map((function(e){return e.length}))).sort().reverse()[0],c=new B.SafetyDepositConfig({directArgs:{auctionManager:R.SystemProgram.programId.toBase58(),order:new(_())(n.length),amountRanges:i.amountRanges,amountType:null!==a&&void 0!==a&&a.gte(new(_())(255))?B.TupleNumericType.U32:B.TupleNumericType.U8,lengthType:null!==s&&void 0!==s&&s.gte(new(_())(255))?B.TupleNumericType.U32:B.TupleNumericType.U8,winningConfigType:B.WinningConfigType.Participation,participationConfig:i.participationConfig||null,participationState:new B.ParticipationStateV2({collectedToAcceptPayment:new(_())(0)})}}),i.masterEdition.info.key!=o.MetadataKey.MasterEditionV1){e.next=23;break}return u=i.masterEdition,e.t0=r,e.next=13,(0,o.findProgramAddress)([t.publicKey.toBuffer(),(0,o.programIds)().token.toBuffer(),(0,o.toPublicKey)(null===u||void 0===u?void 0:u.info.oneTimePrintingAuthorizationMint).toBuffer()],(0,o.programIds)().associatedToken);case 13:e.t1=e.sent[0],e.t2=null===u||void 0===u?void 0:u.info.oneTimePrintingAuthorizationMint,e.t3=new(_())(1),e.t4={tokenAccount:e.t1,tokenMint:e.t2,amount:e.t3},e.t5=c,e.t6=i,e.t7={box:e.t4,config:e.t5,draft:e.t6},e.t0.push.call(e.t0,e.t7),e.next=24;break;case 23:r.push({box:{tokenAccount:i.holding,tokenMint:i.metadata.info.mint,amount:new(_())(1)},config:c,draft:i});case 24:return console.log("Temps",r),e.abrupt("return",r);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fo(e,t,n,i,r,a){return mo.apply(this,arguments)}function mo(){return(mo=(0,g.Z)(k().mark((function e(t,n,i,r,a,s){var c,u,l,d,p,f,m,h;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:if(u=null===(c=(0,o.programIds)().store)||void 0===c?void 0:c.toBase58()){e.next=5;break}throw new Error("Store not initialized");case 5:return l=[],d=[],e.next=9,(0,B.getAuctionKeys)(n);case 9:return p=e.sent,f=p.auctionManagerKey,m=(0,F.createTokenAccount)(d,t.publicKey,r,(0,o.toPublicKey)(i),(0,o.toPublicKey)(f),l).toBase58(),(h=[s.winners.usize.toNumber(),a.length,100].sort()[0])<10&&(h=10),e.next=16,(0,$a.J)(n,t.publicKey.toBase58(),t.publicKey.toBase58(),m,u,a.length>=254?B.TupleNumericType.U16:B.TupleNumericType.U8,s.winners.usize.toNumber()>=254?B.TupleNumericType.U16:B.TupleNumericType.U8,new(_())(h),d);case 16:return e.abrupt("return",{instructions:d,signers:l,auctionManager:f});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ho(e,t){return xo.apply(this,arguments)}function xo(){return(xo=(0,g.Z)(k().mark((function e(t,n){var i,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:return i=[],r=[],e.next=6,(0,B.startAuction)(n,t.publicKey.toBase58(),r);case 6:return e.abrupt("return",{instructions:r,signers:i});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bo(e,t,n,i,r,a,o){return yo.apply(this,arguments)}function yo(){return(yo=(0,g.Z)(k().mark((function e(t,n,i,r,a,s,c){var u,l,d,p,f,m,h,x,b,y;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:if(l=null===(u=(0,o.programIds)().store)||void 0===u?void 0:u.toBase58()){e.next=5;break}throw new Error("Store not initialized");case 5:if(d=[],p=[],!s.metadata.info.data.creators){e.next=13;break}return e.next=10,vo(i,s.metadata.info.data.creators);case 10:e.t0=e.sent,e.next=14;break;case 13:e.t0=void 0;case 14:return f=e.t0,e.next=17,(0,B.getAuctionKeys)(r);case 17:if(m=e.sent,h=m.auctionManagerKey,!s.masterEdition||s.masterEdition.info.key!=o.MetadataKey.MasterEditionV1){e.next=38;break}return b=s.masterEdition,y=(0,F.createTokenAccount)(d,t.publicKey,c,(0,o.toPublicKey)(b.info.printingMint),(0,o.toPublicKey)(h),p).toBase58(),e.t1=Va.I,e.t2=n,e.t3=s.metadata.pubkey,e.t4=null===(x=s.masterEdition)||void 0===x?void 0:x.pubkey,e.t5=y,e.t6=t.publicKey.toBase58(),e.t7=f,e.t8=l,e.next=32,(0,o.getSafetyDepositBoxAddress)(r,b.info.oneTimePrintingAuthorizationMint);case 32:return e.t9=e.sent,e.t10=a,e.t11=r,e.t12=d,e.next=38,(0,e.t1)(e.t2,e.t3,e.t4,e.t5,e.t6,e.t7,e.t8,e.t9,e.t10,e.t11,e.t12);case 38:return e.abrupt("return",{instructions:d,signers:p});case 39:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vo(e,t){return go.apply(this,arguments)}function go(){return(go=(0,g.Z)(k().mark((function e(t,n){var i,r,a,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<n.length)){e.next=8;break}if(o=n[r],null===(a=t[o.address])||void 0===a||!a.info.activated){e.next=5;break}return e.abrupt("return",t[o.address].pubkey);case 5:r++,e.next=1;break;case 8:return e.next=10,(0,B.getWhitelistedCreator)(null===(i=n[0])||void 0===i?void 0:i.address);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jo(e,t,n,i,r){return ko.apply(this,arguments)}function ko(){return(ko=(0,g.Z)(k().mark((function e(t,n,i,r,a){var s,c,u,l,d,p,f,m,h,x,b;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:if(c=null===(s=(0,o.programIds)().store)||void 0===s?void 0:s.toBase58()){e.next=5;break}throw new Error("Store not initialized");case 5:u=[],l=[],d=0;case 8:if(!(d<r.length)){e.next=40;break}if(p=[],f=[],m=void 0,h=r[d].draft.masterEdition,r[d].config.winningConfigType!==B.WinningConfigType.PrintingV1||!h||!h.info.printingMint){e.next=19;break}return e.next=16,(0,o.getSafetyDepositBox)(i,r[d].draft.masterEdition.info.printingMint);case 16:m=e.sent,e.next=22;break;case 19:return e.next=21,(0,o.getSafetyDepositBox)(i,r[d].draft.metadata.info.mint);case 21:m=e.sent;case 22:return e.next=24,(0,o.getEdition)(r[d].draft.metadata.info.mint);case 24:if(x=e.sent,!r[d].draft.metadata.info.data.creators){e.next=31;break}return e.next=28,vo(n,r[d].draft.metadata.info.data.creators);case 28:e.t0=e.sent,e.next=32;break;case 31:e.t0=void 0;case 32:return b=e.t0,e.next=35,(0,Ja.e)(i,r[d].draft.metadata.pubkey,m,a[d],r[d].config.winningConfigType===B.WinningConfigType.PrintingV1?null===h||void 0===h?void 0:h.info.printingMint:r[d].draft.metadata.info.mint,t.publicKey.toBase58(),t.publicKey.toBase58(),t.publicKey.toBase58(),f,x,b,c,r[d].config);case 35:u.push(p),l.push(f);case 37:d++,e.next=8;break;case 40:return e.abrupt("return",{instructions:l,signers:u});case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wo(e,t,n){return No.apply(this,arguments)}function No(){return(No=(0,g.Z)(k().mark((function e(t,n,i){var r,a,s;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:if(i){e.next=4;break}return e.abrupt("return",{instructions:[],signers:[]});case 4:return r=[],a=[],e.next=8,(0,o.findProgramAddress)([n.publicKey.toBuffer(),(0,o.programIds)().token.toBuffer(),(0,o.toPublicKey)(i).toBuffer()],(0,o.programIds)().associatedToken);case 8:return s=e.sent[0],e.next=11,t.getAccountInfo((0,o.toPublicKey)(s));case 11:if(e.sent){e.next=13;break}(0,o.createAssociatedTokenAccountInstruction)(a,(0,o.toPublicKey)(s),n.publicKey,n.publicKey,(0,o.toPublicKey)(i));case 13:return a.push(Z.Token.createMintToInstruction((0,o.programIds)().token,(0,o.toPublicKey)(i),(0,o.toPublicKey)(s),n.publicKey,[],1)),e.abrupt("return",{instructions:a,signers:r});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Po=n(6466),So=n(33371);function Mo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function To(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mo(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ao,Co=function(e){var t=e.momentObj,n=e.setMomentObj,i=e.datePickerProps,r=void 0===i?{}:i,a=e.timePickerProps,o=void 0===a?{}:a;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Po.Z,To({className:"field-date",size:"large",value:t,onChange:function(e){if(e){if(!t)return n(e);var i=t.clone();i.year(e.year()),i.month(e.month()),i.date(e.date()),n(i)}}},r)),(0,c.jsx)(So.Z,To({className:"field-date",size:"large",value:t,onChange:function(e){if(e){if(!t)return n(e);var i=t.clone();i.hour(e.hour()),i.minute(e.minute()),i.second(e.second()),n(i)}}},o))]})},Zo=n(9574),Oo=n(30865),Eo=Ki.Z.Search,Bo=wn.Z.TabPane;function Ko(e){var t=e.mint,n=e.onClick,i=nt().mainnetTokens.filter((function(e){return e.address==t.toBase58()}))[0];return(0,c.jsxs)(qt.Z,{onClick:n,className:"token-button",justify:"space-between",children:[(0,c.jsx)(Ht.Z,{children:(0,c.jsxs)(qt.Z,{children:[(0,c.jsx)(nn,{iconSize:40,iconFile:null===i||void 0===i?void 0:i.logoURI,style:{marginTop:2.5}}),(0,c.jsx)(Fo,{mint:t,style:{fontSize:14,fontWeight:700}})]})}),(0,c.jsx)(Ht.Z,{children:(0,c.jsx)(Oo.Z,{style:{marginLeft:10,fontWeight:700}})})]})}function Io(e){var t=e.open,n=e.onClose,r=e.setMint,a=(0,i.useState)(Ao.Main),s=a[0],u=a[1],l=(0,i.useState)(""),d=l[0],p=l[1],f=d.toLowerCase(),m=function(){var e=nt();return{swappableTokens:e.swappableTokens,swappableTokensWormhole:e.swappableTokensWormhole,swappableTokensSollet:e.swappableTokensSollet}}(),h=m.swappableTokens,x=m.swappableTokensSollet,b=m.swappableTokensWormhole,y=s===Ao.Main?h:s===Ao.Wormhole?b:x,v=""===d?y:y.filter((function(e){return e.symbol.toLowerCase().startsWith(f)||e.name.toLowerCase().startsWith(f)||e.address.toLowerCase().startsWith(f)}));return(0,c.jsxs)(o.MetaplexModal,{visible:t,onCancel:n,bodyStyle:{padding:"25px 0 0 0"},children:[(0,c.jsxs)(Ht.Z,{className:"dialog-header",children:[(0,c.jsx)(Yi.Z,{style:{paddingBottom:"16px",textAlign:"center",textTransform:"uppercase",fontWeight:600},children:"Select a token as your auction mint"}),(0,c.jsx)(Ki.Z,{autoFocus:!0,className:"input text-field",placeholder:"Search token mints",allowClear:!0,value:d,onChange:function(e){return p(e.target.value)}})]}),(0,c.jsxs)("div",{className:"dialog-content",children:[(0,c.jsx)(M.ZP,{style:{padding:"16px 0"},children:v.map((function(e){return(0,c.jsx)(_o,{tokenInfo:e,onClick:function(e){r(e),console.log("SET MINT TO",e.toBase58()),n()}},e.address)}))}),(0,c.jsx)(Eo,{enterButton:"Go!",className:"input search-text-field",placeholder:"Can't find your token? set it here!",allowClear:!0,size:"large",onSearch:function(e){return function(e){var t=!1;try{t=R.PublicKey.isOnCurve((0,o.toPublicKey)(e).toBuffer().slice(0,32))}catch(i){console.log("Not an ed25519 curve pubkey")}t&&(console.log("MINT OK"),r((0,o.toPublicKey)(e)),n())}(e)}})]}),(0,c.jsxs)(wn.Z,{activeKey:s,onTabClick:function(e){return u(e)},className:"token-tabs",children:[(0,c.jsx)(Bo,{className:"token-tab",tab:(0,c.jsx)("span",{className:"tab-title",children:"Main"})},Ao.Main),(0,c.jsx)(Bo,{className:"token-tab",tab:(0,c.jsx)("span",{className:"tab-title",children:"Wormhole"})},Ao.Wormhole),(0,c.jsx)(Bo,{className:"token-tab",tab:(0,c.jsx)("span",{className:"tab-title",children:"Sollet"})},Ao.Sollet)]})]})}function _o(e){var t=e.tokenInfo,n=e.onClick,i=new R.PublicKey(t.address);return(0,c.jsxs)(M.ZP.Item,{onClick:function(){return n(i)},className:"token-list-item",children:[(0,c.jsx)(Ro,{mint:i,style:{width:"30px",borderRadius:"15px"}}),(0,c.jsx)(Fo,{mint:i})]})}function Ro(e){var t=e.mint,n=e.style,i=nt().tokenMap.get(t.toString());return(0,c.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:null!==i&&void 0!==i&&i.logoURI?(0,c.jsx)("img",{alt:"Logo",style:n,src:null===i||void 0===i?void 0:i.logoURI}):(0,c.jsx)("div",{style:n})})}function Fo(e){var t=e.mint,n=(e.style,nt().tokenMap.get(t.toString())),i=(n&&n.symbol,n?n.name:"Custom Token");return(0,c.jsxs)("div",{style:{marginLeft:"16px",overflow:"hidden"},children:[(0,c.jsx)("div",{style:{fontWeight:500,color:"white"},children:n?i:"".concat((0,o.shortenAddress)(t.toBase58()))}),(0,c.jsx)("div",{color:"textSecondary",style:{fontSize:"14px",color:"#797A8C",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:i})]})}!function(e){e.Main="0",e.Wormhole="1",e.Sollet="2"}(Ao||(Ao={}));var Do=function(e){var t=e.currentFunds,n=e.minimumFunds,i=e.message,r=nt().mainnetTokens.filter((function(e){return e.address==o.WRAPPED_SOL_MINT.toBase58()}))[0];return(0,c.jsxs)(o.MetaplexModal,{title:"Transaction Alert",visible:e.isModalVisible,footer:null,onCancel:e.onClose,className:"fundsissue",closeIcon:(0,c.jsx)("img",{src:"/modals/close.svg"}),children:[(0,c.jsx)("b",{className:"issue-title",children:"Insufficient funds"}),(0,c.jsx)("div",{className:"card-bid-info",children:(0,c.jsx)(oi,{containerStyle:{flexDirection:"row"},title:"Your Balance",displaySymbol:"Safe",amount:t,iconSize:24,tokenInfo:r})}),(0,c.jsx)("hr",{}),(0,c.jsx)("div",{className:"card-bid-info",children:(0,c.jsx)(oi,{containerStyle:{flexDirection:"row"},title:i,displaySymbol:"SAFE",amount:n,iconSize:24,tokenInfo:r})}),(0,c.jsx)("hr",{}),(0,c.jsx)("span",{className:"issue-desc",children:"Deposit the minimum amount of SOL and try again."}),(0,c.jsx)(m.Z,{className:"secondary-btn width-100",onClick:e.onClose,children:"Dismiss"})]})};function Wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Lo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wo(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vo,Uo,zo=$t.Z.Option,qo=Hi.Z.Step,Ho=o.constants.ZERO;!function(e){e[e.InstantSale=0]="InstantSale",e[e.Limited=1]="Limited",e[e.Single=2]="Single",e[e.Open=3]="Open",e[e.Tiered=4]="Tiered"}(Vo||(Vo={})),function(e){e[e.Limited=0]="Limited",e[e.Single=1]="Single",e[e.Open=2]="Open"}(Uo||(Uo={}));var Go,Yo=function(){var e,t=(0,o.useConnection)(),n=(0,b.useWallet)(),r=(0,Xe.useMeta)(),s=r.whitelistedCreatorsByCreator,u=r.storeIndexer,l=(0,a.UO)().step_param,d=(0,a.k6)(),p=(0,o.useMint)(ne),f=xt().width,h=(0,i.useState)(0),x=h[0],v=h[1],j=(0,i.useState)(!0),w=j[0],N=j[1],P=(0,i.useState)(void 0),S=P[0],M=P[1],T=(0,i.useState)({reservationPrice:0,items:[],category:Vo.Open,auctionDurationType:"minutes",gapTimeType:"minutes",winnersCount:1,startSaleTS:void 0,startListTS:void 0,quoteMintAddress:"",quoteMintInfo:void 0,quoteMintInfoExtended:void 0}),A=T[0],C=T[1],Z=(0,i.useState)({items:[],tiers:[]}),O=Z[0],E=Z[1],K=(0,i.useState)(),I=(K[0],K[1],(0,i.useState)()),F=(I[0],I[1],(0,i.useState)());F[0],F[1];(0,i.useEffect)((function(){l?v(parseInt(l)):D(0)}),[l]);var D=function(e){var t=void 0===e?x+1:e;d.push("/auction/create/".concat(t.toString()))},W=function(){var e=(0,g.Z)(k().mark((function e(){var i,r,a,c,l,d,f,m,h,x,b,y,v,g,j,w;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A.category===Vo.InstantSale&&A.instantSaleType===Uo.Open?(r=A.items,a=A.instantSalePrice,r.length>0&&r[0].participationConfig&&(r[0].participationConfig.fixedPrice=new(_())((0,o.toLamports)(a,p)||0)),i=new o.WinnerLimit({type:o.WinnerLimitType.Unlimited,usize:Ho})):A.category===Vo.InstantSale?(c=A.items,l=A.editions,c.length>0&&(d=c[0],l||(d.winningConfigType=d.metadata.info.updateAuthority===((null===n||void 0===n?void 0:n.publicKey)||R.SystemProgram.programId).toBase58()?B.WinningConfigType.FullRightsTransfer:B.WinningConfigType.TokenOnlyTransfer),d.amountRanges=[new B.AmountRange({amount:new(_())(1),length:new(_())(l||1)})]),i=new o.WinnerLimit({type:o.WinnerLimitType.Capped,usize:new(_())(l||1)})):A.category===Vo.Open?(A.items.length>0&&A.items[0].participationConfig&&(A.items[0].participationConfig.fixedPrice=new(_())((0,o.toLamports)(A.participationFixedPrice,p)||0)),i=new o.WinnerLimit({type:o.WinnerLimitType.Unlimited,usize:Ho})):A.category===Vo.Limited||A.category===Vo.Single?(A.items.length>0&&(f=A.items[0],A.category==Vo.Single&&f.masterEdition&&(f.winningConfigType=f.metadata.info.updateAuthority===((null===n||void 0===n?void 0:n.publicKey)||R.SystemProgram.programId).toBase58()?B.WinningConfigType.FullRightsTransfer:B.WinningConfigType.TokenOnlyTransfer),f.amountRanges=[new B.AmountRange({amount:new(_())(1),length:A.category===Vo.Single?new(_())(1):new(_())(A.editions||1)})]),i=new o.WinnerLimit({type:o.WinnerLimitType.Capped,usize:A.category===Vo.Single?new(_())(1):new(_())(A.editions||1)}),A.participationNFT&&A.participationNFT.participationConfig&&(A.participationNFT.participationConfig.fixedPrice=new(_())((0,o.toLamports)(A.participationFixedPrice,p)||0))):((m=O.tiers).forEach((function(e){return e.items=e.items.filter((function(e){return void 0!==e.winningConfigType}))})),h=m.filter((function(e){return e.items.length>0&&e.winningSpots.length>0})),O.items.forEach((function(e,t){var n=[];h.forEach((function(i){var r={},a=[],o=i.items.find((function(e){return e.safetyDepositBoxIndex==t}));if(o){e.winningConfigType=o.winningConfigType;var s=i.winningSpots.sort();s.forEach((function(e,t){if(r[e-1])r[e]=r[e-1],r[e].length=r[e].length.add(new(_())(1));else{r[e]=new B.AmountRange({amount:new(_())(o.amount),length:new(_())(1)});var n=t-1>0?e-s[t-1]-1:e;n>0&&a.push(new B.AmountRange({amount:new(_())(0),length:new(_())(n)})),a.push(r[e])}}));var c=n;n=[];for(var u=0,l=0;u<c.length||l<a.length;){var d=new(_())(0);l<a.length&&a[l].amount.gt(new(_())(0))&&(d=a[l].amount),u==c.length?(n.push(new B.AmountRange({amount:d,length:a[l].length})),l++):l==a.length?(n.push(c[u]),u++):c[u].length.gt(a[l].length)?(c[u].length=c[u].length.sub(a[l].length),n.push(new B.AmountRange({amount:c[u].amount.add(d),length:a[l].length})),l+=1):a[l].length.gt(c[u].length)?(a[l].length=a[l].length.sub(c[u].length),n.push(new B.AmountRange({amount:c[u].amount.add(d),length:c[u].length})),u+=1):a[l].length.eq(c[u].length)&&(n.push(new B.AmountRange({amount:c[u].amount.add(d),length:c[u].length})),u++,l++)}}})),console.log("Ranges"),e.amountRanges=n})),i=new o.WinnerLimit({type:o.WinnerLimitType.Capped,usize:new(_())(A.winnersCount)}),A.participationNFT&&A.participationNFT.participationConfig&&(A.participationNFT.participationConfig.fixedPrice=new(_())((0,o.toLamports)(A.participationFixedPrice,p)||0)),console.log("Tiered settings",O.items)),x=A.instantSalePrice&&A.priceFloor===A.instantSalePrice,b=A.quoteMintAddress==o.WRAPPED_SOL_MINT.toBase58()?R.LAMPORTS_PER_SAFE:Math.pow(10,A.quoteMintInfo.decimals||0),y={winners:i,endAuctionAt:x?null:new(_())((A.auctionDuration||0)*("days"==A.auctionDurationType?86400:"hours"==A.auctionDurationType?3600:60)),auctionGap:x?null:new(_())((A.gapTime||0)*("days"==A.gapTimeType?86400:"hours"==A.gapTimeType?3600:60)),priceFloor:new o.PriceFloor({type:A.priceFloor?o.PriceFloorType.Minimum:o.PriceFloorType.None,minPrice:new(_())((A.priceFloor||0)*b)}),tokenMint:A.quoteMintAddress,gapTickSizePercentage:A.tickSizeEndingPhase||null,tickSize:A.priceTick?new(_())(A.priceTick*b):null,instantSalePrice:A.instantSalePrice?new(_())((A.instantSalePrice||0)*b):null,name:null},v=A.category===Vo.Open||A.instantSaleType===Uo.Open,g=v?[]:A.category!==Vo.Tiered?A.items:O.items,j=v?A.items[0]:A.participationNFT,e.next=9,co(t,n,s,y,g,j,A.quoteMintAddress,u);case 9:w=e.sent,M(w);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=(0,c.jsx)(Xo,{confirm:function(e){C(Lo(Lo({},A),{},{category:e})),D()}}),V=(0,c.jsx)(Qo,{attributes:A,setAttributes:C,confirm:function(){return D()}}),U=(0,c.jsx)(Jo,{attributes:A,setAttributes:C,confirm:function(){return D()}}),z=(0,c.jsx)($o,{attributes:A,setAttributes:C,confirm:function(){return D()}}),q=(0,c.jsx)(es,{attributes:A,setAttributes:C,confirm:function(){return D()}}),H=(0,c.jsx)(ts,{attributes:A,setAttributes:C,confirm:function(){return D()}}),G=(0,c.jsx)(ns,{attributes:A,setAttributes:C,confirm:function(){return D()}}),Y=(0,c.jsx)(rs,{attributes:A,setAttributes:C,confirm:function(){return D()}}),X=(0,c.jsx)(is,{attributes:O,setAttributes:E,maxWinners:A.winnersCount,confirm:function(){return D()}}),Q=(0,c.jsx)(as,{attributes:A,setAttributes:C,confirm:function(){N(!1),D()},connection:t}),J=(0,c.jsx)(os,{createAuction:W,confirm:function(){return D()}}),$=(0,c.jsx)(ss,{auction:S}),ee=(e={},(0,y.Z)(e,Vo.InstantSale,[["Category",L],["Instant Sale",V],["Review",Q],["Publish",J],[void 0,$]]),(0,y.Z)(e,Vo.Limited,[["Category",L],["Copies",U],["Price",q],["Initial Phase",H],["Ending Phase",G],["Participation NFT",Y],["Review",Q],["Publish",J],[void 0,$]]),(0,y.Z)(e,Vo.Single,[["Category",L],["Copies",U],["Price",q],["Initial Phase",H],["Ending Phase",G],["Participation NFT",Y],["Review",Q],["Publish",J],[void 0,$]]),(0,y.Z)(e,Vo.Open,[["Category",L],["Copies",U],["Price",q],["Initial Phase",H],["Ending Phase",G],["Review",Q],["Publish",J],[void 0,$]]),(0,y.Z)(e,Vo.Tiered,[["Category",L],["Winners",z],["Tiers",X],["Price",q],["Initial Phase",H],["Ending Phase",G],["Participation NFT",Y],["Review",Q],["Publish",J],[void 0,$]]),e);return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(qt.Z,{className:"creator-base-page",style:{paddingTop:50},children:[w&&(0,c.jsx)(Ht.Z,{span:24,md:4,children:(0,c.jsx)(Hi.Z,{progressDot:!0,direction:f<768?"horizontal":"vertical",current:x,style:{width:"fit-content",margin:"0 auto 30px auto",overflowX:"auto",maxWidth:"100%"},children:ee[A.category].filter((function(e){return!!e[0]})).map((function(e,t){return(0,c.jsx)(qo,{title:e[0]},t)}))})}),(0,c.jsxs)(Ht.Z,Lo(Lo({span:24},w?{md:20}:{md:24}),{},{children:[ee[A.category][x][1],0<x&&w&&(0,c.jsx)("div",{style:{margin:"auto",width:"fit-content"},children:(0,c.jsx)(m.Z,{onClick:function(){return D(x-1)},children:"Back"})})]}))]})})},Xo=function(e){var t=xt().width;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(qt.Z,{className:"call-to-action",children:[(0,c.jsx)("h2",{children:"List an item"}),(0,c.jsxs)("p",{children:["First time listing on Metaplex? ",(0,c.jsx)("a",{children:"Read our sellers' guide."})]})]}),(0,c.jsx)(qt.Z,{justify:t<768?"center":"start",children:(0,c.jsxs)(Ht.Z,{children:[(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{className:"type-btn",size:"large",onClick:function(){return e.confirm(Vo.InstantSale)},children:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:"Instant Sale"}),(0,c.jsx)("div",{className:"type-btn-description",children:"At a fixed price, sell a single Master NFT or copies of it"})]})})}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{className:"type-btn",size:"large",onClick:function(){return e.confirm(Vo.Limited)},children:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:"Limited Edition"}),(0,c.jsx)("div",{className:"type-btn-description",children:"Sell a limited copy or copies of a single Master NFT"})]})})}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{className:"type-btn",size:"large",onClick:function(){return e.confirm(Vo.Open)},children:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:"Open Edition"}),(0,c.jsx)("div",{className:"type-btn-description",children:"Sell unlimited copies of a single Master NFT"})]})})}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{className:"type-btn",size:"large",onClick:function(){return e.confirm(Vo.Tiered)},children:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:"Tiered Auction"}),(0,c.jsx)("div",{className:"type-btn-description",children:"Participants get unique rewards based on their leaderboard rank"})]})})}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{className:"type-btn",size:"large",onClick:function(){return e.confirm(Vo.Single)},children:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{children:"Sell an Existing Item"}),(0,c.jsx)("div",{className:"type-btn-description",children:"Sell an existing item in your NFT collection, including Master NFTs"})]})})})]})})]})},Qo=function(e){var t,n,r,a=e.attributes,s=e.setAttributes,u=e.confirm,l=(0,i.useState)(!1),d=l[0],p=l[1],f=(0,i.useState)(o.WRAPPED_SOL_MINT),h=f[0],x=f[1],b=nt(),y=b.hasOtherTokens,v=b.tokenMap.get(h?h.toString():ne.toString());a.quoteMintAddress=h?h.toBase58():ne.toBase58(),a.quoteMintAddress&&(a.quoteMintInfo=(0,o.useMint)(a.quoteMintAddress),a.quoteMintInfoExtended=nt().tokenMap.get(a.quoteMintAddress));var g=!(null===a||void 0===a||null===(t=a.items)||void 0===t||null===(n=t[0])||void 0===n||!n.masterEdition),j=(0,i.useMemo)((function(){var e,t,n,i,r=null===a||void 0===a||null===(e=a.items)||void 0===e||null===(t=e[0])||void 0===t||null===(n=t.masterEdition)||void 0===n||null===(i=n.info)||void 0===i?void 0:i.maxSupply;return!!r&&r.toNumber()>0}),[null===a||void 0===a||null===(r=a.items)||void 0===r?void 0:r[0]]),k=(0,i.useCallback)((function(e){return!(e.metadata.info.data.creators||[]).some((function(e){return!e.verified}))}),[]),w=a.instantSaleType===Uo.Limited,N=a.items.length>0;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(qt.Z,{className:"call-to-action",style:{marginBottom:0},children:(0,c.jsx)("h2",{children:"Select which item to sell:"})}),(0,c.jsx)(qt.Z,{className:"content-action",children:(0,c.jsxs)(Ht.Z,{xl:24,children:[(0,c.jsx)(_a,{filter:k,selected:a.items,setSelected:function(e){s(Lo(Lo({},a),{},{items:e}))},allowMultiple:!1,children:"Select NFT"}),N&&(0,c.jsxs)("label",{className:"action-field",children:[(0,c.jsxs)($t.Z,{defaultValue:a.instantSaleType||Uo.Single,onChange:function(e){return s(Lo(Lo({},a),{},{instantSaleType:e}))},children:[(0,c.jsx)(zo,{value:Uo.Single,children:"Sell unique token"}),j&&(0,c.jsx)(zo,{value:Uo.Limited,children:"Sell limited number of copies"}),!j&&g&&(0,c.jsx)(zo,{value:Uo.Open,children:"Sell unlimited number of copies"})]}),w&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"field-info",children:"Each copy will be given unique edition number e.g. 1 of 30"}),(0,c.jsx)(Ki.Z,{autoFocus:!0,className:"input",placeholder:"Enter number of copies sold",allowClear:!0,onChange:function(e){return s(Lo(Lo({},a),{},{editions:parseInt(e.target.value)}))}})]})]}),y&&(0,c.jsxs)("label",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"Auction mint"}),(0,c.jsx)(Ko,{mint:h,onClick:function(){return p(!0)}}),(0,c.jsx)(Io,{setMint:x,open:d,onClose:function(){p(!1)}})]}),(0,c.jsxs)("label",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"Price"}),(0,c.jsx)("span",{className:"field-info",children:"This is the instant sale price for your item."}),(0,c.jsx)(Ki.Z,{type:"number",min:0,autoFocus:!0,className:"input",placeholder:"Price",prefix:"\u25ce",suffix:(null===v||void 0===v?void 0:v.symbol)||"CUSTOM",onChange:function(e){return s(Lo(Lo({},a),{},{priceFloor:parseFloat(e.target.value),instantSalePrice:parseFloat(e.target.value)}))}})]})]})}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{type:"primary",size:"large",onClick:function(){u()},className:"action-btn",children:"Continue"})})]})},Jo=function(e){var t=(0,i.useState)(!1),n=t[0],r=t[1],a=(0,i.useState)(o.WRAPPED_SOL_MINT),s=a[0],u=a[1],l=nt(),d=l.hasOtherTokens;l.tokenMap.get(s?s.toString():ne.toString());e.attributes.quoteMintAddress=s?s.toBase58():ne.toBase58(),e.attributes.quoteMintAddress&&(e.attributes.quoteMintInfo=(0,o.useMint)(e.attributes.quoteMintAddress),e.attributes.quoteMintInfoExtended=nt().tokenMap.get(e.attributes.quoteMintAddress));var p=function(e){return!0};e.attributes.category===Vo.Limited?p=function(e){return!!e.masterEdition&&!!e.masterEdition.info.maxSupply}:e.attributes.category===Vo.Open&&(p=function(e){return!(!e.masterEdition||void 0!==e.masterEdition.info.maxSupply&&null!==e.masterEdition.info.maxSupply)});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(qt.Z,{className:"call-to-action",style:{marginBottom:0},children:[(0,c.jsx)("h2",{children:"Select which item to sell"}),(0,c.jsx)("p",{style:{fontSize:"1.2rem"},children:"Select the item(s) that you want to list."})]}),(0,c.jsx)(qt.Z,{className:"content-action",children:(0,c.jsxs)(Ht.Z,{xl:24,children:[(0,c.jsx)(_a,{filter:function(e){return p(e)&&function(e){return!(e.metadata.info.data.creators||[]).find((function(e){return!e.verified}))}(e)},selected:e.attributes.items,setSelected:function(t){e.setAttributes(Lo(Lo({},e.attributes),{},{items:t}))},allowMultiple:!1,children:"Select NFT"}),d&&(0,c.jsxs)("label",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"Auction mint"}),(0,c.jsx)(Ko,{mint:s,onClick:function(){return r(!0)}}),(0,c.jsx)(Io,{setMint:u,open:n,onClose:function(){r(!1)}})]}),e.attributes.category===Vo.Limited&&(0,c.jsxs)("label",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"How many copies do you want to create?"}),(0,c.jsx)("span",{className:"field-info",children:"Each copy will be given unique edition number e.g. 1 of 30"}),(0,c.jsx)(Ki.Z,{autoFocus:!0,className:"input",placeholder:"Enter number of copies sold",allowClear:!0,onChange:function(t){return e.setAttributes(Lo(Lo({},e.attributes),{},{editions:parseInt(t.target.value)}))}})]})]})}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{type:"primary",size:"large",onClick:function(){e.confirm()},className:"action-btn",children:"Continue to Terms"})})]})},$o=function(e){var t=(0,i.useState)(!1),n=t[0],r=t[1],a=(0,i.useState)(o.WRAPPED_SOL_MINT),s=a[0],u=a[1],l=nt(),d=l.hasOtherTokens;l.tokenMap.get(s?s.toString():ne.toString());return e.attributes.quoteMintAddress=s?s.toBase58():ne.toBase58(),e.attributes.quoteMintAddress&&(e.attributes.quoteMintInfo=(0,o.useMint)(e.attributes.quoteMintAddress),e.attributes.quoteMintInfoExtended=nt().tokenMap.get(e.attributes.quoteMintAddress)),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(qt.Z,{className:"call-to-action",children:[(0,c.jsx)("h2",{children:"Tiered Auction"}),(0,c.jsx)("p",{children:"Create a Tiered Auction"})]}),(0,c.jsx)(qt.Z,{className:"content-action",children:(0,c.jsxs)(Ht.Z,{className:"section",xl:24,children:[(0,c.jsxs)("label",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"How many participants can win the auction?"}),(0,c.jsx)("span",{className:"field-info",children:"This is the number of spots in the leaderboard."}),(0,c.jsx)(Ki.Z,{type:"number",autoFocus:!0,className:"input",placeholder:"Number of spots in the leaderboard",onChange:function(t){return e.setAttributes(Lo(Lo({},e.attributes),{},{winnersCount:parseInt(t.target.value)}))}})]}),d&&(0,c.jsxs)("label",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"Auction mint"}),(0,c.jsx)("span",{className:"field-info",children:"This will be the quote mint for your auction."}),(0,c.jsx)(Ko,{mint:s,onClick:function(){return r(!0)}}),(0,c.jsx)(Io,{setMint:u,open:n,onClose:function(){r(!1)}})]})]})}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{type:"primary",size:"large",onClick:e.confirm,className:"action-btn",children:"Continue"})})]})},es=function(e){var t,n,i,r,a,s;console.log(e.attributes);var u=(null===(t=e.attributes)||void 0===t||null===(n=t.quoteMintInfoExtended)||void 0===n?void 0:n.name)||"Custom Token",l=(null===(i=e.attributes)||void 0===i||null===(r=i.quoteMintInfoExtended)||void 0===r?void 0:r.symbol)||(0,o.shortenAddress)(e.attributes.quoteMintAddress);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(qt.Z,{className:"call-to-action",children:[(0,c.jsx)("h2",{children:"Price"}),(0,c.jsxs)("p",{children:["Set the price for your auction.",e.attributes.quoteMintAddress!=o.WRAPPED_SOL_MINT.toBase58()&&" Warning! the auction quote mint is ",e.attributes.quoteMintAddress!=o.WRAPPED_SOL_MINT.toBase58()&&(0,c.jsxs)("a",{href:"https://explorer.safecoin.org/address/".concat(null===(a=e.attributes)||void 0===a?void 0:a.quoteMintAddress),target:"_blank",children:[" ",(null===(s=e.attributes)||void 0===s?void 0:s.quoteMintAddress)!=o.WRAPPED_SOL_MINT.toBase58()&&"".concat(u," (").concat(l,")")]})]})]}),(0,c.jsx)(qt.Z,{className:"content-action",children:(0,c.jsxs)(Ht.Z,{className:"section",xl:24,children:[e.attributes.category===Vo.Open&&(0,c.jsxs)("label",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"Price"}),(0,c.jsx)("span",{className:"field-info",children:"This is the fixed price that everybody will pay for your Participation NFT."}),(0,c.jsx)(Ki.Z,{type:"number",min:0,autoFocus:!0,className:"input",placeholder:"Fixed Price",prefix:"\u25ce",suffix:e.attributes.quoteMintInfoExtended?e.attributes.quoteMintInfoExtended.symbol:e.attributes.quoteMintAddress==o.WRAPPED_SOL_MINT.toBase58()?"SAFE":"CUSTOM",onChange:function(t){return e.setAttributes(Lo(Lo({},e.attributes),{},{participationFixedPrice:parseFloat(t.target.value),priceFloor:parseFloat(t.target.value)}))}})]}),e.attributes.category!==Vo.Open&&(0,c.jsxs)("label",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"Price Floor"}),(0,c.jsx)("span",{className:"field-info",children:"This is the starting bid price for your auction."}),(0,c.jsx)(Ki.Z,{type:"number",min:0,autoFocus:!0,className:"input",placeholder:"Price",prefix:"\u25ce",suffix:e.attributes.quoteMintInfoExtended?e.attributes.quoteMintInfoExtended.symbol:e.attributes.quoteMintAddress==o.WRAPPED_SOL_MINT.toBase58()?"SAFE":"CUSTOM",onChange:function(t){return e.setAttributes(Lo(Lo({},e.attributes),{},{priceFloor:parseFloat(t.target.value)}))}})]}),(0,c.jsxs)("label",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"Tick Size"}),(0,c.jsx)("span",{className:"field-info",children:"All bids must fall within this price increment."}),(0,c.jsx)(Ki.Z,{type:"number",min:0,className:"input",placeholder:"Tick size in ".concat(e.attributes.quoteMintInfoExtended?e.attributes.quoteMintInfoExtended.symbol:"Safe1111111111111111111111111111111111111"==e.attributes.quoteMintAddress?"SAFE":"your custom currency"),prefix:"\u25ce",suffix:e.attributes.quoteMintInfoExtended?e.attributes.quoteMintInfoExtended.symbol:"Safe1111111111111111111111111111111111111"==e.attributes.quoteMintAddress?"SAFE":"CUSTOM",onChange:function(t){return e.setAttributes(Lo(Lo({},e.attributes),{},{priceTick:parseFloat(t.target.value)}))}})]})]})}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{type:"primary",size:"large",onClick:e.confirm,className:"action-btn",children:"Continue"})})]})},ts=function(e){var t=(0,i.useState)(!0),n=t[0],r=t[1],a=(0,i.useState)(!0),o=a[0],s=a[1],u=(0,i.useState)(e.attributes.startSaleTS?$r().unix(e.attributes.startSaleTS):void 0),l=u[0],d=u[1],p=(0,i.useState)(e.attributes.startListTS?$r().unix(e.attributes.startListTS):void 0),f=p[0],h=p[1];return(0,i.useEffect)((function(){e.setAttributes(Lo(Lo({},e.attributes),{},{startSaleTS:l&&l.unix()}))}),[l]),(0,i.useEffect)((function(){e.setAttributes(Lo(Lo({},e.attributes),{},{startListTS:f&&f.unix()}))}),[f]),(0,i.useEffect)((function(){n?(d(void 0),s(!0)):d($r()())}),[n]),(0,i.useEffect)((function(){h(o?void 0:$r()())}),[o]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(qt.Z,{className:"call-to-action",children:[(0,c.jsx)("h2",{children:"Initial Phase"}),(0,c.jsx)("p",{children:"Set the terms for your auction."})]}),(0,c.jsx)(qt.Z,{className:"content-action",children:(0,c.jsxs)(Ht.Z,{className:"section",xl:24,children:[(0,c.jsxs)("label",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"When do you want the auction to begin?"}),(0,c.jsxs)(Aa.ZP.Group,{defaultValue:"now",onChange:function(e){return r("now"===e.target.value)},children:[(0,c.jsx)(Aa.ZP,{className:"radio-field",value:"now",children:"Immediately"}),(0,c.jsx)("div",{className:"radio-subtitle",children:"Participants can buy the NFT as soon as you finish setting up the auction."}),(0,c.jsx)(Aa.ZP,{className:"radio-field",value:"later",children:"At a specified date"}),(0,c.jsx)("div",{className:"radio-subtitle",children:"Participants can start buying the NFT at a specified date."})]})]}),!n&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("label",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"Auction Start Date"}),l&&(0,c.jsx)(Co,{momentObj:l,setMomentObj:d,datePickerProps:{disabledDate:function(e){return e&&e<$r()().endOf("day")}}})]}),(0,c.jsxs)("label",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"When do you want the listing to go live?"}),(0,c.jsxs)(Aa.ZP.Group,{defaultValue:"now",onChange:function(e){return s("now"===e.target.value)},children:[(0,c.jsx)(Aa.ZP,{className:"radio-field",value:"now",defaultChecked:!0,children:"Immediately"}),(0,c.jsx)("div",{className:"radio-subtitle",children:"Participants will be able to view the listing with a countdown to the start date as soon as you finish setting up the sale."}),(0,c.jsx)(Aa.ZP,{className:"radio-field",value:"later",children:"At a specified date"}),(0,c.jsx)("div",{className:"radio-subtitle",children:"Participants will be able to view the listing with a countdown to the start date at the specified date."})]})]}),!o&&(0,c.jsxs)("label",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"Preview Start Date"}),f&&(0,c.jsx)(Co,{momentObj:f,setMomentObj:h,datePickerProps:{disabledDate:function(e){return e&&l&&(e<$r()().endOf("day")||e>l)}}})]})]})]})}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{type:"primary",size:"large",onClick:e.confirm,className:"action-btn",children:"Continue"})})]})},ns=function(e){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(qt.Z,{className:"call-to-action",children:[(0,c.jsx)("h2",{children:"Ending Phase"}),(0,c.jsx)("p",{children:"Set the terms for your auction."})]}),(0,c.jsx)(qt.Z,{className:"content-action",children:(0,c.jsxs)(Ht.Z,{className:"section",xl:24,children:[(0,c.jsxs)("div",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"Auction Duration"}),(0,c.jsx)("span",{className:"field-info",children:"This is how long the auction will last for."}),(0,c.jsx)(Ki.Z,{addonAfter:(0,c.jsxs)($t.Z,{defaultValue:e.attributes.auctionDurationType,onChange:function(t){return e.setAttributes(Lo(Lo({},e.attributes),{},{auctionDurationType:t}))},children:[(0,c.jsx)(zo,{value:"minutes",children:"Minutes"}),(0,c.jsx)(zo,{value:"hours",children:"Hours"}),(0,c.jsx)(zo,{value:"days",children:"Days"})]}),autoFocus:!0,type:"number",className:"input",placeholder:"Set the auction duration",onChange:function(t){return e.setAttributes(Lo(Lo({},e.attributes),{},{auctionDuration:parseInt(t.target.value)}))}})]}),(0,c.jsxs)("div",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"Gap Time"}),(0,c.jsx)("span",{className:"field-info",children:"The final phase of the auction will begin when there is this much time left on the countdown. Any bids placed during the final phase will extend the end time by this same duration."}),(0,c.jsx)(Ki.Z,{addonAfter:(0,c.jsxs)($t.Z,{defaultValue:e.attributes.gapTimeType,onChange:function(t){return e.setAttributes(Lo(Lo({},e.attributes),{},{gapTimeType:t}))},children:[(0,c.jsx)(zo,{value:"minutes",children:"Minutes"}),(0,c.jsx)(zo,{value:"hours",children:"Hours"}),(0,c.jsx)(zo,{value:"days",children:"Days"})]}),type:"number",className:"input",placeholder:"Set the gap time",onChange:function(t){return e.setAttributes(Lo(Lo({},e.attributes),{},{gapTime:parseInt(t.target.value)}))}})]}),(0,c.jsxs)("label",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"Tick Size for Ending Phase"}),(0,c.jsx)("span",{className:"field-info",children:"In order for winners to move up in the auction, they must place a bid that\u2019s at least this percentage higher than the next highest bid."}),(0,c.jsx)(Ki.Z,{type:"number",className:"input",placeholder:"Percentage",suffix:"%",onChange:function(t){return e.setAttributes(Lo(Lo({},e.attributes),{},{tickSizeEndingPhase:parseInt(t.target.value)}))}})]})]})}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{type:"primary",size:"large",onClick:e.confirm,className:"action-btn",children:"Continue"})})]})},is=function(e){for(var t=function(e){return e.map((function(e){return{items:(0,v.Z)(e.items.map((function(e){return Lo({},e)}))),winningSpots:(0,v.Z)(e.winningSpots)}}))},n=function(e){return!(e.metadata.info.data.creators||[]).find((function(e){return!e.verified}))},i=[],r=0;r<e.maxWinners;r++)i.push({label:"Winner ".concat(r+1),value:r});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(qt.Z,{className:"call-to-action",children:[(0,c.jsx)("h2",{children:"Add Winning Tiers and Their Prizes"}),(0,c.jsx)("p",{children:"Each row represents a tier. You can choose which winning spots get which tiers."})]}),e.attributes.tiers.map((function(r,a){return(0,c.jsxs)(qt.Z,{className:"content-action",children:[(0,c.jsx)(Ht.Z,{xl:24,children:(0,c.jsxs)("h3",{children:["Tier #",a+1," Basket"]})}),(0,c.jsx)(Ca.Z.Group,{options:i,onChange:function(n){var i=t(e.attributes.tiers);i[a].winningSpots=n.map((function(e){return e.valueOf()})),e.setAttributes(Lo(Lo({},e.attributes),{},{tiers:i}))}}),r.items.map((function(i,r){return(0,c.jsx)(Ht.Z,{className:"section",xl:8,children:(0,c.jsxs)(zt.Z,{children:[(0,c.jsx)(_a,{filter:n,selected:void 0!==i.safetyDepositBoxIndex?[e.attributes.items[i.safetyDepositBoxIndex]]:[],setSelected:function(n){var s=(0,v.Z)(e.attributes.items.map((function(e){return Lo({},e)}))),c=t(e.attributes.tiers);if(n[0]){e.attributes.items.find((function(e){return e.metadata.pubkey===n[0].metadata.pubkey}))||s.push(n[0]);var u=s.findIndex((function(e){return e.metadata.pubkey===n[0].metadata.pubkey})),l=c[a].items[r];l.safetyDepositBoxIndex=u,n[0].masterEdition&&n[0].masterEdition.info.key==o.MetadataKey.MasterEditionV1?l.winningConfigType=B.WinningConfigType.PrintingV1:n[0].masterEdition&&n[0].masterEdition.info.key==o.MetadataKey.MasterEditionV2?l.winningConfigType=B.WinningConfigType.PrintingV2:l.winningConfigType=B.WinningConfigType.TokenOnlyTransfer,l.amount=1}else if(void 0!==i.safetyDepositBoxIndex){var d=c[a];if(d.items.splice(r,1),0===d.items.length&&c.splice(a,1),!c.find((function(e){return e.items.find((function(e){return e.safetyDepositBoxIndex===i.safetyDepositBoxIndex}))}))){for(var p=function(e){c.forEach((function(t){return t.items.forEach((function(t){t.safetyDepositBoxIndex===e&&t.safetyDepositBoxIndex--}))}))},f=i.safetyDepositBoxIndex+1;f<e.attributes.items.length;f++)p(f);s.splice(i.safetyDepositBoxIndex,1)}}e.setAttributes(Lo(Lo({},e.attributes),{},{items:s,tiers:c}))},allowMultiple:!1,children:"Select item"}),void 0!==i.winningConfigType&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)($t.Z,{defaultValue:i.winningConfigType,style:{width:120},onChange:function(n){var i,s=t(e.attributes.tiers),c=s[a].items[r];n==B.WinningConfigType.PrintingV2&&c.safetyDepositBoxIndex&&(null===(i=e.attributes.items[c.safetyDepositBoxIndex].masterEdition)||void 0===i?void 0:i.info.key)==o.MetadataKey.MasterEditionV1&&(n=B.WinningConfigType.PrintingV1),c.winningConfigType=n,e.setAttributes(Lo(Lo({},e.attributes),{},{tiers:s}))},children:[(0,c.jsx)(zo,{value:B.WinningConfigType.FullRightsTransfer,children:"Full Rights Transfer"}),(0,c.jsx)(zo,{value:B.WinningConfigType.TokenOnlyTransfer,children:"Token Only Transfer"}),(0,c.jsx)(zo,{value:B.WinningConfigType.PrintingV2,children:"Printing V2"}),(0,c.jsx)(zo,{value:B.WinningConfigType.PrintingV1,children:"Printing V1"})]}),(i.winningConfigType===B.WinningConfigType.PrintingV1||i.winningConfigType===B.WinningConfigType.PrintingV2)&&(0,c.jsxs)("label",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"How many copies do you want to create for each winner? If you put 2, then each winner will get 2 copies."}),(0,c.jsx)("span",{className:"field-info",children:"Each copy will be given unique edition number e.g. 1 of 30"}),(0,c.jsx)(Ki.Z,{autoFocus:!0,className:"input",placeholder:"Enter number of copies sold",allowClear:!0,onChange:function(n){var i=t(e.attributes.tiers);i[a].items[r].amount=parseInt(n.target.value),e.setAttributes(Lo(Lo({},e.attributes),{},{tiers:i}))}})]})]})]})},r)})),(0,c.jsx)(Ht.Z,{xl:4,children:(0,c.jsx)(m.Z,{type:"primary",size:"large",onClick:function(){var n=t(e.attributes.tiers);n[a].items.push({}),e.setAttributes(Lo(Lo({},e.attributes),{},{tiers:n}))},className:"action-btn",children:(0,c.jsx)(Zo.Z,{})})})]},a)})),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(Ht.Z,{xl:24,children:(0,c.jsx)(m.Z,{type:"primary",size:"large",onClick:function(){var n=t(e.attributes.tiers);n.push({items:[],winningSpots:[]}),e.setAttributes(Lo(Lo({},e.attributes),{},{tiers:n}))},className:"action-btn",children:(0,c.jsx)(Zo.Z,{})})})}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{type:"primary",size:"large",onClick:e.confirm,className:"action-btn",children:"Continue to Review"})})]})},rs=function(e){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(qt.Z,{className:"call-to-action",children:[(0,c.jsx)("h2",{children:"Participation NFT"}),(0,c.jsx)("p",{children:"Provide NFT that will be awarded as an Open Edition NFT for auction participation."})]}),(0,c.jsx)(qt.Z,{className:"content-action",children:(0,c.jsxs)(Ht.Z,{className:"section",xl:24,children:[(0,c.jsx)(_a,{filter:function(e){return!!e.masterEdition&&void 0===e.masterEdition.info.maxSupply},selected:e.attributes.participationNFT?[e.attributes.participationNFT]:[],setSelected:function(t){e.setAttributes(Lo(Lo({},e.attributes),{},{participationNFT:t[0]}))},allowMultiple:!1,children:"Select Participation NFT"}),(0,c.jsxs)("label",{className:"action-field",children:[(0,c.jsx)("span",{className:"field-title",children:"Price"}),(0,c.jsx)("span",{className:"field-info",children:"This is an optional fixed price that non-winners will pay for your Participation NFT."}),(0,c.jsx)(Ki.Z,{type:"number",min:0,autoFocus:!0,className:"input",placeholder:"Fixed Price",prefix:"\u25ce",suffix:e.attributes.quoteMintInfoExtended?e.attributes.quoteMintInfoExtended.symbol:e.attributes.quoteMintAddress==o.WRAPPED_SOL_MINT.toBase58()?"SAFE":"CUSTOM",onChange:function(t){return e.setAttributes(Lo(Lo({},e.attributes),{},{participationFixedPrice:parseFloat(t.target.value)}))}})]})]})}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{type:"primary",size:"large",onClick:e.confirm,className:"action-btn",children:"Continue to Review"})})]})},as=function(e){var t,n=(0,i.useState)(!1),r=n[0],a=n[1],s=(0,i.useState)(0),u=s[0],l=s[1],d=(0,o.useNativeAccount)().account;(0,i.useEffect)((function(){Promise.all([e.connection.getMinimumBalanceForRentExemption(Z.MintLayout.span),e.connection.getMinimumBalanceForRentExemption(o.MAX_METADATA_LEN)])}),[l]);var p=((null===d||void 0===d?void 0:d.lamports)||0)/R.LAMPORTS_PER_SAFE,f=null===(t=e.attributes.items)||void 0===t?void 0:t[0];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(qt.Z,{className:"call-to-action",children:[(0,c.jsx)("h2",{children:"Review and list"}),(0,c.jsx)("p",{children:"Review your listing before publishing."})]}),(0,c.jsxs)(qt.Z,{className:"content-action",children:[(0,c.jsx)(Ht.Z,{xl:12,children:(null===f||void 0===f?void 0:f.metadata.info)&&(0,c.jsx)(rr,{pubkey:f.metadata.pubkey,small:!0})}),(0,c.jsxs)(Ht.Z,{className:"section",xl:12,children:[(0,c.jsx)(ni.Z,{className:"create-statistic",title:"Copies",value:void 0===e.attributes.editions?"Unique":e.attributes.editions}),u?(0,c.jsx)(oi,{title:"Cost to Create",amount:u,tokenInfo:nt().tokenMap.get("Safe1111111111111111111111111111111111111")}):(0,c.jsx)(Ji.Z,{})]})]}),(0,c.jsxs)(qt.Z,{style:{display:"block"},children:[(0,c.jsx)(Oi.Z,{}),(0,c.jsx)(ni.Z,{className:"create-statistic",title:"Start date",value:e.attributes.startSaleTS?$r().unix(e.attributes.startSaleTS).format("dddd, MMMM Do YYYY, h:mm a"):"Right after successfully published"}),(0,c.jsx)("br",{}),e.attributes.startListTS&&(0,c.jsx)(ni.Z,{className:"create-statistic",title:"Listing go live date",value:$r().unix(e.attributes.startListTS).format("dddd, MMMM Do YYYY, h:mm a")}),(0,c.jsx)(Oi.Z,{}),(0,c.jsx)(ni.Z,{className:"create-statistic",title:"Sale ends",value:e.attributes.endTS?$r().unix(e.attributes.endTS).format("dddd, MMMM Do YYYY, h:mm a"):"Until sold"})]}),(0,c.jsxs)(qt.Z,{children:[(0,c.jsx)(m.Z,{type:"primary",size:"large",onClick:function(){p<.06?a(!0):(e.setAttributes(Lo(Lo({},e.attributes),{},{startListTS:e.attributes.startListTS||$r()().unix(),startSaleTS:e.attributes.startSaleTS||$r()().unix()})),e.confirm())},className:"action-btn",children:e.attributes.category===Vo.InstantSale?"List for Sale":"Publish Auction"}),(0,c.jsx)(Do,{message:"Estimated Minimum Fee",minimumFunds:.06,currentFunds:p,isModalVisible:r,onClose:function(){return a(!1)}})]})]})},os=function(e){var t=(0,i.useState)(0),n=t[0],r=t[1];return(0,i.useEffect)((function(){(function(){var t=(0,g.Z)(k().mark((function t(){var n;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=setInterval((function(){return r((function(e){return Math.min(e+1,99)}))}),600),t.next=3,e.createAuction();case 3:clearInterval(n),e.confirm();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),(0,c.jsxs)("div",{style:{marginTop:70,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,c.jsx)(Za.Z,{type:"circle",percent:n}),(0,c.jsx)("div",{className:"waiting-title",children:"Your creation is being listed with Metaplex..."}),(0,c.jsx)("div",{className:"waiting-subtitle",children:"This can take up to 30 seconds."})]})},ss=function(e){var t=(0,a.k6)();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{style:{marginTop:70,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,c.jsx)("div",{className:"waiting-title",children:"Congratulations! Your auction is now live."}),(0,c.jsxs)("div",{className:"congrats-button-container",children:[(0,c.jsxs)(m.Z,{className:"metaplex-button",onClick:function(t){return window.open(function(){var t,n={text:"I've created a new NFT auction on Metaplex, check it out!",url:"".concat(window.location.origin,"/#/auction/").concat(null===(t=e.auction)||void 0===t?void 0:t.auction.toString()),hashtags:"NFT,Crypto,Metaplex",related:"Metaplex,safecoin"},i=new URLSearchParams(n).toString();return"https://twitter.com/intent/tweet?".concat(i)}(),"_blank")},children:[(0,c.jsx)("span",{children:"Share it on Twitter"}),(0,c.jsx)("span",{children:">"})]}),(0,c.jsxs)(m.Z,{className:"metaplex-button",onClick:function(){t.push("/"),t.go(0)},children:[(0,c.jsx)("span",{children:"See it in your auctions"}),(0,c.jsx)("span",{children:">"})]})]})]}),(0,c.jsx)(d,{})]})},cs=n(69123);!function(e){e.Metaplex="0",e.Owned="1",e.Created="2"}(Go||(Go={}));var us=n(34406);function ls(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ds(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ls(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ls(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ps=function(e){var t=e.ownedMetadata,n=e.vouchers,i=e.packs,r=e.provingProcesses;return t.reduce((function(e,t){var a;if(!t.edition)return[].concat((0,v.Z)(e),[t]);var o=null===(a=t.edition)||void 0===a?void 0:a.info.parent,s=Object.values(n).find((function(e){return e.info.master===o}));return s?Object.values(r).find((function(e){return e.info.voucherMint===t.metadata.info.mint}))?e:[].concat((0,v.Z)(e),[ds(ds({},i[s.info.packSet]),{},{voucher:s.pubkey,voucherMetadataKey:t.metadata.pubkey,mint:t.metadata.info.mint})]):[].concat((0,v.Z)(e),[t])}),[])},fs=n(34406);function ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function hs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ms(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ms(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xs=function(e){var t=e.provingProcesses,n=e.vouchers,i=e.packs;return Object.values(t).reduce((function(e,t){var r=i[t.info.packSet],a=Object.values(n).find((function(e){return e.info.packSet===t.info.packSet}));return a?[].concat((0,v.Z)(e),[hs(hs({},r),{},{voucher:a.pubkey,voucherMetadataKey:a.info.metadata,cardsRedeemed:t.info.cardsRedeemed,provingProcessKey:t.pubkey})]):e}),[])},bs=function(e){var t=e.activeKey,n=(0,b.useWallet)().publicKey,i=(0,o.useMeta)().metadata,r=Bt((null===n||void 0===n?void 0:n.toBase58())||""),a=function(){var e=(0,o.useMeta)(),t=e.vouchers,n=e.packs,i=e.provingProcesses,r=Tt();return"true"===us.env.NEXT_ENABLE_NFT_PACKS?ps({ownedMetadata:r,vouchers:t,packs:n,provingProcesses:i}):r}(),s=function(){var e=(0,o.useMeta)(),t=e.provingProcesses,n=e.packs,i=e.vouchers;return"true"===fs.env.NEXT_ENABLE_NFT_PACKS?xs({provingProcesses:t,packs:n,vouchers:i}):[]}();return t===Go.Owned?[].concat((0,v.Z)(a),(0,v.Z)(s)):t===Go.Created?r:i},ys=function(e){return(null===e||void 0===e?void 0:e.info)&&!!e.info.randomOracle},vs=function(e){return(null===e||void 0===e?void 0:e.info)&&!!e.info.data},gs=function(e){var t=e.item;if(ys(t)){var n=t.pubkey,i=t.cardsRedeemed,a=t.mint,o=t.info,s=o.authority,u=o.allowedAmountToRedeem,l=o.uri,d=t.provingProcessKey,p=t.voucherMetadataKey,f=a?"voucherMint=".concat(a):"provingProcessKey=".concat(d);return(0,c.jsx)(r.Link,{to:"/pack/".concat(n,"?").concat(f),children:(0,c.jsx)(Ea,{name:t.info.name,voucherMetadata:p,authority:s,cardsRedeemed:i,allowedAmountToRedeem:u,uri:l,artView:!0})})}var m=vs(t)?t.pubkey:t.metadata.pubkey;return(0,c.jsx)(r.Link,{to:"/art/".concat(m),children:(0,c.jsx)(rr,{pubkey:m,preview:!1,height:250,width:250,artView:!0})})},js=wn.Z.TabPane,ks=f.Z.Content,ws=function(){var e=(0,b.useWallet)().connected,t=(0,Xe.useMeta)(),n=t.isLoading,r=t.pullAllMetadata,a=t.storeIndexer,s=t.pullItemsPage,u=t.isFetching,l=(0,o.useUserAccounts)().userAccounts,d=(0,i.useState)(Go.Metaplex),p=d[0],m=d[1],h=bs({activeKey:p});(0,i.useEffect)((function(){u||s(l)}),[u]),(0,i.useEffect)((function(){m(e?Go.Owned:Go.Metaplex)}),[e,m]);var y=n||u,g=(0,c.jsxs)("div",{className:"artwork-grid",children:[y&&(0,v.Z)(Array(10)).map((function(e,t){return(0,c.jsx)(Mn,{},t)})),!y&&h.map((function(e){var t,n=vs(e)?e.pubkey:ys(e)?e.provingProcessKey:(null===(t=e.edition)||void 0===t?void 0:t.pubkey)||e.metadata.pubkey;return(0,c.jsx)(gs,{item:e},n)}))]}),j=e&&0!==a.length&&(0,c.jsx)(cs.Z.Button,{className:"refresh-button padding0",onClick:function(){return s(l)},icon:(0,c.jsx)(Oo.Z,{}),overlayClassName:"refresh-overlay",overlay:(0,c.jsx)(x.Z,{className:"gray-dropdown",children:(0,c.jsx)(x.Z.Item,{onClick:function(){return r()},children:"Load All Metadata"})}),children:"Refresh"});return(0,c.jsx)(f.Z,{style:{margin:0,marginTop:30},children:(0,c.jsx)(ks,{style:{display:"flex",flexWrap:"wrap"},children:(0,c.jsx)(Ht.Z,{style:{width:"100%",marginTop:10},children:(0,c.jsx)(qt.Z,{children:(0,c.jsxs)(wn.Z,{activeKey:p,onTabClick:function(e){return m(e)},tabBarExtraContent:j,children:[(0,c.jsx)(js,{tab:(0,c.jsx)("span",{className:"tab-title",children:"All"}),children:g},Go.Metaplex),e&&(0,c.jsx)(js,{tab:(0,c.jsx)("span",{className:"tab-title",children:"Owned"}),children:g},Go.Owned),e&&(0,c.jsx)(js,{tab:(0,c.jsx)("span",{className:"tab-title",children:"Created"}),children:g},Go.Created)]})})})})})},Ns=n(96211);function Ps(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ss(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ps(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ps(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ms,Ts=f.Z.Content,As=function(){var e=(0,o.useMint)(ne);return e?(0,c.jsx)(Bs,{mint:e}):(0,c.jsx)(Ji.Z,{})};!function(e){e[e.Open=0]="Open",e[e.Limited=1]="Limited",e[e.Tiered=2]="Tiered",e[e.OneOfKind=3]="OneOfKind"}(Ms||(Ms={}));var Cs={},Zs=function(){var e=(0,g.Z)(k().mark((function e(t){var n,i,r,a,s,c,u,l,d,p,f,m,h,x,b,v,g,j,w,N,P,S,M,T,A,C,Z,O,E,K,I,_,R,F;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.auctionViews,r=t.auctionManagersByAuction,a=t.usersEngaged,s=t.auctionDataExtended,c=t.bidderPotsByAuctionAndBidder,u=t.metadata,l=t.setByType,d=t.setAverageBids,p=t.setUsersPublished,f=t.setAverageSale,m=t.setHighestSale,h=t.setSortedSales,x=t.setUsersWithMetadata,b=t.setUsersBid,v=t.setUsersEngaged,g=0,j=0,w=0,N=0,n={},(0,y.Z)(n,Ms.Open,0),(0,y.Z)(n,Ms.Limited,0),(0,y.Z)(n,Ms.Tiered,0),(0,y.Z)(n,Ms.OneOfKind,0),P=n,S={},M=Ss({},a),T=[],A=(0,o.programIds)(),C=0;case 11:if(!(C<i.length)){e.next=28;break}if(!(Z=i[C]).auction.info.ended()||Z.auction.info.tokenMint!==ne.toBase58()){e.next=20;break}if(Cs[Z.auction.pubkey]){e.next=18;break}return e.next=17,(0,o.getAuctionExtended)({auctionProgramId:A.auction,resource:Z.vault.pubkey});case 17:Cs[Z.auction.pubkey]=e.sent;case 18:(O=s[Cs[Z.auction.pubkey]])&&O.info.totalUncancelledBids.toNumber()>0&&(N++,g+=O.info.totalUncancelledBids.toNumber(),E=Z.auction.info.bidState,(K=E.getAmountAt(0))&&K.toNumber()>w&&(w=K.toNumber()),I=E.bids.slice(E.bids.length-E.max.toNumber()).map((function(e){return e.amount.toNumber()})),j+=I.reduce((function(e,t){return e+t}),0),T=T.concat(I));case 20:S[Z.auctionManager.authority]=!0,M[Z.auctionManager.authority]=!0,_=void 0,_=Z.items.find((function(e){return e.length>1}))?Ms.Tiered:Z.items.length&&Z.items[0].length?Z.items[0][0].winningConfigType==B.WinningConfigType.TokenOnlyTransfer?Ms.OneOfKind:Ms.Limited:Ms.Open,P[_]++;case 25:C++,e.next=11;break;case 28:R={},Object.values(c).forEach((function(e){r[e.info.auctionAct]&&(R[e.info.bidderAct]=!0,M[e.info.bidderAct]=!0)})),F={},u.forEach((function(e){var t;F[e.info.updateAuthority]=!0,M[e.info.updateAuthority]=!0,null===(t=e.info.data.creators)||void 0===t||t.forEach((function(e){F[e.address]=!0,M[e.address]=!0}))})),l(P),d(g/N),p(S),f(j/N),m(w),h(T.sort()),x(F),b(R),v((function(e){return Ss(Ss({},e),M)}));case 41:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Os=i.memo((function(e){for(var t={0:0,5:0,20:0,50:0,100:0,500:0,1e3:0,1e4:0},n=[0,5,20,50,100,500,1e3,1e4],i=function(i){var r=n[i];if(i<n.length-1){var a=n[i+1];t[r]=e.sortedSales.filter((function(t){return(0,o.fromLamports)(t,e.mint)>=r&&(0,o.fromLamports)(t,e.mint)<a})).length}else t[r]=e.sortedSales.filter((function(t){return(0,o.fromLamports)(t,e.mint)>=r})).length},r=0;r<n.length;r++)i(r);var a={labels:["\u25ce [0 - 5)","\u25ce [5 - 20)","\u25ce [20 - 50)","\u25ce [50 - 100)","\u25ce [100 - 500)","\u25ce [500 - 1000)","\u25ce [1000 - 10000)","\u25ce [10000 -"],datasets:[{label:"# bids in these bins",data:n.map((function(e){return t[e]})),backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 139, 24, 0.2)","rgba(212, 39, 24, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 139, 24, 1)","rgba(212, 39, 24, 1)"],borderWidth:1}]};return(0,c.jsx)(Ns.$Q,{data:a,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})})),Es=i.memo((function(e){var t={labels:["Open","Limited","Tiered","One of a Kind"],datasets:[{label:"#",data:[e.byType[Ms.Open],e.byType[Ms.Limited],e.byType[Ms.Tiered],e.byType[Ms.OneOfKind]],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)"],borderWidth:1}]};return(0,c.jsx)(Ns.by,{data:t})}));function Bs(e){var t,n=e.mint,r=(0,i.useState)({}),a=r[0],s=r[1],u=(0,i.useState)({}),l=u[0],d=u[1],p=(0,i.useState)({}),f=p[0],h=p[1],x=(0,i.useState)({}),b=x[0],v=x[1],g=(0,i.useState)((t={},(0,y.Z)(t,Ms.Open,0),(0,y.Z)(t,Ms.Limited,0),(0,y.Z)(t,Ms.Tiered,0),(0,y.Z)(t,Ms.OneOfKind,0),t)),j=g[0],k=g[1],w=(0,i.useState)(0),N=w[0],P=w[1],S=(0,i.useState)(0),M=S[0],T=S[1],A=(0,i.useState)(0),C=A[0],Z=A[1],O=(0,i.useState)([]),E=O[0],B=O[1],K=(0,Xe.useMeta)(),I=K.metadata,_=K.auctionManagersByAuction,R=K.bidderPotsByAuctionAndBidder,F=K.auctionDataExtended,D=I.length,W=Nt();return(0,c.jsx)(Ts,{children:(0,c.jsxs)(Ht.Z,{style:{marginTop:10},children:[(0,c.jsx)(m.Z,{type:"primary",size:"large",className:"action-btn",onClick:function(){return Zs({auctionViews:W,auctionManagersByAuction:_,usersEngaged:b,auctionDataExtended:F,bidderPotsByAuctionAndBidder:R,metadata:I,setByType:k,setAverageBids:P,setUsersPublished:d,setAverageSale:T,setHighestSale:Z,setSortedSales:B,setUsersWithMetadata:s,setUsersBid:h,setUsersEngaged:v})},children:"RERUN CALCULATION"}),(0,c.jsx)("h1",{children:"Overview"}),(0,c.jsxs)("h3",{children:["Total NFTs: ",D]}),(0,c.jsx)("h1",{children:"User Breakdown"}),(0,c.jsxs)("h3",{children:["Any Engagement: ",Object.values(b).length]}),(0,c.jsxs)("h3",{children:["That bid: ",Object.values(f).length]}),(0,c.jsxs)("h3",{children:["That sold items: ",Object.values(l).length]}),(0,c.jsxs)("h3",{children:["That minted NFTs: ",Object.values(a).length]}),(0,c.jsx)("h1",{children:"Sale Info"}),(0,c.jsxs)("h3",{children:["Total Sales: \u25ce",(0,o.fromLamports)(E.reduce((function(e,t){return e+t}),0),n)]}),(0,c.jsx)(Os,{sortedSales:E,mint:n}),(0,c.jsxs)("h3",{children:["Highest Sale: \u25ce ",(0,o.fromLamports)(C,n)]}),(0,c.jsxs)("h3",{children:["Average Sale: \u25ce ",(0,o.fromLamports)(M,n)]}),(0,c.jsx)("h1",{children:"Auction Info"}),(0,c.jsxs)("h3",{children:["Average Bids per Auction: ",N]}),(0,c.jsx)(Es,{byType:j})]})})}var Ks=function(e){var t=0,n=0,i=e;do{t+=i.offsetTop||0,n+=i.offsetLeft||0,i=i.offsetParent}while(i);return{top:t,left:n}},Is=function(e){var t,n,a,o,s,u,l,d=(0,i.useState)({height:window.innerHeight,width:window.innerWidth}),p=d[0],f=d[1];(0,i.useEffect)((function(){function e(){f({height:window.innerHeight,width:window.innerWidth})}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}));var m=Nt(bt.Live),h=(0,Xe.useMeta)().isLoading,x=m.sort((function(e,t){var n;return(null===(n=e.auction.info.endedAt)||void 0===n?void 0:n.sub(t.auction.info.endedAt||new(_())(0)).toNumber())||0})),b=(0,c.jsx)(Hr.Z,{breakpointCols:{default:4,1100:3,700:2,500:1},className:"my-masonry-grid",columnClassName:"my-masonry-grid_column",children:h?(0,v.Z)(Array(10)).map((function(e,t){return(0,c.jsx)(Mn,{},t)})):x.map((function(e,t){var n=e.auction.pubkey;return(0,c.jsx)(r.Link,{to:"/auction/".concat(n),children:(0,c.jsx)(yi,{auctionView:e},n)},t)}))}),y=function(){var e=document.getElementById("static-header-gradient"),t=document.getElementById("static-end-gradient"),n=document.getElementById("header-container"),i=document.getElementById("bottom-container");if(e&&(e.style.display="inline-block"),t&&(t.style.display="inline-block"),n&&e){var r=Ks(n);e.style.top="".concat(r.top+n.offsetHeight-e.offsetHeight,"px")}if(i&&t){var a=Ks(i);t.style.top="".concat(a.top,"px")}};(0,i.useEffect)((function(){return y(),function(){var e=document.getElementById("static-header-gradient"),t=document.getElementById("static-end-gradient");e&&(e.style.display="none"),t&&(t.style.display="none")}}),[p]),(0,i.useEffect)((function(){setTimeout((function(){return y()}),500)}),[]);var g=(0,c.jsx)("section",{id:"header-container",children:(0,c.jsxs)(qt.Z,{children:[(0,c.jsxs)(Ht.Z,{span:24,xl:8,className:"header-left",children:[(0,c.jsx)("p",{className:"header-subtitle",children:e.headContent.subtitle}),(0,c.jsx)(Oi.Z,{}),(0,c.jsx)("p",{className:"header-title",children:e.headContent.title}),e.headContent.author&&(0,c.jsxs)("div",{className:"author-container",children:[(0,c.jsx)("img",{src:e.headContent.author.avatar,className:"author-avatar",width:"32px",height:"32px",alt:"author image"}),(0,c.jsx)("p",{className:"author-name",children:e.headContent.author.name})]})]}),(0,c.jsx)(Ht.Z,{xl:16,span:24,className:"header-right",children:(0,c.jsx)("img",{src:e.headContent.bannerImage,className:"header-image",width:"880px",height:"620px",alt:"".concat(e.headContent.title," image")})})]})}),j=e.leftContent&&(0,c.jsxs)("section",{id:"left-container",className:"author-container",children:[(0,c.jsx)("img",{src:null===(t=e.leftContent)||void 0===t?void 0:t.author.avatar,className:"author-avatar",alt:"author image"}),(0,c.jsx)("p",{className:"author-name",children:null===(n=e.leftContent)||void 0===n?void 0:n.author.name}),(0,c.jsxs)("div",{className:"author-details",children:[(0,c.jsx)("p",{className:"author-subtitle",children:"Details"}),(0,c.jsx)("p",{children:null===(a=e.leftContent)||void 0===a?void 0:a.author.details})]}),(0,c.jsxs)("div",{className:"author-stats",children:[(0,c.jsx)("p",{className:"author-subtitle",children:"Stats"}),null===(o=e.leftContent)||void 0===o||null===(s=o.author.stats)||void 0===s?void 0:s.map((function(e,t){return(0,c.jsx)("p",{children:e},t)}))]}),(0,c.jsxs)("div",{className:"author-connect",children:[(0,c.jsx)("p",{className:"author-subtitle",children:"Connect with the artist"}),null===(u=e.leftContent)||void 0===u||null===(l=u.author.connectWith)||void 0===l?void 0:l.map((function(e,t){return(0,c.jsx)("p",{children:(0,c.jsx)("a",{href:e.url,children:e.label},t)})}))]})]}),k=(0,c.jsx)("section",{id:"middle-container",children:e.midContent.sections.map((function(e,t){var n;return(0,c.jsxs)("div",{className:"mid-section-item",children:[e.title&&(0,c.jsx)("span",{className:"mid-title",children:e.title}),null===(n=e.paragraphs)||void 0===n?void 0:n.map((function(e){return(0,c.jsx)("p",{className:"paragraph-text",children:e})})),e.image&&(0,c.jsx)("img",{src:e.image,className:"image",width:"720px",height:"450px",alt:"".concat(e.title," image")}),e.caption&&(0,c.jsxs)("p",{className:"image-caption",children:[e.caption.text,(0,c.jsx)("a",{href:e.caption.linkUrl,target:"_blank",children:e.caption.linkText})]})]},t)}))}),w=(0,c.jsx)("section",{id:"right-container"}),N=(0,c.jsxs)("section",{id:"bottom-container",children:[(0,c.jsx)("p",{className:"bottom-title",children:"Shop the Collection"}),b]});return(0,c.jsxs)(i.Fragment,{children:[g,(0,c.jsxs)(qt.Z,{className:"static-page-container",children:[(0,c.jsx)(Ht.Z,{xs:24,md:4,children:j}),(0,c.jsx)(Ht.Z,{xs:24,md:16,children:k}),(0,c.jsx)(Ht.Z,{xs:24,md:4,children:w})]}),e.bottomContent&&N]})},_s={headContent:{title:"We are Metaplex",subtitle:"About Us",bannerImage:"/main-banner.png"},leftContent:void 0,midContent:{sections:[{title:"Metaplex is a protocol built on top of safecoin that allows:",paragraphs:["\u2022 Creating/Minting non-fungible tokens;","\u2022 Starting a variety of auctions for primary/secondary sales;","\u2022 and Visualizing NFTs in a standard way across wallets and applications."],image:"/main-banner.png"}]},bottomContent:!0},Rs=function(){return(0,c.jsx)(f.Z,{style:{margin:0,alignItems:"center"},children:(0,c.jsx)(Is,{leftContent:_s.leftContent,headContent:_s.headContent,midContent:_s.midContent,bottomContent:_s.bottomContent})})},Fs=n(3653),Ds=n(4502);function Ws(e,t,n,i){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,g.Z)(k().mark((function e(t,n,i,r){var a,s,c,u,l,d,p,f,m,h,x,b;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],s=[],c=0,u=0;case 4:if(!(u<n.length)){e.next=50;break}if(l=n[u],!(d=i[l.info.masterEdition||""])||(null===d||void 0===d?void 0:d.info.key)!=o.MetadataKey.MasterEditionV1){e.next=47;break}if(10!=c){e.next=13;break}return console.log("Waiting 10s before continuing to avoid rate limits"),e.next=12,new Promise((function(e){return setTimeout(e,1e4)}));case 12:c=0;case 13:return console.log("Reviewing",d.pubkey),p=0,e.prev=15,e.next=18,t.getTokenSupply((0,o.toPublicKey)(d.info.printingMint));case 18:f=e.sent,p=f.value.uiAmount||0,e.next=25;break;case 22:e.prev=22,e.t0=e.catch(15),console.error(e.t0);case 25:if((m=r.get(d.info.printingMint))&&(console.log("Existing print account subtracts",m.info.amount.toNumber(),"from",p),p-=m.info.amount.toNumber()),!(p>0)){e.next=32;break}console.log("Reject",d.pubkey,"due to printing bal of",p),s.push(d),e.next=46;break;case 32:return h=0,e.prev=33,e.next=36,t.getTokenSupply((0,o.toPublicKey)(d.info.oneTimePrintingAuthorizationMint));case 36:x=e.sent,h=x.value.uiAmount||0,e.next=43;break;case 40:e.prev=40,e.t1=e.catch(33),console.error(e.t1);case 43:(b=r.get(d.info.oneTimePrintingAuthorizationMint))&&(console.log("Existing one time account subtracts",b.info.amount.toNumber(),"from",h),h-=b.info.amount.toNumber()),h>0?(console.log("Reject",d.pubkey,"due to one time auth bal of",h),s.push(d)):a.push(d);case 46:c++;case 47:u++,e.next=4;break;case 50:return e.abrupt("return",{available:a,unavailable:s});case 51:case"end":return e.stop()}}),e,null,[[15,22],[33,40]])})))).apply(this,arguments)}function Vs(e,t,n,i){return Us.apply(this,arguments)}function Us(){return(Us=(0,g.Z)(k().mark((function e(t,n,i,r){var a,s,c,u,l,d,p,f,m,h,x,b,y,v;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.publicKey){e.next=2;break}throw new C.WalletNotConnectedError;case 2:a=(0,o.programIds)(),s=[],c=[],u=[],l=[],d=[],p=[],f=0;case 10:if(!(f<i.length)){e.next=24;break}return m=i[f],console.log("Converting",m.pubkey),h=r.get(m.info.printingMint),x=r.get(m.info.oneTimePrintingAuthorizationMint),h&&(h.info.amount.toNumber()>0&&p.push(Z.Token.createBurnInstruction(a.token,(0,o.toPublicKey)(m.info.printingMint),(0,o.toPublicKey)(h.pubkey),n.publicKey,[],h.info.amount)),p.push(Z.Token.createCloseAccountInstruction(a.token,(0,o.toPublicKey)(h.pubkey),n.publicKey,n.publicKey,[]))),x&&(x.info.amount.toNumber()>0&&p.push(Z.Token.createBurnInstruction(a.token,(0,o.toPublicKey)(m.info.oneTimePrintingAuthorizationMint),(0,o.toPublicKey)(x.pubkey),n.publicKey,[],x.info.amount)),p.push(Z.Token.createCloseAccountInstruction(a.token,(0,o.toPublicKey)(x.pubkey),n.publicKey,n.publicKey,[]))),e.next=19,(0,o.convertMasterEditionV1ToV2)(m.pubkey,m.info.oneTimePrintingAuthorizationMint,m.info.printingMint,p);case 19:10===p.length&&(u.push(d),l.push(p),d=[],p=[]),10===l.length&&(s.push(u),c.push(l),u=[],l=[]);case 21:f++,e.next=10;break;case 24:p.length<10&&p.length>0&&(u.push(d),l.push(p)),l.length<=10&&l.length>0&&(s.push(u),c.push(l)),console.log("Instructions",c),b=0;case 28:if(!(b<c.length)){e.next=43;break}if(y=c[b],v=s[b],console.log("Running batch",b),!(y.length>=2)){e.next=37;break}return e.next=35,(0,o.sendTransactions)(t,n,y,v,o.SequenceType.StopOnFailure,"single");case 35:e.next=39;break;case 37:return e.next=39,(0,o.sendTransactionWithRetry)(t,n,y[0],v[0],"single");case 39:console.log("Done");case 40:b++,e.next=28;break;case 43:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zs(e,t,n){return qs.apply(this,arguments)}function qs(){return(qs=(0,g.Z)(k().mark((function e(t,n,i){var r,a,s,c,u,l,d,p,f,m,h,x;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,o.programIds)().store){e.next=2;break}return e.abrupt("return",!1);case 2:if(a=null===(r=(0,o.programIds)().store)||void 0===r?void 0:r.toBase58(),!i.storeIndexer.length){e.next=8;break}return console.log("----\x3e Previously indexed. Pulling all."),e.next=7,(0,o.loadAccounts)(n);case 7:i=e.sent;case 8:s=Object.values(i.auctionManagersByAuction).filter((function(e){return e.info.store==a})).sort((function(e,t){return(i.auctions[t.info.auction].info.endedAt||new I.BN(Date.now()/1e3)).sub(i.auctions[e.info.auction].info.endedAt||new I.BN(Date.now()/1e3)).toNumber()})),c={},i.storeIndexer.forEach((function(e){e.info.auctionCaches.forEach((function(e){return c[e]=!0}))})),u=Object.values(i.auctionCaches).reduce((function(e,t){return e[t.info.auctionManager]=c[t.pubkey],e}),{}),s=s.filter((function(e){return!u[e.pubkey]})),console.log("----\x3e Found ",s.length,"auctions to cache."),l=i.storeIndexer,d=0;case 16:if(!(d<s.length)){e.next=44;break}if(p=s[d],f=St(i.safetyDepositBoxesByVaultAndIndex,p.info.vault),p.info.key!==o.MetaplexKey.AuctionManagerV2){e.next=41;break}return e.t0=no,e.t1=t,e.t2=p.info.vault,e.t3=p.info.auction,e.t4=p.pubkey,e.t5=f.map((function(e){return e.info.tokenMint})),e.t6=l,e.next=29,(0,o.getAuctionCache)(p.info.auction);case 29:return e.t7=e.sent,e.t8=!!i.auctionCaches[e.t7],e.next=33,(0,e.t0)(e.t1,e.t2,e.t3,e.t4,e.t5,e.t6,e.t8);case 33:return m=e.sent,h=m.instructions,x=m.signers,e.next=38,(0,o.sendTransactions)(n,t,h,x,o.SequenceType.StopOnFailure,"max");case 38:return e.next=40,(0,o.pullPages)(n);case 40:l=e.sent;case 41:d++,e.next=16;break;case 44:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Gs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hs(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ys=f.Z.Content,Xs=function(){var e,t=(0,Xe.useMeta)(),n=t.store,a=t.whitelistedCreatorsByCreator,s=t.isLoading,u=(0,o.useConnection)(),l=(0,b.useWallet)(),d=(0,o.useWalletModal)().setVisible,p=(0,i.useCallback)((function(){return l.wallet?l.connect().catch():d(!0)}),[l.wallet,l.connect,d]),f=(0,o.useStore)(),h=f.storeAddress,x=(f.setStoreForOwner,f.isConfigured);return(0,i.useEffect)((function(){!n&&!h&&l.publicKey,0}),[n,h,l.publicKey]),console.log("@admin",l.connected,h,s,n),(0,c.jsx)(c.Fragment,{children:l.connected?!h||s?(0,c.jsx)(Ji.Z,{}):n&&l?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Js,{store:n,whitelistedCreatorsByCreator:a,connection:u,wallet:l,connected:l.connected}),!x&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Oi.Z,{}),(0,c.jsx)(Oi.Z,{}),(0,c.jsxs)("p",{children:["To finish initialization please copy config below into"," ",(0,c.jsx)("b",{children:"packages/web/.env"})," and restart yarn or redeploy"]}),(0,c.jsx)(Mi,{storeAddress:h,storeOwnerAddress:null===(e=l.publicKey)||void 0===e?void 0:e.toBase58()})]})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{children:"Store is not initialized"}),(0,c.jsx)(r.Link,{to:"/",children:"Go to initialize"})]}):(0,c.jsxs)("p",{children:[(0,c.jsx)(m.Z,{type:"primary",className:"app-btn",onClick:p,children:"Connect"})," ","to admin store."]})})};function Qs(e){var t=e.setUpdatedCreators,n=e.uniqueCreatorsWithUpdates,r=(0,i.useState)(!1),a=r[0],s=r[1],u=(0,i.useState)(""),l=u[0],d=u[1];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(h.Z,{className:"modal-box",title:"Add New Artist Address",visible:a,onOk:function(){var e,i=l;if(d(""),s(!1),n[i])(0,o.notify)({message:"Artist already added!",type:"error"});else try{e=i,t((function(t){return Gs(Gs({},t),{},(0,y.Z)({},l,new B.WhitelistedCreator({address:e,activated:!0})))}))}catch(r){(0,o.notify)({message:"Only valid safecoin addresses are supported",type:"error"})}},onCancel:function(){d(""),s(!1)},children:(0,c.jsx)(Ki.Z,{value:l,onChange:function(e){return d(e.target.value)}})}),(0,c.jsx)(m.Z,{onClick:function(){return s(!0)},children:"Add Creator"})]})}function Js(e){var t=e.store,n=e.whitelistedCreatorsByCreator,r=e.connection,a=e.wallet,s=e.connected,u=(0,i.useState)(t&&t.info&&new B.Store(t.info)),l=u[0],d=u[1],p=(0,i.useState)({}),f=p[0],h=p[1],x=(0,i.useState)(),b=x[0],v=x[1],j=(0,i.useState)(),w=j[0],N=j[1],P=(0,Xe.useMeta)(),S=P.metadata,M=P.masterEditions,T=(0,Xe.useMeta)(),A=(0,o.useUserAccounts)().accountByMint;(0,i.useMemo)((function(){(function(){var e=(0,g.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v,e.next=3,Ws(r,S,M,A);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[s]);var C=Gs(Gs({},Object.values(n).reduce((function(e,t){return e[t.info.address]=t.info,e}),{})),f),Z=[{title:"Name",dataIndex:"name",key:"name"},{title:"Address",dataIndex:"address",render:function(e){return(0,c.jsx)("span",{children:e})},key:"address"},{title:"Activated",dataIndex:"activated",key:"activated",render:function(e,t){return(0,c.jsx)(Fs.Z,{checkedChildren:"Active",unCheckedChildren:"Inactive",checked:e,onChange:function(e){return h((function(n){return Gs(Gs({},n),{},(0,y.Z)({},t.key,new B.WhitelistedCreator({activated:e,address:t.address})))}))}})}}];return(0,c.jsxs)(Ys,{className:"admin-content",children:[(0,c.jsxs)(Ht.Z,{style:{marginTop:10},children:[(0,c.jsxs)(qt.Z,{children:[(0,c.jsxs)(Ht.Z,{span:21,children:[(0,c.jsx)(Qs,{setUpdatedCreators:h,uniqueCreatorsWithUpdates:C}),(0,c.jsx)(m.Z,{onClick:(0,g.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,o.notify)({message:"Saving...",type:"info"}),e.next=3,Ni(r,a,l.public,Object.values(f));case 3:(0,o.notify)({message:"Saved",type:"success"});case 4:case"end":return e.stop()}}),e)}))),type:"primary",children:"Submit"})]}),(0,c.jsx)(Ht.Z,{span:3,children:(0,c.jsx)(Fs.Z,{checkedChildren:"Public",unCheckedChildren:"Whitelist Only",checked:l.public,onChange:function(e){d((function(n){var i=new B.Store(t.info);return i.public=e,i}))}})})]}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(Ds.Z,{className:"artist-whitelist-table",columns:Z,dataSource:Object.keys(C).map((function(e){return{key:e,address:C[e].address,activated:C[e].activated,name:C[e].name||(0,o.shortenAddress)(C[e].address),image:C[e].image}}))})})]}),!t.info.public&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("h1",{children:["You have ",null===b||void 0===b?void 0:b.available.length," MasterEditionV1s that can be converted right now and"," ",null===b||void 0===b?void 0:b.unavailable.length," still in unfinished auctions that cannot be converted yet."]}),(0,c.jsx)(Ht.Z,{children:(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{disabled:w,onClick:(0,g.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.next=3,Vs(r,a,(null===b||void 0===b?void 0:b.available)||[],A);case 3:N(!1);case 4:case"end":return e.stop()}}),e)}))),children:w?(0,c.jsx)(Ji.Z,{}):(0,c.jsx)("span",{children:"Convert Eligible Master Editions"})})})})," "]}),(0,c.jsxs)(Ht.Z,{children:[(0,c.jsx)("p",{style:{marginTop:"30px"},children:"Upgrade the performance of your existing auctions."}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(m.Z,{disabled:w,onClick:(0,g.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.next=3,zs(a,r,T);case 3:N(!1);case 4:case"end":return e.stop()}}),e)}))),children:w?(0,c.jsx)(Ji.Z,{}):(0,c.jsx)("span",{children:"Upgrade Auction Performance"})})})]})]})}var $s=n(29479),ec=n(49505),tc=function(e){var t=e.item,n=t.info,i=t.pubkey,r=e.probability,a=gt(i).creators;return(0,c.jsxs)("div",{className:"card-redeem",children:[(0,c.jsxs)("div",{className:"info",children:[(0,c.jsx)("div",{className:"card-redeem__image",children:(0,c.jsx)(ti,{pubkey:i,uri:n.data.uri,preview:!1})}),(0,c.jsxs)("div",{className:"info__text",children:[(0,c.jsx)(ec.Z,{title:n.data.name,children:(0,c.jsx)("p",{className:"info__title",children:n.data.name})}),(0,c.jsx)(ec.Z,{title:null===a||void 0===a?void 0:a.map((function(e){return" "+(e.name||(0,o.shortenAddress)(e.address||""))})),children:(0,c.jsx)("p",{className:"info__creators",children:null===a||void 0===a?void 0:a.map((function(e){return" "+(e.name||(0,o.shortenAddress)(e.address||""))}))})})]})]}),(0,c.jsxs)("div",{className:"card-redeem__percentage",children:[(0,c.jsx)("p",{className:"percentage-desktop",children:"".concat(r,"% chance")}),(0,c.jsx)("p",{className:"percentage-mobile",children:"".concat(r,"%")})]})]})},nc=function(){return(0,c.jsx)("div",{className:"small-loader",children:(0,c.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,c.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 12C24 18.6274 18.6274 24 12 24C5.37258 24 0 18.6274 0 12C0 5.37258 5.37258 0 12 0V2.63719C11.9547 2.63655 11.9093 2.63623 11.8638 2.63623C6.61706 2.63623 2.36377 6.88952 2.36377 12.1362C2.36377 17.3829 6.61706 21.6362 11.8638 21.6362C17.1105 21.6362 21.3638 17.3829 21.3638 12.1362C21.3638 12.0907 21.3634 12.0453 21.3628 12H24Z",fill:"url(#paint0_angular_379_3911)"}),(0,c.jsx)("defs",{children:(0,c.jsxs)("radialGradient",{id:"paint0_angular_379_3911",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(12 12) rotate(-90) scale(12)",children:[(0,c.jsx)("stop",{offset:"0.237284",stopColor:"white",stopOpacity:"0"}),(0,c.jsx)("stop",{offset:"0.5",stopColor:"white"}),(0,c.jsx)("stop",{offset:"1",stopColor:"white"})]})})]})})},ic=function(e){var t=e.numberOfNFTs,n=e.numberOfAttempts,i=e.metadataByPackCard,r=e.creators,a=e.isLoadingMetadata,o=e.onClose;return(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"modal-redeem__title-container",children:[(0,c.jsx)("p",{className:"title",children:"Claiming Pack Cards"}),(0,c.jsxs)("p",{className:"title",children:[(0,c.jsx)($s.Z,{onClick:o,className:"arrow-back"}),"Claim Pack Cards"]})]}),(0,c.jsxs)("div",{className:"modal-redeem__body",children:[(0,c.jsxs)("p",{className:"body-title",children:["Pack of ",t]}),(0,c.jsxs)("p",{className:"body-desc",children:["Your Pack from ",r.join(", ")," grants you ",n," ","chances to own any of the following Cards."]}),(0,c.jsxs)("div",{className:"modal-redeem__cards",children:[(0,c.jsx)("p",{children:"POTENTIAL NFTs"}),a&&(0,c.jsx)(nc,{}),!a&&i&&Object.values(i).map((function(e){return e&&(0,c.jsx)(tc,{item:e,probability:e.probability},e.pubkey)}))]})]})]})},rc=["Opening your Pack.","Begin adding new Cards to your wallet."],ac=function(e){var t=e.goBack;return(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"modal-redeem__title-container",children:[(0,c.jsx)($s.Z,{onClick:t,className:"arrow-back"}),(0,c.jsx)("span",{className:"text",children:"Wallet Transaction Approvals"})]}),(0,c.jsxs)("div",{className:"modal-redeem__body",children:[(0,c.jsx)("span",{className:"body-big-title",children:"Safe and secure."}),(0,c.jsx)("span",{className:"body-big-desc",children:"Your wallet will ask you to approve two transactions."}),(0,c.jsx)("div",{className:"transaction-cards",children:rc.map((function(e,t){return(0,c.jsxs)("div",{className:"transaction-card",children:[(0,c.jsx)("div",{className:"number-frame",children:t+1}),(0,c.jsx)("div",{className:"transaction-desc",children:e})]},e)}))})]})]})};function oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function sc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oc(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cc(e,t){return uc.apply(this,arguments)}function uc(){return(uc=(0,g.Z)(k().mark((function e(t,n){var i,r,a,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],r=[],t.publicKey){e.next=4;break}throw new Error("Wallet pubKey is not provided");case 4:return e.next=6,n.getMinimumBalanceForRentExemption(Z.MintLayout.span);case 6:return a=e.sent,e.next=9,$(t,t.publicKey.toString(),a,i,r);case 9:return o=e.sent,e.abrupt("return",sc(sc({},o),{},{instructions:i,signers:r}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lc=["connection","wallet"],dc=["cardsToRedeem"];function pc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function fc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pc(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mc=function(){var e=(0,g.Z)(k().mark((function e(t){var n,i,r,a,s;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.connection,i=t.wallet,r=(0,$i.Z)(t,lc),e.next=3,hc(fc({connection:n,wallet:i},r));case 3:return a=e.sent,s=a.flat(),e.next=7,(0,o.sendTransactionsInChunks)(n,i,s.map((function(e){return e.instructions})),s.map((function(e){return e.signers})),o.SequenceType.Sequential,"singleGossip",12e4,20);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),hc=function(){var e=(0,g.Z)(k().mark((function e(t){var n,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cardsToRedeem,i=(0,$i.Z)(t,dc),e.abrupt("return",Promise.all(Array.from(n.entries(),(function(e){var t=(0,Kt.Z)(e,2),n=t[0],r=t[1];return xc(fc({numberOfCards:r,index:n},i))}))));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xc=function(){var e=(0,g.Z)(k().mark((function e(t){var n,i,r,a,s,c,u,l,d,p,f,m,h,x,b,y,v,g;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.wallet,s=t.connection,c=t.pack,u=t.numberOfCards,l=t.voucherMint,d=t.index,p=t.metadataByPackCard,f=t.packCards,m=t.masterEditions,h=c.pubkey,x=c.info.randomOracle,e.next=5,(0,o.findPackCardProgramAddress)((0,o.toPublicKey)(h),d);case 5:if(b=e.sent,y=p[b],v=null===(n=f[b])||void 0===n||null===(i=n.info)||void 0===i?void 0:i.tokenAccount,null!==y&&void 0!==y&&null!==(r=y.info)&&void 0!==r&&r.masterEdition){e.next=10;break}throw new Error("Missing master edition");case 10:if(v){e.next=12;break}throw new Error("Missing user token");case 12:return g=m[y.info.masterEdition],e.abrupt("return",Promise.all(Array.from({length:u}).map((function(e,t){var n=g.info.supply.toNumber()+t+1;return bc({wallet:a,connection:s,index:d,packSetKey:h,randomOracle:x,userToken:v,voucherMint:l,metadataMint:y.info.mint,edition:new I.BN(n)})}))));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),bc=function(){var e=(0,g.Z)(k().mark((function e(t){var n,i,r,a,s,c,u,l,d,p,f,m,h,x,b;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.wallet,i=t.connection,r=t.index,a=t.packSetKey,s=t.randomOracle,c=t.userToken,u=t.voucherMint,l=t.metadataMint,d=t.edition,n.publicKey){e.next=3;break}throw new C.WalletNotConnectedError;case 3:return p=n.publicKey,e.next=6,cc(n,i);case 6:return f=e.sent,m=f.mint,h=f.instructions,x=f.signers,e.next=12,(0,o.claimPack)({index:r,packSetKey:a,wallet:p,userToken:c,voucherMint:u,newMint:m,metadataMint:l,edition:d,randomOracle:s});case 12:return b=e.sent,e.abrupt("return",{instructions:[].concat((0,v.Z)(h),[b]),signers:x});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yc=["cardsLeftToOpen","tokenAccount"],vc=["index","packSetKey","wallet"];function gc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function jc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gc(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kc=function(){var e=(0,g.Z)(k().mark((function e(t){var n,i,r,a,s,c,u,l,d,p,f;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.pack,i=t.tokenAccount,r=t.connection,a=t.wallet,s=t.cardsLeftToOpen,c=t.voucherKey,u=t.editionKey,l=t.editionMint,a.publicKey){e.next=3;break}throw new C.WalletNotConnectedError;case 3:return e.next=5,wc({cardsLeftToOpen:s,editionKey:u,editionMint:l,tokenAccount:i,voucherKey:c,wallet:a,packSetKey:n.pubkey,randomOracle:n.info.randomOracle});case 5:return d=e.sent,p=(0,o.chunks)(d.flat(),46),f=p.map((function(){return[]})),e.abrupt("return",(0,o.sendTransactionsWithRecentBlock)(r,a,p,f));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wc=function(){var e=(0,g.Z)(k().mark((function e(t){var n,i,r,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cardsLeftToOpen,i=t.tokenAccount,r=(0,$i.Z)(t,yc),a=Array.from({length:n}).map((function(e,t){return Nc(jc(jc({index:1},r),0===t?{tokenAccount:i}:{}))})),e.abrupt("return",Promise.all(a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Nc=function(){var e=(0,g.Z)(k().mark((function e(t){var n,i,r,a,s,c;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.index,i=t.packSetKey,r=t.wallet,a=(0,$i.Z)(t,vc),r.publicKey){e.next=3;break}throw new C.WalletNotConnectedError;case 3:return e.next=5,(0,o.cleanUp)((0,o.toPublicKey)(i));case 5:return s=e.sent,e.next=8,(0,o.requestCardToRedeem)(jc({index:n,packSetKey:(0,o.toPublicKey)(i),wallet:r.publicKey},a));case 8:return c=e.sent,e.abrupt("return",[s,c]);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pc=n(72392),Sc=function(){var e=(0,g.Z)(k().mark((function e(t){var n,i,r,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.provingProcessKey,i=t.connection,a=(0,o.getUnixTs)();case 2:if(r||!((0,o.getUnixTs)()-a<15e3)){e.next=15;break}return e.prev=3,e.next=6,(0,Pc.getProvingProcessByPubkey)(i,n);case 6:r=e.sent,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(3);case 11:return e.next=13,(0,o.sleep)(300);case 13:e.next=2;break;case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),Mc=function(){var e=(0,g.Z)(k().mark((function e(t){var n,i,r,a,s,c,u,l,d,p,f,m,h,x,b,y,v;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.pack,i=t.provingProcess,r=t.voucherMint,a=t.vouchers,s=t.accountByMint,c=t.connection,u=t.wallet,!i){e.next=5;break}l=i.info.voucherMint,e.next=10;break;case 5:if(!r){e.next=9;break}l=r,e.next=10;break;case 9:throw new Error("No voucher and proving process");case 10:return e.next=12,(0,o.getEdition)(l);case 12:return d=e.sent,e.next=15,c.getAccountInfo((0,o.toPublicKey)(d));case 15:if(p=e.sent){e.next=18;break}throw new Error("No edition for voucher mint");case 18:if(f=(0,o.decodeEdition)(p.data),m=Object.values(a).find((function(e){return e.info.master===f.parent}))){e.next=22;break}throw new Error("Voucher is missing");case 22:if(h=m.pubkey,x=s.get(l),b=null!==i&&void 0!==i&&i.info.cardsToRedeem?Object.values(Object.fromEntries(i.info.cardsToRedeem)).reduce((function(e,t){return e+t})):0,y=(null===i||void 0===i?void 0:i.info.cardsRedeemed)||0,0!==(v=n.info.allowedAmountToRedeem-y-b)||!i){e.next=29;break}return e.abrupt("return",i);case 29:return e.abrupt("return",Tc({pack:n,cardsLeftToOpen:v,voucherTokenAccount:x,voucherKey:h,editionKey:d,editionMint:l,connection:c,wallet:u}));case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tc=function(){var e=(0,g.Z)(k().mark((function e(t){var n,i,r,a,s,c,u,l,d;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.pack,i=t.cardsLeftToOpen,r=t.voucherTokenAccount,a=t.voucherKey,s=t.editionKey,c=t.editionMint,u=t.connection,(l=t.wallet).publicKey){e.next=3;break}throw new C.WalletNotConnectedError;case 3:return e.next=5,kc({pack:n,voucherKey:a,editionKey:s,editionMint:c,connection:u,wallet:l,cardsLeftToOpen:i,tokenAccount:null===r||void 0===r?void 0:r.pubkey});case 5:return e.next=7,(0,o.findProvingProcessProgramAddress)((0,o.toPublicKey)(n.pubkey),(0,o.toPublicKey)(l.publicKey),(0,o.toPublicKey)(c));case 7:return d=e.sent,e.abrupt("return",Sc({provingProcessKey:d,connection:u}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ac(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Cc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cc(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Cc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Zc=function(){var e=(0,g.Z)(k().mark((function e(t){var n,i,r,a,s,c,u,l,d,p,f,m;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.cardsToRedeem,i=t.metadataByPackCard,r=t.packPubKey,a=[],s=Ac(n.entries()),e.prev=3,s.s();case 5:if((c=s.n()).done){e.next=14;break}return u=(0,Kt.Z)(c.value,2),l=u[0],d=u[1],e.next=9,(0,o.findPackCardProgramAddress)((0,o.toPublicKey)(r),l);case 9:for(p=e.sent,f=i[p],m=0;m<d;m++)a.push(f.pubkey);case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),s.e(e.t0);case 19:return e.prev=19,s.f(),e.finish(19);case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,null,[[3,16,19,22]])})));return function(t){return e.apply(this,arguments)}}(),Oc=function(e){var t=e.provingProcesses,n=e.provingProcessKey,i=e.voucherMetadata;if(n)return t[n];var r=Object.values(t).find((function(e){return e.info.voucherMint===(null===i||void 0===i?void 0:i.info.mint)}));return r||null};function Ec(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Bc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ec(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ec(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kc,Ic=function(e,t){var n=(0,i.useRef)(e);(0,i.useLayoutEffect)((function(){n.current=e}),[e]),(0,i.useEffect)((function(){if(t||0===t){var e=setInterval((function(){return n.current()}),t);return function(){return clearInterval(e)}}}),[t])},_c=i.createContext({isLoading:!1,packKey:"",voucherMint:"",openedMetadata:[],metadataByPackCard:{},handleOpenPack:function(){return Promise.resolve()},redeemModalMetadata:[]}),Rc=function(e){var t,n,r=e.children,s=(0,b.useWallet)(),u=(0,o.useConnection)(),l=(0,a.UO)().packKey,d=(0,a.TH)().search,p=(0,o.getSearchParams)(d),f=p.voucherMint,m=p.provingProcessKey,h=(0,o.useMeta)(),x=h.packs,y=h.packCards,v=h.masterEditions,j=h.metadata,w=h.pullPackPage,N=h.provingProcesses,P=h.vouchers,S=h.isFetching,M=(0,o.useUserAccounts)(),T=M.accountByMint,A=M.userAccounts,C=function(e){var t,n=(0,o.useMeta)(),i=n.packCardsByPackSet,r=n.metadataByMasterEdition,a=(null===(t=n.packs[e])||void 0===t?void 0:t.info)||{},s=a.distributionType,c=void 0===s?o.PackDistributionType.MaxSupply:s,u=a.totalEditions,l=void 0===u?new I.BN(0):u,d=a.totalWeight,p=void 0===d?new I.BN(0):d,f=c===o.PackDistributionType.MaxSupply,m=f?l:p,h=i[e];return null===h||void 0===h?void 0:h.reduce((function(e,t){var n=t.info,i=t.pubkey,a=function(e,t){return 0===t?0:100*e/t}(f?n.maxSupply:n.weight,m.toNumber()).toFixed(1);return r[n.master]?(e[i]=Bc(Bc({},r[n.master]),{},{probability:a}),e):e}),{})}(l),Z=(0,i.useState)(!1),O=Z[0],E=Z[1],B=(0,i.useState)(!1),K=B[0],_=B[1],R=(0,i.useState)(),F=R[0],D=R[1],W=(0,i.useState)([]),L=W[0],V=W[1],U=j.find((function(e){var t;return(null===e||void 0===e||null===(t=e.info)||void 0===t?void 0:t.mint)===f})),z=Object.values(P).find((function(e){var t;return(null===e||void 0===e||null===(t=e.info)||void 0===t?void 0:t.packSet)===l})),q=(null===F||void 0===F||null===(t=F.info)||void 0===t?void 0:t.cardsRedeemed)||0,H=x[l],G=(null===U||void 0===U?void 0:U.pubkey)||(null===z||void 0===z||null===(n=z.info)||void 0===n?void 0:n.metadata),Y=function(e,t){var n=(0,o.useMeta)().packCardsByPackSet,i=Tt(),r=n[e];return i.reduce((function(e,n){var i,a=null===(i=n.edition)||void 0===i?void 0:i.info.parent;return a&&e.length<t&&(null===r||void 0===r?void 0:r.some((function(e){return e.info.master===a})))&&e.push(n),e}),[])}(l,q),X=function(e,t){var n=(0,i.useState)(),r=n[0],a=n[1],s=(0,i.useState)(!1),c=s[0],u=s[1],l=(0,o.useConnection)(),d=function(){var e=(0,g.Z)(k().mark((function e(){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c&&t){e.next=2;break}return e.abrupt("return");case 2:return u(!0),e.next=5,Sc({provingProcessKey:t,connection:l});case 5:n=e.sent,a(n),u(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Ic((function(){d()}),e?2e3:null),r}(K,null===F||void 0===F?void 0:F.pubkey),Q=function(){var e=(0,g.Z)(k().mark((function e(){var t,n,i,r,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mc({pack:H,provingProcess:F,voucherMint:f,vouchers:P,accountByMint:T,connection:u,wallet:s});case 2:return t=e.sent,D(t),n=t.info.cardsToRedeem,i=t.pubkey,e.next=7,Zc({cardsToRedeem:n,metadataByPackCard:C,packPubKey:H.pubkey});case 7:return r=e.sent,V(r),_(!0),e.next=12,mc({wallet:s,connection:u,voucherMint:t.info.voucherMint,cardsToRedeem:n,metadataByPackCard:C,packCards:y,masterEditions:v,pack:H});case 12:return _(!1),e.next=15,Sc({provingProcessKey:i,connection:u});case 15:a=e.sent,D(a);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=(0,g.Z)(k().mark((function e(){var t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),V([]),e.next=4,w(A,l);case 4:t=Oc({provingProcesses:N,provingProcessKey:m,voucherMetadata:U}),D(t||void 0),E(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){D(X)}),[X]),(0,i.useEffect)((function(){S||J()}),[S]),(0,c.jsx)(_c.Provider,{value:{isLoading:O,packKey:l,voucherMint:f,voucherMetadataKey:G,openedMetadata:Y,pack:H,metadataByPackCard:C,handleOpenPack:Q,redeemModalMetadata:L,provingProcess:F},children:r})},Fc=function(){var e=(0,i.useContext)(_c);if(void 0===e)throw new Error("usePack must be used within a PackProvider");return e},Dc=n(3358),Wc=n(3726),Lc=["You may also have to approve the purchase in your wallet if you don\u2019t have \u201cauto-approve\u201d turned on.","Cards are randomly distributed to ensure an equal chance to receive any card. It may take up to a few seconds to fetch each Card."],Vc=function(e){var t=e.index,n=(0,i.useMemo)((function(){return{height:"".concat(308-46*t,"px"),width:"".concat(308-46*t,"px"),top:"calc(100% - ".concat(16*(t+1),"px)")}}),[t]);return(0,c.jsx)("div",{className:"claiming-step__card",style:n})},Uc=function(e){var t=e.onClose,n=(0,i.useState)(-1),r=n[0],a=n[1],s=Fc(),u=s.pack,l=s.voucherMetadataKey,d=s.provingProcess,p=s.redeemModalMetadata,f=(0,o.useMeta)().whitelistedCreatorsByCreator,m=function(e){var t=Fc().pack,n=((null===t||void 0===t?void 0:t.info)||{}).allowedAmountToRedeem,r=void 0===n?0:n,a=Math.max(r-e-1,0),o=Math.min(a,3);return(0,i.useMemo)((function(){return Array.from({length:o})}),[o])}(r),h=(null===u||void 0===u?void 0:u.info)||{},x=h.name,b=void 0===x?"":x,y=h.authority,v=void 0===y?"":y,g=(null===d||void 0===d?void 0:d.info)||{},j=g.cardsRedeemed,k=void 0===j?0:j,w=g.isExhausted,N=void 0!==w&&w,P=(0,i.useMemo)((function(){return Oa(f,v)}),[f,v]),S=r<k-1||!N,M=r>=0?p[r]:l,T=S?b:"You Opened the Pack!",A=S?"From ".concat(P.name||(0,o.shortenAddress)(P.address||"")):"".concat(k," new Cards were added to your wallet"),C=S?"Retrieving ".concat(-1===r?"first":"next"," Card..."):"Pack Opening Succesful!",Z=-1===r?Lc[0]:Lc[1];return Ic((function(){r+1<k&&a(r+1)}),S?4e3:null),(0,c.jsxs)("div",{className:"claiming-step",children:[(0,c.jsx)("span",{className:"claiming-step__title",children:T}),(0,c.jsx)("span",{className:"claiming-step__subtitle",children:A}),(0,c.jsxs)("div",{className:"claiming-step__cards-container",children:[(0,c.jsx)("div",{style:{height:"".concat(16*m.length,"px")},className:"claiming-step__ghost-cards",children:m.map((function(e,t){return(0,c.jsx)(Vc,{index:t},t)}))}),(0,c.jsx)("div",{className:"current-card-container",children:(0,c.jsx)(Dc.Z,{children:(0,c.jsx)(Wc.Z,{classNames:"fade",addEndListener:function(e,t){return e.addEventListener("transitionend",t,!1)},children:(0,c.jsx)(ti,{pubkey:M,preview:!1},r)},r)})})]}),S&&(0,c.jsxs)("div",{className:"claiming-step__notes",children:[(0,c.jsx)("img",{src:"wallet.svg"}),(0,c.jsx)("span",{children:Z})]}),!S&&(0,c.jsx)("button",{className:"claiming-step__btn",onClick:t,children:(0,c.jsx)("span",{children:"Close and view cards"})}),(0,c.jsxs)("div",{className:"claiming-step__footer",children:[S&&(0,c.jsx)(nc,{}),!S&&(0,c.jsx)(ja.Z,{className:"claiming-step__check"}),C]})]})},zc=n(69615),qc=function(e){var t=e.error,n=void 0===t?"":t,i=e.onDismiss;return(0,c.jsx)("div",{className:"claim-error-modal",children:(0,c.jsxs)("div",{className:"claim-error-modal-content",children:[(0,c.jsx)("div",{className:"warning-icon",children:(0,c.jsx)(zc.Z,{width:"20px",height:"20px"})}),(0,c.jsx)("h4",{children:"Transaction error"}),(0,c.jsxs)("div",{className:"error-text",children:["Your transaction was not completed for"," ",n||"an unknown reason. Please try again."]}),(0,c.jsx)(m.Z,{onClick:i,children:"Dismiss"})]})})},Hc=n(34406);!function(e){e[e.Initial=0]="Initial",e[e.TransactionApproval=1]="TransactionApproval",e[e.Claiming=2]="Claiming",e[e.Error=3]="Error"}(Kc||(Kc={}));var Gc,Yc=function(e){var t,n,r=e.isModalVisible,a=e.onClose,s=Fc(),u=s.handleOpenPack,l=s.pack,d=s.metadataByPackCard,p=s.voucherMetadataKey,f=s.provingProcess,m=s.isLoading,x=(0,i.useState)(Kc.Initial),b=x[0],y=x[1],v=(0,i.useState)(""),j=v[0],w=v[1],N=(null===l||void 0===l||null===(t=l.info)||void 0===t?void 0:t.packCards)||0,P=(null===l||void 0===l||null===(n=l.info)||void 0===n?void 0:n.allowedAmountToRedeem)||0,S="true"===Hc.env.NEXT_ENABLE_NFT_PACKS_REDEEM,M=(gt(p).creators||[]).map((function(e){return e.name||(0,o.shortenAddress)(e.address||"")})),T=function(){var e=(0,g.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(Kc.Claiming),e.prev=1,e.next=4,u();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),y(Kc.Error),w((null===e.t0||void 0===e.t0?void 0:e.t0.message)||"");case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),A=(0,i.useCallback)((function(){a(),y(Kc.Initial)}),[b,a,y]),C=(0,i.useCallback)((function(){if(b===Kc.Initial)return y(Kc.TransactionApproval);T()}),[b]),Z=b===Kc.Initial,O=b===Kc.Claiming,E=b===Kc.Error,B=m||Object.values(d||{}).length!==((null===l||void 0===l?void 0:l.info.packCards)||0);return(0,c.jsx)(h.Z,{className:"modal-redeem-wr",centered:!0,width:575,mask:!1,visible:r,onCancel:A,footer:null,closable:Z,maskClosable:!1,children:(0,c.jsxs)("div",{className:"modal-redeem",children:[O&&(0,c.jsx)(Uc,{onClose:A}),!O&&(0,c.jsxs)(c.Fragment,{children:[b===Kc.Initial&&(0,c.jsx)(ic,{onClose:a,metadataByPackCard:d,numberOfAttempts:P,numberOfNFTs:N,creators:M,isLoadingMetadata:B}),b===Kc.TransactionApproval&&(0,c.jsx)(ac,{goBack:function(){return y(Kc.Initial)}}),E&&(0,c.jsx)(qc,{onDismiss:function(){return y(Kc.Initial)},error:j}),S&&!E&&(0,c.jsxs)("div",{className:"modal-redeem__footer",children:[(0,c.jsx)("p",{className:"general-desc",children:"Once opened, a Pack cannot be resealed."}),(0,c.jsx)("button",{className:"modal-redeem__open-nft",disabled:B,onClick:C,children:(0,c.jsx)("span",{children:f?"Resume Opening Pack":"Open Pack"})})]})]})]})})},Xc=function(e){var t=e.onClick,n=Fc().provingProcess;return(0,c.jsxs)("div",{className:"open-pack",children:[(0,c.jsx)("div",{className:"open-pack__title",children:"Once opened a Pack cannot be resealed"}),(0,c.jsx)(m.Z,{onClick:t,children:n?"Resume Opening Pack":"Open Pack"})]})},Qc=n(34406),Jc=function(e){var t,n,i,r=e.onOpenPack,a=Fc(),s=a.pack,u=a.voucherMetadataKey,l=a.provingProcess,d=u||"",p=gt(d),f=null===s||void 0===s?void 0:s.info.uri,m=(0,b.useWallet)().publicKey,h=(0,o.pubkeyToString)(m),x=null===l||void 0===l?void 0:l.info.isExhausted,y="true"===Qc.env.NEXT_ENABLE_NFT_PACKS_REDEEM;return(0,c.jsxs)("div",{className:"pack-view__sidebar",children:[(0,c.jsxs)("div",{className:"pack-view__owner",children:[(0,c.jsx)("div",{className:"item-title",children:"Owner"}),(p.creators||[]).map((function(e){return(0,c.jsxs)("div",{children:[(0,c.jsx)(ui,{creators:[e],size:32}),(0,c.jsx)("span",{className:"item-name",children:e.name||(0,o.shortenAddress)((null===e||void 0===e?void 0:e.address)||"")}),h===e.address&&(0,c.jsx)("div",{className:"you-label",children:"You"})]},e.address)}))]}),(0,c.jsx)(Oi.Z,{className:"divider"}),(0,c.jsxs)("div",{className:"pack-view__art-preview",children:[f&&(0,c.jsx)(ti,{uri:f,active:!0,allowMeshRender:!0,artView:!0}),!f&&(0,c.jsx)(Zi.Z.Image,{})]}),(0,c.jsx)("h4",{className:"pack-view__name",children:(null===s||void 0===s||null===(t=s.info)||void 0===t?void 0:t.name)||(0,c.jsx)(Zi.Z,{paragraph:{rows:1}})}),(0,c.jsxs)("div",{className:"pack-view__info",children:[(0,c.jsxs)("div",{className:"info-item",children:[(0,c.jsx)("div",{className:"info-item__title",children:"PACK OF"}),(0,c.jsxs)("div",{className:"info-item__value",children:[(null===s||void 0===s||null===(n=s.info)||void 0===n?void 0:n.packCards)||0," NFTs"]})]}),(0,c.jsxs)("div",{className:"info-item",children:[(0,c.jsx)("div",{className:"info-item__title",children:"Royalties"}),(0,c.jsx)("div",{className:"info-item__value",children:(0,o.royalty)(p.seller_fee_basis_points)})]}),(0,c.jsx)("div",{className:"info-item",children:(0,c.jsx)(Ei,{id:d})})]}),(0,c.jsx)(Oi.Z,{className:"divider"}),y&&!x&&(0,c.jsx)(Xc,{onClick:r}),(0,c.jsx)(Oi.Z,{className:"divider"}),(0,c.jsxs)("div",{className:"pack-view__description-block",children:[(0,c.jsx)("p",{className:"pack-view__title",children:"DETAILS"}),(0,c.jsx)("p",{className:"pack-view__text",children:(null===s||void 0===s||null===(i=s.info)||void 0===i?void 0:i.description)||(0,c.jsx)(Zi.Z,{paragraph:{rows:3}})})]}),(0,c.jsxs)("div",{className:"pack-view__info-mobile",children:[(0,c.jsx)("div",{className:"info-item",children:(0,c.jsx)(Ei,{id:d})}),(0,c.jsx)(Oi.Z,{className:"divider"})]})]})},$c=function(e){var t=e.index,n=e.isModalOpened,i=Fc(),a=i.openedMetadata,o=i.provingProcess,s=t<((null===o||void 0===o?void 0:o.info.cardsRedeemed)||0),u=a[t],l=(null===u||void 0===u?void 0:u.metadata.pubkey)||"",d=jt(l),p=d.ref,f=d.data,m={backgroundImage:"url(".concat(null===f||void 0===f?void 0:f.image,")")},h=!n&&s&&l;return(0,c.jsxs)("div",{className:"pack-card",ref:p,children:[h&&(0,c.jsx)(r.Link,{to:"/art/".concat(l),children:(0,c.jsx)("div",{className:"pack-card__image",style:m})}),!h&&(0,c.jsx)("div",{className:"pack-card__square",children:(0,c.jsxs)("div",{className:"pack-card__square__front",children:[s&&(0,c.jsx)(nc,{}),!s&&(0,c.jsx)("span",{children:t+1})]})})]})},eu=function(){var e=(0,i.useState)(!1),t=e[0],n=e[1],r=Fc(),a=r.provingProcess,o=r.pack,s=(null===a||void 0===a?void 0:a.info.cardsRedeemed)||0,u=(null===o||void 0===o?void 0:o.info.allowedAmountToRedeem)||0,l=(0,i.useMemo)((function(){return Array.from({length:u},(function(e,t){return t}))}),[u,s]),d=(0,i.useCallback)((0,g.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(!t);case 1:case"end":return e.stop()}}),e)}))),[t]);return(0,c.jsxs)("div",{className:"pack-view",children:[(0,c.jsxs)(qt.Z,{children:[(0,c.jsx)(Ht.Z,{md:16,children:(0,c.jsx)("div",{className:"pack-view__list",children:l.map((function(e){return(0,c.jsx)($c,{index:e,isModalOpened:t},e)}))})}),(0,c.jsx)(Ht.Z,{md:8,className:"pack-view__sidebar-container",children:(0,c.jsx)(Jc,{onOpenPack:d})})]}),(0,c.jsx)(Yc,{isModalVisible:t,onClose:d})]})},tu=function(){return(0,c.jsx)(Rc,{children:(0,c.jsx)(eu,{})})},nu={selectedItems:{},selectedVouchers:{},allowedAmountToRedeem:0,name:"",description:"",uri:"",distributionType:o.PackDistributionType.Fixed,weightByMetadataKey:{},supplyByMetadataKey:{},isUnlimitedSupply:!1,mutable:!0};!function(e){e[e.SelectItems=0]="SelectItems",e[e.SelectVoucher=1]="SelectVoucher",e[e.AdjustQuantities=2]="AdjustQuantities",e[e.ReviewAndMint=3]="ReviewAndMint"}(Gc||(Gc={}));var iu,ru,au,ou,su,cu=n(95349),uu=function(e){return!e.edition},lu=function(e){var t,n=e.masterEdition;return!(null===n||void 0===n||null===(t=n.info.maxSupply)||void 0===t||!t.toNumber())},du=function(e){var t=e.masterEdition;return void 0===(null===t||void 0===t?void 0:t.info.maxSupply)},pu=function(e){return du(e)||lu(e)},fu=function(e){var t=e.selectedItems,n=e.supplyByMetadataKey,i=e.weightByMetadataKey,r=e.accountByMint,a=e.distributionType;return Object.keys(t).map((function(e,s){var c=t[e].metadata.info.mint,u=r.get(c);if(!u)throw new Error("No token account for the metadata: ".concat(e));return{index:s+1,mint:c,maxSupply:a!==o.PackDistributionType.Unlimited&&n[e]?new I.BN(n[e]):new I.BN(0),weight:a!==o.PackDistributionType.MaxSupply&&i[e]?new I.BN(i[e]):new I.BN(0),tokenAccount:u,toAccount:R.Keypair.generate()}}))},mu=function(e){var t=e.selectedVouchers,n=e.accountByMint;return Object.keys(t).map((function(e,i){var r=t[e].metadata.info.mint,a=n.get(r);if(!a)throw new Error("No token account for the metadata: ".concat(e));return{index:i+1,mint:r,tokenAccount:a}}))},hu=function(){var e=(0,i.useState)(Gc.SelectItems),t=e[0],n=e[1],r=(0,a.k6)(),o=(0,a.UO)().stepParam,s=(0,i.useCallback)((function(e){var n=void 0===e?t+1:e;r.push("/admin/pack/create/".concat(n.toString()))}),[t,r]),c=(0,i.useCallback)((function(){n(Gc.SelectItems)}),[n]);return(0,i.useEffect)((function(){if(o)return n(parseInt(o));s(Gc.SelectItems)}),[o]),{step:t,goToNextStep:s,resetStep:c}},xu=(iu={},(0,y.Z)(iu,Gc.SelectItems,{title:"Select items for your Pack Listing"}),(0,y.Z)(iu,Gc.SelectVoucher,{title:"Select voucher for your Pack Opening"}),(0,y.Z)(iu,Gc.AdjustQuantities,{title:"Adjust Quantities"}),(0,y.Z)(iu,Gc.ReviewAndMint,{title:"Review and mint your pack"}),iu),bu=function(e){var t=e.step,n=e.children,i=xu[t].title;return(0,c.jsxs)("div",{className:"create-pack-header",children:[(0,c.jsx)("p",{className:"create-pack-header__title",children:i}),n]})},yu=(n(28316),ru={},(0,y.Z)(ru,Gc.SelectItems,"Select Items"),(0,y.Z)(ru,Gc.SelectVoucher,"Select Voucher"),(0,y.Z)(ru,Gc.AdjustQuantities,"Adjust Quantities"),(0,y.Z)(ru,Gc.ReviewAndMint,"Review & Mint"),ru),vu=(au={},(0,y.Z)(au,Gc.SelectItems,"Continue to Voucher"),(0,y.Z)(au,Gc.SelectVoucher,"Continue to Quantities"),(0,y.Z)(au,Gc.AdjustQuantities,"Continue to Mint"),(0,y.Z)(au,Gc.ReviewAndMint,"Confirm & Mint"),au),gu=Hi.Z.Step,ju=function(e){var t=e.step,n=e.setStep,i=e.submit,r=e.isValidStep,a=e.buttonLoading,s=(0,b.useWallet)().connected,u=(0,o.useMeta)().isLoading,l=xt().width,d=t===Gc.ReviewAndMint,p=!r||!s||u||a;return(0,c.jsxs)("div",{className:"sidebar-wrapper",children:[(0,c.jsx)(Hi.Z,{className:"sidebar-steps",direction:l<768?"horizontal":"vertical",current:t,children:Object.entries(yu).map((function(e){var t=(0,Kt.Z)(e,2),n=t[0],i=t[1];return(0,c.jsx)(gu,{title:i},n)}))}),(0,c.jsx)(m.Z,{className:"sidebar-btn secondary-btn",onClick:function(){if(d)return i();n(t+1)},disabled:p,children:a?(0,c.jsx)(Ji.Z,{}):vu[t]}),t!==Gc.SelectItems&&(0,c.jsx)(m.Z,{type:"text",className:"sidebar-btn",onClick:function(){return n(t-1)},children:"Back"})]})},ku=(0,i.memo)(ju),wu=n(72779),Nu=n.n(wu),Pu=function(e){var t,n,i,r=e.item,a=e.isSelected,o=e.onClick,s=e.showSupply,u=e.children,l=r.metadata,d=r.masterEdition,p=l.pubkey,f=(null===l||void 0===l||null===(t=l.info)||void 0===t?void 0:t.data).name,m=jt(p),h=m.ref,x=m.data,b=(null===d||void 0===d||null===(n=d.info.maxSupply)||void 0===n?void 0:n.toString())||"Unlimited",y=(null===d||void 0===d||null===(i=d.info.supply)||void 0===i?void 0:i.toString())||"0",v=Nu()({"pack-item-row":!0,"pack-item-row--selected":a});return(0,c.jsxs)("div",{className:v,onClick:o,ref:h,children:[u,(0,c.jsx)("div",{className:"preview-column",children:(0,c.jsx)(ti,{uri:null===x||void 0===x?void 0:x.image,preview:!1})}),(0,c.jsxs)("div",{className:"name-column",children:[(0,c.jsx)("p",{className:"name-column__name",children:f}),(0,c.jsx)("p",{className:"name-column__subtitle",children:"Master"})]}),(0,c.jsxs)("div",{className:"info-column",children:[(0,c.jsx)("p",{className:"info-column__subtitle",children:"Maximum Supply"}),(0,c.jsx)("p",{className:"info-column__value",children:b})]}),s&&(0,c.jsxs)("div",{className:"info-column",children:[(0,c.jsx)("p",{className:"info-column__subtitle",children:"Supply"}),(0,c.jsx)("p",{className:"info-column__value",children:y})]})]})},Su=(0,i.memo)(Pu),Mu=function(e){var t=e.selectedItems,n=e.pubkey;return!(!n||!t[n])},Tu=function(e){var t=e.handleSelectItem,n=e.selectedItems,i=e.items,r=e.showSupply,a=e.emptyMessage,o=e.isLoading,s=!(null!==i&&void 0!==i&&i.length)&&a;return o?(0,c.jsx)(nc,{}):(0,c.jsxs)("div",{children:[i.map((function(e){return(0,c.jsx)(Su,{isSelected:Mu({selectedItems:n,pubkey:e.metadata.pubkey}),onClick:function(){return t(e)},item:e,showSupply:r},e.metadata.pubkey)})),s&&(0,c.jsx)("p",{children:a})]})},Au=function(e){var t=e.title,n=e.subtitle,i=e.isSelected,r=e.onClick,a=Nu()({"select-card-wrapper":!0,"select-card-wrapper--selected":i});return(0,c.jsxs)("div",{className:a,onClick:r,children:[(0,c.jsx)("p",{className:"select-card-wrapper__title",children:t}),(0,c.jsx)("p",{className:"select-card-wrapper__subtitle",children:n})]})},Cu=(0,i.memo)(Au);!function(e){e.weight="weight",e.maxSupply="maxSupply"}(ou||(ou={}));var Zu=(su={},(0,y.Z)(su,o.PackDistributionType.MaxSupply,{title:"Supply",subtitle:"The chance of getting a card will be based on the card's supply that is left"}),(0,y.Z)(su,o.PackDistributionType.Fixed,{title:"Weighted Supply",subtitle:"Weighted chance of getting each card with limited card supply"}),(0,y.Z)(su,o.PackDistributionType.Unlimited,{title:"Weighted",subtitle:"Weighted chance of getting each card"}),su);function Ou(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ou(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ou(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bu=function(e){var t=e.allowedAmountToRedeem,n=e.distributionType,i=e.weightByMetadataKey,r=e.supplyByMetadataKey,a=e.selectedItems,s=e.setPackState,u=e.isUnlimited,l=[].concat((0,v.Z)(u?[o.PackDistributionType.Unlimited]:[]),[o.PackDistributionType.MaxSupply,o.PackDistributionType.Fixed]),d=n!==o.PackDistributionType.Unlimited,p=n!==o.PackDistributionType.MaxSupply,f=function(e,t,n){var a,o,c=Number(t),u=e.metadata.pubkey;if(!(n===ou.weight&&c>100)){if(n===ou.weight)return s({weightByMetadataKey:Eu(Eu({},i),{},(0,y.Z)({},u,c))});var l=null===(a=e.masterEdition)||void 0===a||null===(o=a.info.maxSupply)||void 0===o?void 0:o.toNumber();s({supplyByMetadataKey:Eu(Eu({},r),{},(0,y.Z)({},u,void 0!==l&&c>l?l:c))})}};return(0,c.jsxs)("div",{className:"quantities-step-wrapper",children:[(0,c.jsx)("p",{className:"quantities-step-wrapper__title",children:"Set number of cards in pack"}),(0,c.jsx)("p",{className:"quantities-step-wrapper__subtitle",children:"Number of times user can redeem a card using a single voucher."}),(0,c.jsx)(Ki.Z,{className:"quantities-step-wrapper__input",type:"number",value:t,onChange:function(e){return function(e){s({allowedAmountToRedeem:parseInt(e)})}(e.target.value)}}),(0,c.jsx)("p",{className:"quantities-step-wrapper__title",children:"Select distribution type"}),(0,c.jsx)("div",{className:"cards-select",children:l.map((function(e){return(0,c.jsx)(Cu,{title:Zu[e].title,subtitle:Zu[e].subtitle,isSelected:n===e,onClick:function(){return function(e){s({distributionType:e})}(e)}},e)}))}),(0,c.jsxs)("div",{className:"quantities-step-wrapper__table-titles",children:[d&&(0,c.jsx)("p",{children:"NUMBER OF NFTs"}),p&&(0,c.jsxs)("p",{className:"redeem-weight",children:["REDEEM WEIGHT"," ",(0,c.jsx)("span",{children:"\u2014 Weights must be between 1-100. 1 is least likely, 100 is most likely."})]})]}),Object.values(a).map((function(e){var t,n;return(0,c.jsx)(Su,{item:e,children:(0,c.jsxs)(c.Fragment,{children:[d&&(0,c.jsx)("div",{className:"input-column",children:(0,c.jsx)(Ki.Z,{type:"number",min:0,max:null===(t=e.masterEdition)||void 0===t||null===(n=t.info.maxSupply)||void 0===n?void 0:n.toNumber(),className:Nu()({"ant-error-input":!r[e.metadata.pubkey]}),value:r[e.metadata.pubkey],onChange:function(t){var n=t.target.value;return f(e,n,ou.maxSupply)}})}),p&&(0,c.jsxs)("div",{className:"input-column",children:[(0,c.jsx)(Ki.Z,{type:"number",min:0,max:100,value:i[e.metadata.pubkey],onChange:function(t){var n=t.target.value;return f(e,n,ou.weight)},className:Nu()({"ant-error-input error-redeem":!i[e.metadata.pubkey]})}),!i[e.metadata.pubkey]&&(0,c.jsx)("div",{className:"error-tooltip-container",children:(0,c.jsx)(ec.Z,{overlayClassName:"creat-pack-redeem-tooltip",placement:"top",title:"Weight must be between 1-100",children:(0,c.jsx)(zc.Z,{className:"input-info"})})})]})]})},e.metadata.pubkey)}))]})},Ku=(0,i.memo)(Bu),Iu=function(e){var t,n=e.uri,i=e.name,r=e.description,a=e.supplyByMetadataKey,s=e.allowedAmountToRedeem,u=e.distributionType,l=(t=a,Object.values(t).reduce((function(e,t){return t+e}),0)),d=Math.floor(l/s)||0,p=u===o.PackDistributionType.Unlimited;return(0,c.jsxs)("div",{className:"review-step-wrapper",children:[(0,c.jsx)(Rn.Z,{wrapperClassName:"review-step-wrapper__image-wrapper",className:"review-step-wrapper__image",src:n,preview:!0,loading:"lazy"}),(0,c.jsx)("p",{className:"review-step-wrapper__title",children:i}),(0,c.jsx)("p",{className:"review-step-wrapper__text",children:r}),(0,c.jsx)("p",{className:"review-step-wrapper__subtitle",children:"Number of packs"}),(0,c.jsx)("p",{className:"review-step-wrapper__text",children:p?"Unlimited":d}),(0,c.jsx)("p",{className:"review-step-wrapper__subtitle",children:"Total NFTs"}),(0,c.jsx)("p",{className:"review-step-wrapper__text",children:p?"Unlimited":l})]})},_u=(0,i.memo)(Iu),Ru=function(e){var t=e.error,n=void 0===t?"":t,i=e.onDismiss,r=e.open,a=e.modalView,o=void 0===a||a,s=(0,c.jsxs)("div",{className:"error-modal-content",children:[(0,c.jsx)("div",{className:"warning-icon",children:(0,c.jsx)(zc.Z,{width:20,height:20})}),(0,c.jsx)("h4",{children:"Transaction error"}),(0,c.jsxs)("div",{className:"error-text",children:["Your transaction was not completed for ",n||"an unknown reason. Please try again."]}),(0,c.jsx)(m.Z,{onClick:i,children:"Dismiss"})]});return o?(0,c.jsx)(h.Z,{className:"transaction-error-modal",centered:!0,width:500,mask:!1,visible:r,onCancel:i,footer:null,closable:!0,children:s}):(0,c.jsx)("div",{className:"create-error-modal",children:s})},Fu=function(e,t){var n=new Uint8Array(t);return(0,v.Z)(e).forEach((function(e,t){return n[t]=e.charCodeAt(0)})),n},Du=function(){var e=(0,g.Z)(k().mark((function e(t){var n,i,r,a,s,c,u,l,d,p,f,m,h,x;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,i=t.packSetKey,r=t.walletPublicKey,a=n.name,s=n.uri,c=n.description,u=n.mutable,l=n.allowedAmountToRedeem,d=n.redeemStartDate,p=n.redeemEndDate,f=n.distributionType,m=new I.BN(l),h=d?new I.BN(d.valueOf()):null,x=p?new I.BN(p.valueOf()):null,e.abrupt("return",(0,o.initPackSet)({name:Fu(a,32),description:c,uri:s,mutable:u,distributionType:f,allowedAmountToRedeem:m,redeemStartDate:h,redeemEndDate:x,packSetKey:i,authority:r.toBase58()}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Wu=function(){var e=(0,g.Z)(k().mark((function e(t){var n,i,r,a,o,s;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.connection,i=t.newAccountPubkey,r=t.walletPublicKey,a=t.space,o=t.programId,e.next=3,n.getMinimumBalanceForRentExemption(a);case 3:return s=e.sent,e.abrupt("return",R.SystemProgram.createAccount({fromPubkey:r,newAccountPubkey:i,lamports:s,space:a,programId:o}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Lu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Vu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lu(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Uu=function(){var e=(0,g.Z)(k().mark((function e(t){var n,i,r,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.selectedItems,i=t.packSetKey,r=t.walletPublicKey,a=n.map((function(e){return(0,o.addCardToPack)(Vu(Vu({},e),{},{packSetKey:i,authority:r.toBase58()}))})),e.abrupt("return",Promise.all(a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function zu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function qu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zu(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hu=function(){var e=(0,g.Z)(k().mark((function e(t){var n,i,r,a;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.selectedVouchers,i=t.packSetKey,r=t.walletPublicKey,a=n.map((function(e){return(0,o.addVoucherToPack)(qu(qu({},e),{},{packSetKey:i,authority:r.toBase58()}))})),e.abrupt("return",Promise.all(a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Gu=function(){var e=(0,g.Z)(k().mark((function e(t){var n,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.packSetKey,i=t.walletPublicKey,e.abrupt("return",(0,o.activate)({packSetKey:n,authority:i.toBase58()}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yu=function(e){var t=e.cardsToAdd,n=e.connection,i=e.walletPublicKey;return Promise.all(t.map((function(e){var t=e.toAccount;return Wu({connection:n,walletPublicKey:i,newAccountPubkey:t.publicKey,space:Z.AccountLayout.span,programId:(0,o.programIds)().token})})))},Xu=function(e,t){for(var n=[],i=0,r=e.length;i<r;i+=t)n.push(e.slice(i,i+t));return n},Qu=function(){var e=(0,g.Z)(k().mark((function e(t){var n,i,r,a,s,c,u,l,d,p,f,m,h,x,b,y,g,j,w,N,P,S,M,T;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.wallet,i=t.connection,r=t.accountByMint,a=t.data,n.publicKey){e.next=3;break}throw new C.WalletNotConnectedError;case 3:return(s=R.Keypair.generate()).publicKey||new Error("No packSet key"),c=n.publicKey,u=s.publicKey,e.next=9,Wu({connection:i,walletPublicKey:c,newAccountPubkey:u,space:o.MAX_PACK_SET_SIZE,programId:(0,o.programIds)().pack_create});case 9:return l=e.sent,e.next=12,Du({data:a,walletPublicKey:c,packSetKey:u});case 12:return d=e.sent,p=a.selectedVouchers,f=a.selectedItems,m=a.supplyByMetadataKey,h=a.weightByMetadataKey,x=a.distributionType,b=fu({selectedItems:f,supplyByMetadataKey:m,weightByMetadataKey:h,accountByMint:r,distributionType:x}),e.next=17,Yu({cardsToAdd:b,connection:i,walletPublicKey:c});case 17:return y=e.sent,e.next=20,Uu({selectedItems:b,walletPublicKey:c,packSetKey:u});case 20:return g=e.sent,j=mu({selectedVouchers:p,accountByMint:r}),e.next=24,Hu({selectedVouchers:j,walletPublicKey:c,packSetKey:u});case 24:return w=e.sent,e.next=27,Gu({walletPublicKey:c,packSetKey:u});case 27:return N=e.sent,P=Xu(g,3),S=P.map((function(){return[]})),M=Xu(y,5),T=Xu(b.map((function(e){return e.toAccount})),5),e.abrupt("return",{instructions:[[l,d]].concat((0,v.Z)(M),(0,v.Z)(P),[w,[N]]),signers:[[s]].concat((0,v.Z)(T),(0,v.Z)(S),[[],[]])});case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ju=function(){var e=(0,g.Z)(k().mark((function e(t){var n,i,r,a,s,c,u;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.wallet,i=t.connection,r=t.accountByMint,a=t.data,e.next=3,Qu({wallet:n,connection:i,accountByMint:r,data:a});case 3:return s=e.sent,c=s.instructions,u=s.signers,e.abrupt("return",(0,o.sendTransactionsInChunks)(i,n,c,u,o.SequenceType.Sequential,"singleGossip",12e4,10));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$u=function(e){var t=e.shouldShow,n=e.hide;return(0,c.jsxs)(o.MetaplexOverlay,{visible:t,children:[(0,c.jsx)(d,{}),(0,c.jsx)("h1",{className:"title",style:{fontSize:"3rem",marginBottom:20},children:"Congratulations"}),(0,c.jsx)("p",{style:{color:"white",textAlign:"center",fontSize:"2rem"},children:"Your pack has been created."}),(0,c.jsx)(m.Z,{className:"sidebar-btn secondary-btn",onClick:n,children:"Continue"})]})},el=function(e,t){return e.every((function(e){return t.includes(e)}))},tl=function(e){var t=e.attributes,n=e.step,i=t.selectedItems,r=t.selectedVouchers;switch(n){case Gc.SelectItems:return Object.values(i).length>0;case Gc.SelectVoucher:return Object.values(r).length>0;case Gc.AdjustQuantities:return function(e){var t=e.allowedAmountToRedeem,n=e.distributionType,i=e.selectedItems,r=e.weightByMetadataKey,a=e.supplyByMetadataKey,s=t>0,c=Object.keys(i),u=function(){return el(c,Object.keys(a))},l=function(){return el(c,Object.keys(r))};switch(n){case o.PackDistributionType.Unlimited:return s&&l();case o.PackDistributionType.MaxSupply:return s&&u();case o.PackDistributionType.Fixed:return s&&u()&&l()}}(t);default:return!0}};function nl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function il(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nl(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rl=function(){var e=(0,a.k6)(),t=(0,i.useState)(nu),n=t[0],r=t[1],s=(0,i.useState)(!1),u=s[0],l=s[1],d=(0,i.useState)({error:"",display:!1}),p=d[0],f=d[1],h=(0,i.useState)(!1),x=h[0],v=h[1],j=(0,o.useMeta)().pullUserMetadata,w=Tt(),N=hu(),P=N.step,S=N.goToNextStep,M=N.resetStep,T=(0,b.useWallet)(),A=(0,o.useConnection)(),C=(0,o.useMeta)().isFetching,Z=(0,o.useUserAccounts)(),O=Z.accountByMint,E=Z.userAccounts,B=tl({attributes:n,step:P}),K=x||C,I=n.selectedItems,_=n.selectedVouchers,R=n.distributionType,F=n.weightByMetadataKey,D=n.supplyByMetadataKey,W=n.allowedAmountToRedeem,L=n.name,V=n.description,U=n.uri,z=n.isUnlimitedSupply,q=w.filter(function(e,t){return function(n){return 0===Object.values(e).length?pu(n)&&uu(n):(t?du(n):lu(n))&&uu(n)}}(I,z)),H=w.filter(function(e){return function(t){return!function(e,t){return e[t.metadata.pubkey]}(e,t)&&pu(t)&&uu(t)&&function(e){var t,n=e.masterEdition;return!(null===n||void 0===n||null===(t=n.info.supply)||void 0===t||!t.toNumber())}(t)}}(I)),G=Object.keys(_),Y=(0,Kt.Z)(G,1)[0],X=jt(Y),Q=X.ref,J=X.data,$=(0,i.useCallback)((function(e){r(il(il({},n),e))}),[n,r]),ee=(0,i.useCallback)((function(e){var t=e.metadata,n=e.masterEdition;if(null!==t&&void 0!==t&&t.pubkey){var i=il({},I);if(i[t.pubkey])delete i[t.pubkey];else if(i[t.pubkey]=e,Object.keys(i).length>100)return void cu.Z.warning({message:"Exceeded Max Selected Count!",description:"Maximum ".concat(100," items can be selected."),className:"notification-container"});var r=void 0===(null===n||void 0===n?void 0:n.info.maxSupply);$({selectedItems:i,distributionType:r?o.PackDistributionType.Unlimited:o.PackDistributionType.Fixed,isUnlimitedSupply:r})}}),[$,I]),te=(0,i.useCallback)((function(e){var t=e.metadata;if(null!==t&&void 0!==t&&t.pubkey){var n=il({},_);n[t.pubkey]?delete n[t.pubkey]:n=(0,y.Z)({},t.pubkey,e),$({selectedVouchers:n})}}),[$,_]),ne=(0,i.useCallback)((0,g.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(T&&!!Object.values(I).length&&!!Object.values(_).length)){e.next=12;break}return v(!0),e.prev=3,e.next=6,Ju({wallet:T,connection:A,accountByMint:O,data:n});case 6:l(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),f({error:null===e.t0||void 0===e.t0?void 0:e.t0.message,display:!0});case 12:v(!1);case 13:case"end":return e.stop()}}),e,null,[[3,9]])}))),[T,A,O,n]),ie=(0,i.useCallback)((function(){r(nu),M(),l(!1),e.push("/artworks")}),[]);(0,i.useEffect)((function(){J&&$({uri:J.image,name:J.name,description:J.description})}),[J]);var re=u&&!p.display,ae=P===Gc.SelectItems||P===Gc.SelectVoucher;return(0,c.jsxs)("div",{className:"pack-create-wrapper",ref:Q,children:[(0,c.jsx)(ku,{step:P,setStep:S,isValidStep:B,submit:ne,buttonLoading:K}),(0,c.jsxs)("div",{className:"content-wrapper",children:[(0,c.jsx)(bu,{step:P,children:ae&&(0,c.jsx)(m.Z,{onClick:function(){return j(E)},children:"Refresh"})}),P===Gc.SelectItems&&(0,c.jsx)(Tu,{items:q,selectedItems:I,handleSelectItem:ee,isLoading:K}),P===Gc.SelectVoucher&&(0,c.jsx)(Tu,{items:H,selectedItems:_,handleSelectItem:te,showSupply:!0,emptyMessage:"You need to have minted supply of NFT to use it as a voucher."}),P===Gc.AdjustQuantities&&(0,c.jsx)(Ku,{allowedAmountToRedeem:W,selectedItems:I,distributionType:R,weightByMetadataKey:F,supplyByMetadataKey:D,isUnlimited:z,setPackState:$}),P===Gc.ReviewAndMint&&(0,c.jsx)(_u,{uri:U,name:L,description:V,distributionType:R,allowedAmountToRedeem:W,supplyByMetadataKey:D})]}),(0,c.jsx)(Ru,{open:p.display,onDismiss:function(){return f({error:"",display:!1})},error:p.error}),(0,c.jsx)($u,{shouldShow:re,hide:ie})]})};function al(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ol(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?al(Object(n),!0).forEach((function(t){(0,y.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):al(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sl=f.Z.Content,cl=function(){var e=(0,a.UO)().id,t=At(e),n=(0,o.useConnection)(),i=(0,b.useWallet)(),r=(0,o.useMint)(null===t||void 0===t?void 0:t.auction.info.tokenMint);return t&&i&&n&&r?(0,c.jsx)(dl,{auctionView:t,connection:n,wallet:i,mint:r}):(0,c.jsx)(Ji.Z,{})};function ul(e,t){var n,i,r,a=null===(n=t.auctionManager.participationConfig)||void 0===n?void 0:n.nonWinningConstraint;return a===B.NonWinningConstraint.GivenForFixedPrice?(null===(i=t.auctionManager.participationConfig)||void 0===i||null===(r=i.fixedPrice)||void 0===r?void 0:r.toNumber())||0:a===B.NonWinningConstraint.GivenForBidPrice&&e.info.lastBid.toNumber()||0}function ll(e){var t,n,r=e.auctionView,a=(0,Xe.useMeta)(),s=a.bidRedemptions,c=a.bidderMetadataByAuctionAndBidder,u=r.auction.pubkey,l=(0,i.useState)({}),d=l[0],p=l[1],f=Ct(r.auction.pubkey),m=function(e){var t=(0,Xe.useMeta)().payoutTickets,n=(0,i.useState)({}),r=n[0],a=n[1];return(0,i.useEffect)((function(){if(!e.items.flat().map((function(e){return e.metadata})).filter((function(e){return!e})).length){for(var n=ol({},r),i=[].concat((0,v.Z)(e.items),(0,v.Z)(e.participationItem?[[e.participationItem]]:[])),o=[],s=0;s<i.length;s++)for(var c=i[s],u=0;u<c.length;u++)for(var l,d,p,f=c[u],m=(null===(l=f.metadata)||void 0===l||null===(d=l.info)||void 0===d||null===(p=d.data)||void 0===p?void 0:p.creators)||[],h=m?m.map((function(e){return e.address})).concat([e.auctionManager.authority]):[e.auctionManager.authority],x=0;x<h.length;x++){var b="".concat(e.auctionManager.pubkey,"-").concat(s,"-").concat(u,"-").concat(f.safetyDeposit.pubkey,"-").concat(h[x],"-").concat(x);n[b]||o.push({key:b,promise:(0,B.getPayoutTicket)(e.auctionManager.pubkey,f===e.participationItem?null:s,f===e.participationItem?null:u,x<h.length-1?x:null,f.safetyDeposit.pubkey,h[x])})}Promise.all(o.map((function(e){return e.promise}))).then((function(e){e.forEach((function(e,i){t[e]&&(n[o[i].key]=t[e])})),a((function(e){return ol(ol({},e),n)}))}))}}),[Object.values(t).length,e.items.flat().map((function(e){return e.metadata})).filter((function(e){return!!e})).length]),Object.values(r).reduce((function(e,t){return e[t.info.recipient]||(e[t.info.recipient]={sum:0,tickets:[]}),e[t.info.recipient].tickets.push(t),e[t.info.recipient].sum+=t.info.amountPaid.toNumber(),e}),{})}(r),h=(0,v.Z)(r.auction.info.bidState.bids).reverse().slice(0,r.auctionManager.numWinners.toNumber()),x=function(e){var t=(0,i.useState)({}),n=t[0],r=t[1],a=(0,o.programIds)(),s=e.auctionManager.numWinners.toNumber(),c=e.auction,u=c.info.bidState.bids,l=(0,i.useMemo)((function(){return(0,v.Z)(u).reverse().slice(0,s)}),[u,s]);return(0,i.useEffect)((function(){(0,g.Z)(k().mark((function e(){var t,n,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.map((function(e){return(0,o.getBidderPotKey)({auctionProgramId:a.auction,auctionKey:c.pubkey,bidderPubkey:e.key}).then((function(t){return{key:t,winner:e}}))})),e.next=3,Promise.all(t);case 3:n=e.sent,i=n.reduce((function(e,t){var n=o.cache.get(t.key);return n&&(e[t.winner.key]=n),e}),{}),r(i);case 6:case"end":return e.stop()}}),e)})))()}),[l,r]),n}(r),b=f.filter((function(e){var t,n;return!e.info.cancelled||(null===(t=s[d[e.pubkey]])||void 0===t?void 0:t.info.getBidRedeemed((null===(n=r.participationItem)||void 0===n?void 0:n.safetyDeposit.info.order)||0))})),y=void 0!==r.auctionManager.participationConfig&&null!==r.auctionManager.participationConfig,j=y?b:[];(0,i.useMemo)((0,g.Z)(k().mark((function e(){var t,n,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={},n=0;case 2:if(!(n<f.length)){e.next=11;break}if(i=f[n],d[i.pubkey]){e.next=8;break}return e.next=7,(0,B.getBidderKeys)(r.auction.pubkey,i.info.bidderPubkey);case 7:t[i.pubkey]=e.sent.bidRedemption;case 8:n++,e.next=2;break;case 11:p(ol(ol({},d),t));case 12:case"end":return e.stop()}}),e)}))),[f.length]),(null===(t=r.auctionManager.participationConfig)||void 0===t?void 0:t.winnerConstraint)===B.WinningConstraint.NoParticipationPrize&&(j=j.filter((function(e){return!x[e.info.bidderPubkey]})));var w=null===(n=r.auctionManager.participationConfig)||void 0===n?void 0:n.nonWinningConstraint,N=[];j.forEach((function(e){if(!x[e.info.bidderPubkey]&&(w===B.NonWinningConstraint.GivenForFixedPrice||w===B.NonWinningConstraint.GivenForBidPrice)){var t=d[e.pubkey];if(t){var n,i=s[t];i&&i.info.getBidRedeemed((null===(n=r.participationItem)||void 0===n?void 0:n.safetyDeposit.info.order)||0)||N.push(e)}else N.push(e)}}));var P=N.reduce((function(e,t){return e+ul(t,r)}),0),S=j.reduce((function(e,t){var n=0;return x[t.info.bidderPubkey]||(n=ul(t,r)),e+n}),0),M=h.reduce((function(e,t){return e+t.amount.toNumber()}),0),T=Object.values(x).filter((function(e){return!e.info.emptied}));return{bidsToClaim:(0,v.Z)(T.map((function(e){return{metadata:c["".concat(u,"-").concat(e.info.bidderAct)],pot:e}}))),totalWinnerPayments:M,payoutTickets:m,participationEligible:j,participationPossibleTotal:S,participationUnredeemedTotal:P,hasParticipation:y}}var dl=function(e){var t=e.auctionView,n=e.wallet,r=e.connection,a=e.mint,s=t.thumbnail.metadata.pubkey,u=gt(s),l=Ot(t.auction.info.tokenMint),d=(0,i.useState)(),p=d[0],f=d[1],h=(0,Xe.useMeta)(),x=h.whitelistedCreatorsByCreator,b=h.pullBillingPage;(0,i.useEffect)((function(){b(s)}),[]);var y=(0,i.useState)(0),v=y[0],j=y[1];(0,i.useEffect)((function(){r.getTokenAccountBalance((0,o.toPublicKey)(t.auctionManager.acceptPayment)).then((function(e){void 0!==e.value.uiAmount&&null!==e.value.uiAmount&&f(e.value.uiAmount)}))}),[v]);var w=l.accounts[0],N=(0,o.useUserAccounts)().accountByMint,P=ll({auctionView:t}),S=P.bidsToClaim,M=P.totalWinnerPayments,T=P.payoutTickets,A=P.participationPossibleTotal,C=P.participationUnredeemedTotal,Z=P.hasParticipation;return(0,c.jsx)(sl,{children:(0,c.jsxs)(Ht.Z,{children:[(0,c.jsxs)(qt.Z,{style:{margin:"0 30px",textAlign:"left",fontSize:"1.4rem"},children:[(0,c.jsx)(Ht.Z,{span:12,children:(0,c.jsx)(ti,{pubkey:s,className:"artwork-image",allowMeshRender:!0})}),(0,c.jsxs)(Ht.Z,{span:12,children:[(0,c.jsx)("div",{style:{fontWeight:700},children:u.title}),(0,c.jsx)("br",{}),(0,c.jsx)("div",{className:"info-header",children:"TOTAL AUCTION VALUE"}),(0,c.jsxs)("div",{className:"escrow",children:[t.auctionManager.acceptPayment==o.WRAPPED_SOL_MINT.toBase58()?"\u25ce":"",(0,o.fromLamports)(M+A,a)]}),(0,c.jsx)("br",{}),(0,c.jsx)("div",{className:"info-header",children:"TOTAL AUCTION REDEEMED VALUE"}),(0,c.jsxs)("div",{className:"escrow",children:[t.auctionManager.acceptPayment==o.WRAPPED_SOL_MINT.toBase58()?"\u25ce":"",(0,o.fromLamports)(M+A-C,a)]}),(0,c.jsx)("br",{}),(0,c.jsx)("div",{className:"info-header",children:"TOTAL COLLECTED BY ARTISTS AND AUCTIONEER"}),(0,c.jsxs)("div",{className:"escrow",children:[t.auctionManager.acceptPayment==o.WRAPPED_SOL_MINT.toBase58()?"\u25ce":"",(0,o.fromLamports)(Object.values(T).reduce((function(e,t){return e+t.sum}),0),a)]}),(0,c.jsx)("br",{}),(0,c.jsx)("div",{className:"info-header",children:"TOTAL UNSETTLED"}),(0,c.jsxs)("div",{className:"escrow",children:[t.auctionManager.acceptPayment==o.WRAPPED_SOL_MINT.toBase58()?"\u25ce":"",(0,o.fromLamports)(S.reduce((function(e,t){return e+t.metadata.info.lastBid.toNumber()}),0),a)]}),(0,c.jsx)("br",{}),(0,c.jsx)("div",{className:"info-header",children:"TOTAL IN ESCROW"}),(0,c.jsx)("div",{className:"escrow",children:void 0!==p?"".concat(t.auction.info.tokenMint==o.WRAPPED_SOL_MINT.toBase58()?"\u25ce":""," ").concat(p):(0,c.jsx)(Ji.Z,{})}),(0,c.jsx)("br",{}),Z&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"info-header",children:"TOTAL UNREDEEMED PARTICIPATION FEES OUTSTANDING"}),(0,c.jsxs)("div",{className:"outstanding-open-editions",children:[t.auctionManager.acceptPayment==o.WRAPPED_SOL_MINT.toBase58()?"\u25ce":"",(0,o.fromLamports)(C,a)]}),(0,c.jsx)("br",{})]}),(0,c.jsx)("br",{}),(0,c.jsx)(m.Z,{type:"primary",size:"large",className:"action-btn",onClick:(0,g.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le(r,n,t,S.map((function(e){return e.pot})),w.pubkey,N);case 2:j((function(e){return e+1}));case 3:case"end":return e.stop()}}),e)}))),children:"SETTLE OUTSTANDING"})]})]}),(0,c.jsx)(qt.Z,{children:(0,c.jsx)(Ds.Z,{style:{width:"100%"},columns:[{title:"Name",dataIndex:"name",key:"name"},{title:"Address",dataIndex:"address",key:"address"},{title:"Amount Paid",dataIndex:"amountPaid",render:function(e){return(0,c.jsxs)("span",{children:["\u25ce",(0,o.fromLamports)(e,a)]})},key:"amountPaid"}],dataSource:Object.keys(T).map((function(e){var t,n;return{key:e,name:(null===(t=x[e])||void 0===t||null===(n=t.info)||void 0===n?void 0:n.name)||"N/A",address:e,amountPaid:T[e].sum}}))})})]})})},pl=n(34406);function fl(){var e="true"===pl.env.NEXT_ENABLE_NFT_PACKS;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(r.HashRouter,{basename:"/",children:(0,c.jsx)(kn,{children:(0,c.jsxs)(a.rs,{children:[e&&(0,c.jsx)(a.AW,{exact:!0,path:"/admin/pack/create/:stepParam?",component:function(){return(0,c.jsx)(rl,{})}}),e&&(0,c.jsx)(a.AW,{exact:!0,path:"/pack/:packKey",component:function(){return(0,c.jsx)(tu,{})}}),(0,c.jsx)(a.AW,{exact:!0,path:"/admin",component:function(){return(0,c.jsx)(Xs,{})}}),(0,c.jsx)(a.AW,{exact:!0,path:"/analytics",component:function(){return(0,c.jsx)(As,{})}}),(0,c.jsx)(a.AW,{exact:!0,path:"/art/create/:step_param?",component:function(){return(0,c.jsx)(Ir,{})}}),(0,c.jsx)(a.AW,{exact:!0,path:"/artworks/:id?",component:function(){return(0,c.jsx)(ws,{})}}),(0,c.jsx)(a.AW,{exact:!0,path:"/art/:id",component:function(){return(0,c.jsx)(qi,{})}}),(0,c.jsx)(a.AW,{exact:!0,path:"/artists/:id",component:function(){return(0,c.jsx)(qr,{})}}),(0,c.jsx)(a.AW,{exact:!0,path:"/artists",component:function(){return(0,c.jsx)(Xr,{})}}),(0,c.jsx)(a.AW,{exact:!0,path:"/auction/create/:step_param?",component:function(){return(0,c.jsx)(Yo,{})}}),(0,c.jsx)(a.AW,{exact:!0,path:"/auction/:id",component:function(){return(0,c.jsx)(Sa,{})}}),(0,c.jsx)(a.AW,{exact:!0,path:"/auction/:id/billing",component:function(){return(0,c.jsx)(cl,{})}}),(0,c.jsx)(a.AW,{path:"/about",component:function(){return(0,c.jsx)(Rs,{})}}),(0,c.jsx)(a.AW,{path:"/",component:function(){return(0,c.jsx)(Ai,{})}})]})})})})}var ml=function(){return(0,c.jsx)(fl,{})}},90188:function(){},70542:function(){},60523:function(){},74121:function(){},33196:function(){},50787:function(){},38087:function(){},8092:function(){},50936:function(){},27464:function(){},39415:function(){},87374:function(){},29285:function(){},57267:function(){},59255:function(){},85338:function(){},46601:function(){}}]);